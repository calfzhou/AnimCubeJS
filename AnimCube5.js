"use strict";function AnimCube5(e){var t,r,n,o,a,l,i,f,u,c,s,h,v,d,g,b,m,M,p,k,L,y,R,w,F,T,D,S,A,B,x,E,U,I,P,C,X,W,Y,z,q,O,Q,Z,N,H,G,K,j=[],J=[],V=[],$=[],_=[],ee=[],te=[[0,-1,0],[0,1,0],[0,0,-1],[0,0,1],[-1,0,0],[1,0,0]],re=[[-1,-1,-1],[1,-1,-1],[1,-1,1],[-1,-1,1],[-1,1,-1],[1,1,-1],[1,1,1],[-1,1,1]],ne=[[0,1,2,3],[4,7,6,5],[0,4,5,1],[2,6,7,3],[0,3,7,4],[1,5,6,2]],oe=[[0,3,2,1],[0,3,2,1],[3,2,1,0],[3,2,1,0],[0,3,2,1],[0,3,2,1]],ae=[[2,5,3,4],[4,3,5,2],[4,1,5,0],[5,1,4,0],[0,3,1,2],[2,1,3,0]],le=[1,1,-1,-1,-1,-1],ie=[0,0,-1],fe=[1,0,0],ue=[],ce=[],se=[],he=[],ve=!0,de=[],ge=[],be=[],me=[],Me=[],pe=!0,ke=-1,Le=6,ye=12,Re=!0,we=!1,Fe=!1,Te=!1,De=0,Se=0,Ae=0,Be=0,xe=[3,2,0,5,1,4],Ee=[[20,15,10,5,0,21,16,11,6,1,22,17,12,7,2,23,18,13,8,3,24,19,14,9,4],[4,9,14,19,24,3,8,13,18,23,2,7,12,17,22,1,6,11,16,21,0,5,10,15,20],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],[20,15,10,5,0,21,16,11,6,1,22,17,12,7,2,23,18,13,8,3,24,19,14,9,4],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]];function Ue(){var e=Pe("config");null!=e?function(e){var t=new XMLHttpRequest;function r(){4==t.readyState&&(200==t.status?function(e){for(var t=e.split("\n"),r=0;r<t.length;r++){var n=t[r].split("=");void 0!==n[1]&&(j[n[0]]=n[1].trim())}}(t.responseText):console.log("Error loading config file: "+e),Ie())}t.onreadystatechange=r,t.open("GET",e,!0),t.send()}(e):Ie()}function Ie(){J[0]=Zr(255,128,64),J[1]=Zr(255,0,0),J[2]=Zr(0,255,0),J[3]=Zr(0,0,255),J[4]=Zr(153,153,153),J[5]=Zr(170,170,68),J[6]=Zr(187,119,68),J[7]=Zr(153,68,68),J[8]=Zr(68,119,68),J[9]=Zr(0,68,119),J[10]=Zr(255,255,255),J[11]=Zr(255,255,0),J[12]=Zr(255,96,32),J[13]=Zr(208,0,0),J[14]=Zr(0,144,0),J[15]=Zr(32,64,208),J[16]=Zr(176,176,176),J[17]=Zr(80,80,80),J[18]=Zr(255,0,255),J[19]=Zr(0,255,255),J[20]=Zr(255,160,192),J[21]=Zr(32,255,16),J[22]=Zr(0,0,0),J[23]=Zr(128,128,128);var e=Pe("bgcolor");if(t=null!=e&&6==e.length&&Hr(e)?"#"+e:"gray",e=Pe("butbgcolor"),o=null!=e&&6==e.length&&Hr(e)?"#"+e:t,null!=(e=Pe("colors")))for(var u=0;u<10&&u<e.length/6;u++)Hr(e.substring(6*u,6*u+6))&&(J[u]="#"+e.substring(6*u,6*u+6));for(u=0;u<6;u++)for(var c=0;c<25;c++)V[u][c]=u+10;if(null!=(e=Pe("supercube"))&&"1"==e){Fe=!0,Ce(.06);for(u=0;u<25;u++)V[0][u]=22;null!=(e=Pe("scw"))&&("1"==e?Ae=1:"2"==e&&(Ae=2)),1==Ae&&(J[10]="#000000")}if(null!=(e=Pe("gabbacolors"))&&"1"==e&&(1==Fe?(J[11]="#fdcf00",J[12]="#fd4e0a",J[13]="#93000d",J[14]="#00702d",J[15]="#00347a"):(Ce(.06),J[11]="#ffd90a",J[12]="#ff4f0b",J[13]="#9e0b19",J[14]="#0b7d39",J[15]="#0b4186")),null!=(e=Pe("borderwidth"))){for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(Be=10*Be+parseInt(e[u]));Be>=0&&Be<=20&&Ce(Be/100)}if(Fe)for(u=0;u<6;u++)for(c=0;c<25;c++)$[u][c]=0;var s="lluu";if(null!=(e=Pe("colorscheme"))&&6==e.length)for(u=0;u<6;u++){var h=23;for(c=0;c<23;c++)if(e[u].toLowerCase()=="0123456789wyorgbldmcpnk".charAt(c)){h=c;break}for(c=0;c<25;c++)V[u][c]=h}if("1"==(e=Pe("scramble"))?De=1:"2"==e&&(De=2),0==De){if(null!=(e=Pe("pos"))&&150==e.length){s="uuuuff","gray"==t&&(t="white");for(u=0;u<6;u++){var g=xe[u];for(c=0;c<25;c++){var b=Ee[u][c];V[g][b]=23;for(var m=0;m<14;m++)if(e.charAt(25*u+c)=="DFECABdfecabgh".charAt(m)){V[g][b]=m+4;break}}}}if(null!=(e=Pe("facelets"))&&150==e.length)for(u=0;u<6;u++)for(c=0;c<25;c++){V[u][c]=23;for(m=0;m<23;m++)if(e[25*u+c].toLowerCase()=="0123456789wyorgbldmcpnk".charAt(m)){V[u][c]=m;break}}if(null!=(e=Pe("superfacelets"))&&150==e.length)for(u=0;u<6;u++)for(c=0;c<25;c++)for(m=0;m<4;m++)if(e[25*u+c].toLowerCase()=="0123".charAt(m)){$[u][c]=m;break}}if(N=0,K=!1,G=!1,null!=(e=Pe("sign"))&&"1"==e&&(G=!0,N=5,K=!0),null!=(e=Pe("yz"))&&("0"==e?K=!1:"1"==e&&(K=!0)),null!=(e=Pe("randmoves"))){var L=0;for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(L=10*L+parseInt(e[u]));L>0&&(Se=L)}("random"==(e=Pe("move"))||De>0)&&(e=Pn(5,Se)),de=null==e?[]:Ye(e,!0),C=0,q=-1,0==De&&(null!=(e=Pe("initmove"))&&("random"==e&&(e=Pn(5,Se)),be="#"==e?de:Ye(e,!1)),null!=(e=Pe("initrevmove"))&&("random"==e&&(e=Pn(5,Se)),me="#"==e?de:Ye(e,!1)),null!=(e=Pe("demo"))&&("random"==e&&(e=Pn(5,Se)),(ge="#"==e?de:Ye(e,!0)).length>0&&ge[0].length>0&&(F=!0))),e=Pe("position"),Pr(zr(ue,ie,fe)),null==e&&(e=s);var y=Math.PI/12;for(u=0;u<e.length;u++){var R=y;switch(e[u].toLowerCase()){case"d":R=-R;case"u":Or(ie,R),Or(fe,R);break;case"f":R=-R;case"b":Qr(ie,R),Qr(fe,R);break;case"l":R=-R;case"r":qr(ie,R),qr(fe,R)}}if(Pr(zr(ue,ie,fe)),v=0,d=0,null!=(e=Pe("speed")))for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(v=10*v+parseInt(e[u]));if(null!=(e=Pe("doublespeed")))for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(d=10*d+parseInt(e[u]));if(0==v&&(v=10),0==d&&(d=3*v/2),T=0,null==(e=Pe("perspective")))T=2;else for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(T=10*T+parseInt(e[u]));var w,P=0;if(null!=(e=Pe("scale")))for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(P=10*P+parseInt(e[u]));if(D=1/(1+P/10),A=!1,null!=(e=Pe("hint"))){A=!0,B=0;for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(B=10*B+parseInt(e[u]));B<1?A=!1:B/=10}(x=3.7,null!=(e=Pe("hinthoriz")))&&((w=parseFloat(e))>0&&(x=w));(E=3.7,null!=(e=Pe("hintvert")))&&((w=parseFloat(e))>0&&(E=w));(U=0,null!=(e=Pe("hintborder"))&&"1"==e&&(U=1),Q=13,null!=(e=Pe("buttonheight")))&&((w=parseInt(e))>=9&w<=25&&(Q=w));(Le=0==de.length?0:6,O=1,"0"==(e=Pe("buttonbar"))?(O=0,Q=0,Le=0):"1"==e?O=1:"2"!=e&&0!=de.length||(O=2,Le=0),e=Pe("edit"),M="0"!=e,e=Pe("repeat"),p="0"!=e,e=Pe("clickprogress"),k="0"!=e,"1"==(e=Pe("movetext"))?N=1:"5"==e&&(N=5),H=1,"0"==(e=Pe("movetextspace"))&&(H=0),null!=(e=Pe("textsize")))&&((w=parseInt(e))>=5&w<=40&&(ye=w));(e=Pe("fonttype"),Re=null==e||"1"==e,z=0,null!=(e=Pe("metric"))&&("1"==e?z=1:"2"==e?z=2:"3"==e&&(z=3)),S=1,null!=(e=Pe("align")))&&((w=parseInt(e))>=0&w<=3&&(S=w),w>=3&w<=99&&(S=w/100));null!=(e=Pe("snap"))&&"1"==e&&(we=!0);for(u=0;u<6;u++)for(c=0;c<25;c++)_[u][c]=V[u][c],ee[u][c]=$[u][c];be.length>0&&_e(V,be[0],0,be[0].length,!1),me.length>0&&_e(V,me[0],0,me[0].length,!0),2==De&&_e(V,de[0],0,de[0].length,!0);for(u=0;u<3;u++)ce[u]=ie[u],se[u]=fe[u],he[u]=ue[u];ln(t)<128?(n="white",r=function(e){"#"!=e.substring(0,1)&&(e=an(e));var t=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16);return t=Math.floor(1.3*t),r=Math.floor(1.3*r),n=Math.floor(1.3*n),Zr(t>255?255:t,r>255?255:r,n>255?255:n)}(t)):(n="black",r=fn(t)),i=ln(o)<128?"white":"black",a=n,null!=(e=Pe("slidercolor"))&&6==e.length&&Hr(e)&&(a="#"+e),l=fn(t),null!=(e=Pe("sliderbgcolor"))&&6==e.length&&Hr(e)&&(l="#"+e),null!=(e=Pe("troughcolor"))&&6==e.length&&Hr(e)&&(l="#"+e),f="black",null!=(e=Pe("cubecolor"))&&6==e.length&&Hr(e)&&(f="#"+e),I=1,"0"==(e=Pe("counter"))&&(I=0),q=de.length>0&&de[0][0]>=1e3?0:-1,kn=pn.getContext("2d"),wn=Q,Fn=Le,Tn=ye,In(),Dn.appendChild(pn),br(),F&&rt(-1)}function Pe(e){var t=Cn[e];return void 0===t?j[e]:t}function Ce(e){wr[0][0]=wr[0][1]=wr[1][1]=wr[3][0]=e,wr[1][0]=wr[2][0]=wr[2][1]=wr[3][1]=1-e}var Xe=[0,0,0,0,0,0,6,6,6,3,3,3,3,3,3,2,2,2,2,2,2],We=[0,1,2,3,4,5,1,2,4,5,2,0,5,2,0,0,1,2,3,4,5];function Ye(e,t){if(t){for(var r=e.indexOf("{");-1!=r;)r=e.indexOf("{",r+1);if(null==Me)q=0,Me=[];else{for(var n=[],o=0;o<Me.length;o++)n[o]=Me[o];q=Me.length,Me=n}}var a=1;for(r=e.indexOf(";");-1!=r;)a++,r=e.indexOf(";",r+1);var l=[],i=0;for(r=e.indexOf(";"),a=0;-1!=r;)l[a]=qe(e.substring(i,r),t,a++),i=r+1,r=e.indexOf(";",i);return l[a]=qe(e.substring(i),t,a),l}var ze=["n","t","c","s","a","m"];function qe(e,t,r){if(G&&(e=function(e){return e=function(e,t,r){for(var n=0;n<6;n++){var o=new RegExp(t+Oe[n],"g");e=e.replace(o,Oe[n]+r)}return e}(e,2,"n"),e}(e)),"#"==e.trim()&&void 0!==de[r])return de[r];var n=0,o=[],a="UDFBLRESMXYZxyzudfblr";1==K&&(a="UDFBLRESMXZYxzyudfblr");for(var l=0;l<e.length;l++)if("."==e.charAt(l))o[n]=-1,n++;else if("{"==e.charAt(l)){l++;for(var i="";l<e.length&&"}"!=e.charAt(l);)t&&(i+=e.charAt(l)),l++;t&&(Me[q]=i,o[n]=1e3+q,q++,n++)}else for(var f=0;f<21;f++)if(e.charAt(l)==a.charAt(f)){l++;var u=Xe[f];if(o[n]=28*We[f],l<e.length&&0==Xe[f])for(var c=0;c<ze.length;c++)if(e.charAt(l)==ze[c]){u=c+1,l++;break}o[n]+=4*u,l<e.length&&("1"==e.charAt(l)?l++:"'"==e.charAt(l)||"3"==e.charAt(l)?(o[n]+=2,l++):"2"==e.charAt(l)&&(++l<e.length&&"'"==e.charAt(l)?(o[n]+=3,l++):o[n]+=1)),n++,l--;break}return o}var Oe=["U","D","F","B","L","R"];function Qe(e,t,r){if(t>=e.length)return"";for(var n="",o=t;o<r;o++){var a=He(e,o);""!=a&&(n+=a+(H?" ":""))}return n}var Ze=[[["U","D","F","B","L","R"],["Un","Dn","Fn","Bn","Ln","Rn"],["Ut","Dt","Ft","Bt","Lt","Rt"],["Uc","Dc","Fc","Bc","Lc","Rc"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"],["Um","Dm","Fm","Bm","Lm","Rm"]],[["U","D","F","B","L","R"],["Un","Dn","Fn","Bn","Ln","Rn"],["u","d","f","b","l","r"],["Z","~Z","Y","~Y","~X","X"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"],["~E","E","S","~S","M","~M"]],[["U","D","F","B","L","R"],["Un","Dn","Fn","Bn","Ln","Rn"],["u","d","f","b","l","r"],["Y","~Y","Z","~Z","~X","X"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"],["~E","E","S","~S","M","~M"]],[["U","D","F","B","L","R"],["Un","Dn","Fn","Bn","Ln","Rn"],["Uu","Dd","Ff","Bb","Ll","Rr"],["QU","QD","QF","QB","QL","QR"],["UD'","DU'","FB'","BF'","LR'","RL'"],["UD","DU","FB","BF","LR","RL"],["u","d","f","b","l","r"]],[["U","D","F","B","L","R"],["2U","2D","2F","2B","2L","2R"],["u","d","f","b","l","r"],["y","~y","z","~z","~x","x"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"],["~E","E","S","~S","M","~M"]]],Ne=["","2","'","2'"];function He(e,t){if(t>=e.length)return"";if(e[t]>=1e3)return"";if(-1==e[t])return".";var r=Ze[N-1][Math.floor(e[t]/4)%7][Math.floor(e[t]/28)];return"~"==r.charAt(0)?r.substring(1)+Ne[(e[t]+2)%4]:r+Ne[e[t]%4]}var Ge=["","q","h","s"];function Ke(e){for(var t=0,r=0;r<e.length;r++)e[r]<1e3&&t++;return t}function je(e,t){for(var r=0,n=0;;){for(;r<e.length&&e[r]>=1e3;)r++;if(n==t)break;r<e.length&&(n++,r++)}return r}function Je(e,t){for(var r=0,n=0;n<e.length&&(n<t||t<0);n++)r+=Ve(e[n]);return r}function Ve(e){if(e<0||e>=1e3)return 0;var t=e%4,r=Math.floor(e/4)%7,n=1;switch(z){case 1:1!=t&&3!=t||(n*=2);case 2:(1==r||r>3)&&(n*=2);case 3:3==r&&(n=0),3!=z||4!=r&&5!=r||(n*=2)}return n}function $e(e){q=e.length>0&&e[0]>=1e3?e[0]-1e3:-1}function _e(e,t,r,n,o){for(var a=o?r+n:r;;){if(o){if(a<=r)break;a--}if(t[a]>=1e3)q=o?-1:t[a]-1e3;else if(t[a]>=0){var l=t[a]%4+1,i=Math.floor(t[a]/4)%7;4==l&&(l=2),o&&(l=4-l),pt(e,Math.floor(t[a]/28),l,i)}if(!o&&++a>=r+n)break}}var et=0,tt=0;function rt(e){if(nt(),(F||0!=de.length&&0!=de[P].length)&&(!F||0!=ge.length&&0!=ge[0].length)){switch(X=1,W=!1,Y=!0,e){case 0:break;case 1:X=-1;break;case 2:W=!0;break;case 3:X=-1,W=!0;break;case 4:Y=!1}un(et++,X)}}function nt(){1==R&&(b=!0)}function ot(){C=0,ve=!0,m=!1;for(var e=0;e<6;e++)for(var t=0;t<25;t++)V[e][t]=_[e][t],$[e][t]=ee[e][t];be.length>0&&void 0!==be[P]&&_e(V,be[P],0,be[P].length,!1),me.length>0&&void 0!==me[P]&&_e(V,me[P],0,me[P].length,!0),de.length>0&&$e(de[P]),De>0&&(de=Ye(Pn(5,Se),!1)),2==De&&_e(V,de[0],0,de[0].length,!0);for(e=0;e<3;e++)ie[e]=ce[e],fe[e]=se[e],ue[e]=he[e];setTimeout(br,0)}var at=[[[0,5],[0,5]],[[0,5],[0,5]],[[0,5],[0,5]],[[0,5],[0,5]],[[0,5],[0,5]],[[0,5],[0,5]]],lt=[],it=[],ft=[],ut=[],ct=[],st=[[[0,0],[0,0]],[[0,5],[0,5]],[[0,5],[0,1]],[[0,1],[0,5]],[[0,5],[4,5]],[[4,5],[0,5]],[[0,5],[0,2]],[[0,2],[0,5]],[[0,5],[3,5]],[[3,5],[0,5]]],ht=[[1,0,3,3,2,3],[0,1,5,5,4,5],[2,3,1,0,3,2],[4,5,0,1,5,4],[3,2,2,4,1,0],[5,4,4,2,0,1]],vt=[[0,1,5,5,4,5],[1,0,3,3,2,3],[4,5,0,1,5,4],[2,3,1,0,3,2],[5,4,4,2,0,1],[3,2,2,4,1,0]],dt=[[[0,0],[0,0]],[[0,4],[1,3]],[[1,3],[0,4]],[[0,5],[3,4]],[[0,5],[1,2]],[[3,4],[0,5]],[[1,2],[0,5]],[[2,3],[0,5]],[[0,5],[2,3]]],gt=[[0,0,6,6,4,6],[0,0,5,5,3,5],[4,6,0,0,6,4],[3,5,0,0,5,3],[6,4,4,3,0,0],[5,3,3,4,0,0]],bt=[[0,0,7,7,8,7],[0,0,7,7,8,7],[8,7,0,0,7,8],[8,7,0,0,7,8],[7,8,8,8,0,0],[7,8,8,8,0,0]],mt=[[0,0,5,5,3,5],[0,0,6,6,4,6],[3,5,0,0,5,3],[4,6,0,0,6,4],[5,3,3,4,0,0],[6,4,4,3,0,0]];function Mt(e){for(var t=0;t<6;t++)lt[t]=st[ht[e][t]],ct[t]=st[vt[e][t]],it[t]=dt[gt[e][t]],ft[t]=dt[bt[e][t]],ut[t]=dt[mt[e][t]];ve=!1}function pt(e,t,r,n){switch(n){case 2:Dt(e,t,4-r,0),Dt(e,t,4-r,1);break;case 3:Dt(e,t,4-r,0),Dt(e,t,4-r,1),Dt(e,t,4-r,6),Dt(e,1^t,r,1),Dt(e,1^t,r,0);break;case 4:Dt(e,t,4-r,0),Dt(e,1^t,r,0);break;case 5:Dt(e,1^t,4-r,0),Dt(e,t,4-r,0);break;default:Dt(e,t,4-r,n)}}var kt=[0,1,2,3,4,9,14,19,24,23,22,21,20,15,10,5],Lt=[6,7,8,13,18,17,16,11],yt=[1,5,-1,-5,1,5,-1,-5],Rt=[0,4,24,20,5,3,19,21,10,2,14,22],wt=[[3,3,3,0],[2,1,1,1],[3,3,0,0],[2,1,1,2],[3,2,0,0],[2,2,0,1]],Ft=[[7,7,7,4],[6,5,5,5],[7,7,4,4],[6,5,5,6],[7,6,4,4],[6,6,4,5]],Tt=[];function Dt(e,t,r,n){St(e,t,r,n),1==Fe&&r>0&&r<4&&(St($,t,r,n),function(e,t,r){if(6==r)return 4==e&&(Xt(10,1,3),1==t?Xt(10,1,1):2==t?Xt(10,1,2):3==t&&Xt(2,5,0)),5==e&&(Xt(10,1,3),1==t?Xt(2,5,0):2==t?Xt(10,1,2):3==t&&Xt(10,1,1)),2==e&&Wt(4,4-t),void(3==e&&Wt(4,t));var n=1==r;if(0==n)for(var o=0;o<25;o++)$[e][o]=($[e][o]+4-t)%4;4==e&&(0==n&&(Xt(20,1,3),1==t?Xt(0,1,1):2==t?Xt(0,1,2):3==t&&Xt(0,5,0)),1==n&&(Xt(15,1,3),1==t?Xt(5,1,1):2==t?Xt(5,1,2):3==t&&Xt(1,5,0)));5==e&&(0==n&&(Xt(0,1,3),1==t?Xt(4,5,0):2==t?Xt(20,1,2):3==t&&Xt(20,1,1)),1==n&&(Xt(5,1,3),1==t?Xt(3,5,0):2==t?Xt(15,1,2):3==t&&Xt(15,1,1)));0==n&&(2==e&&Wt(0,4-t),3==e&&Wt(1,t));1==n&&(2==e&&Wt(2,4-t),3==e&&Wt(3,t))}(t,r,n))}function St(e,t,r,n){if(!n){for(var o=0;o<16;o++)Tt[(o+4*r)%16]=e[t][kt[o]];for(o=0;o<16;o++)e[t][kt[o]]=Tt[o];for(o=0;o<8;o++)Tt[(o+2*r)%8]=e[t][Lt[o]];for(o=0;o<8;o++)e[t][Lt[o]]=Tt[o]}var a=5*r;for(o=0;o<4;o++)for(var l=ae[t][o],i=n?Ft[t][o]:wt[t][o],f=yt[i],u=n>1?Rt[i+4]:Rt[i],c=0;c<5;c++,a++)Tt[a%20]=e[l][c*f+u];for(o=0,a=0;o<4;o++)for(l=ae[t][o],i=n?Ft[t][o]:wt[t][o],f=yt[i],u=n>1?Rt[i+4]:Rt[i],c=0;c<5;c++,a++)e[l][c*f+u]=Tt[a]}var At,Bt,xt,Et,Ut,It,Pt,Ct=[[[0,1,0],[0,5,1],[0,5,4],[0,1,5]],[[20,1,0],[4,5,1],[4,5,4],[20,1,5]],[[5,1,0],[1,5,1],[1,5,4],[5,1,5]],[[15,1,0],[3,5,1],[3,5,4],[15,1,5]],[[10,1,0],[2,5,1],[2,5,4],[10,1,5]]];function Xt(e,t,r){for(var n=e,o=0;o<5;n+=t,o++)$[r][n]=($[r][n]+2)%4}function Wt(e,t){for(var r=0;r<4;r++)for(var n=Ct[e][r],o=n[0],a=0;a<5;o+=n[1],a++)$[n[2]][o]=($[n[2]][o]+t)%4}var Yt,zt,qt=[],Ot=[],Qt=[],Zt=[],Nt=[[[0,0],[5,0],[5,1],[0,1]],[[5,0],[5,5],[4,5],[4,0]],[[5,5],[0,5],[0,4],[5,4]],[[0,5],[0,0],[1,0],[1,5]],[[0,1],[5,1],[5,2],[0,2]],[[4,0],[4,5],[3,5],[3,0]],[[0,3],[5,3],[5,4],[0,4]],[[2,0],[2,5],[1,5],[1,0]],[[0,2],[5,2],[5,3],[0,3]],[[3,0],[3,5],[2,5],[2,0]]],Ht=[[1,0],[0,1],[-1,0],[0,-1],[1,0],[0,1],[-1,0],[0,-1],[1,0],[0,1]],Gt=[[1,1,1,1,1,1,1,1,1,-1],[1,1,1,1,1,1,1,1,1,-1],[1,-1,1,-1,1,-1,1,-1,1,1],[1,-1,1,-1,1,-1,1,-1,-1,1],[-1,1,-1,1,-1,1,-1,1,-1,-1],[1,-1,1,-1,1,-1,1,-1,1,1]],Kt=[],jt=[],Jt=[[[1,0,0],[0,0,0],[0,0,1]],[[1,0,0],[0,1,0],[0,0,0]],[[0,0,0],[0,1,0],[0,0,1]]],Vt=[[[0,0,1],[0,0,0],[-1,0,0]],[[0,1,0],[-1,0,0],[0,0,0]],[[0,0,0],[0,0,1],[0,-1,0]]],$t=[[[0,0,0],[0,1,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,1]],[[1,0,0],[0,0,0],[0,0,0]]],_t=[1,-1,1,-1,1,-1],er=[],tr=[],rr=[],nr=[],or=[],ar=[],lr=[],ir=[],fr=[],ur=[],cr=[],sr=[],hr=[[1,0,0,0,0],[0,1,0,0,0],[1,1,0,0,0],[1,1,1,1,1],[1,0,0,0,1],[1,0,0,0,2],[0,0,1,0,0]],vr=[],dr=[[0,2,2,2,2],[2,1,2,2,2],[2,2,2,2,2],[2,2,2,2,2],[0,2,2,2,0],[0,2,2,2,0],[2,2,6,2,2]],gr=[[0,1,2,3,4],[4,3,2,1,0],[0,4,3,1,2]];function br(){if(kn.save(),kn.fillStyle=t,1!=O||0!=Le&&!F&&0!=de[P].length?(Gr(kn,0,0,At,Bt),kn.fillRect(0,0,At,Bt)):(Gr(kn,0,0,At,Bt-Ln),kn.fillRect(0,0,At,Bt-Ln)),Pt=0,ve)Dr(ie,fe,ue,at,3,9,0);else{for(var e=Math.cos(h+s),n=Math.sin(h+s)*_t[u],f=0;f<3;f++){er[f]=0,tr[f]=0;for(var v=0;v<3;v++){var d=Math.floor(u/2);er[f]+=ie[v]*($t[d][f][v]+Jt[d][f][v]*e+Vt[d][f][v]*n),tr[f]+=fe[v]*($t[d][f][v]+Jt[d][f][v]*e+Vt[d][f][v]*n)}}zr(rr,er,tr);var g=Math.cos(h-s),b=Math.sin(h-s)*_t[u];for(f=0;f<3;f++){nr[f]=0,or[f]=0;for(v=0;v<3;v++){d=Math.floor(u/2);nr[f]+=ie[v]*($t[d][f][v]+Jt[d][f][v]*g+Vt[d][f][v]*b),or[f]+=fe[v]*($t[d][f][v]+Jt[d][f][v]*g+Vt[d][f][v]*b)}}zr(ar,nr,or),ur[0]=ie,cr[0]=fe,sr[0]=ue,ur[1]=er,cr[1]=tr,sr[1]=rr,ur[2]=nr,cr[2]=or,sr[2]=ar,vr[0]=lt,vr[1]=it,vr[2]=ft,vr[3]=ut,vr[4]=ct,Yr(Cr(Ir(lr,ie),5+T),Cr(Ir(fr,te[u]),.4)),Yr(Cr(Ir(ir,ie),5+T),Cr(Ir(fr,te[1^u]),1/6));var m,M=Xr(lr,te[u]),p=Xr(ir,te[1^u]);m=M<0&&p>0?0:M>0&&p<0?1:2;for(f=0;f<5;f++){v=gr[m][f];var k=hr[c][v],L=u%2==1?4-v:v;Dr(ur[k],cr[k],sr[k],vr[v],dr[c][v],f,L)}}if(Z||R||(ke=-1),!(De>0&&2==O)){if(!F&&de.length>0){if(de[P].length>0){if(Le>0){kn.lineWidth=Rn,kn.strokeStyle=i;var y=(At-2)*function(e,t){for(var r=0,n=0;n<t;n++)e[n]<1e3&&r++;return r}(de[P],C)/Ke(de[P]);kn.fillStyle=l,kn.fillRect(yn,Bt-Le-yn,At-Ln,Le),kn.fillStyle=a,kn.fillRect(yn,Bt-Le-yn,y,Le),kn.beginPath(),kn.rect(yn,Bt-Le-yn,At-Ln,Le),kn.stroke()}kn.font="bold "+ye+"px helvetica";var w=Je(de[P],C)+"/"+Je(de[P],-1)+Ge[z],D=kn.measureText(w).width,S=At-D-2,A=Bt-Le-Math.floor(4*Ln);N>0?(I&&Er(kn,w,Re?S-Ln:S,A-ye),function(e,t){var n=0==C?je(de[P],C):C,o=Qe(de[P],0,n),a=He(de[P],n),l=Qe(de[P],n+1,de[P].length);H&&(""==a&&(o=o.substr(0,o.length-1)),""!=l&&(l=" "+l.substr(0,l.length-1)));var i=e.measureText(o).width,f=e.measureText(a).width,u=e.measureText(l).width,c=1;c+i+f+u>At&&(c=Math.min(1,At/2-i-f/2),c=Math.max(c,At-i-f-u-2));f>0&&(e.fillStyle=r,e.lineWidth=2,e.strokeStyle="black",e.beginPath(),Tn<=14?e.fillRect(c+i-1,Bt-Le-ye-Math.floor(4*Ln),f+2,ye+Math.floor(3*Ln)):e.fillRect(c+i-1,Bt-Le-ye-Math.floor(2*Ln),f+2,ye+Math.floor(Ln)));i>0&&Er(e,o,c,t);f>0&&Er(e,a,c+i,t);u>0&&Er(e,l,c+i+f,t)}(kn,A)):I&&Er(kn,w,Re?S-Ln:S,A)}if(de.length>1){kn.font="bold "+ye+"px helvetica";w=P+1+"/"+de.length,D=kn.measureText(w).width,S=At-D-2*Q-Math.floor(5*Ln);Er(kn,w,S,mr()),jr(kn,7,At-2*Q,0),jr(kn,8,At-Q,0)}}q>=0&&(kn.font="bold "+ye+"px helvetica",Er(kn,Me[q],Re?Ln:0,mr()))}kn.restore(),pe&&0!=O&&function(e){var t=Q%2==0?1:0;if(t+=Math.floor(Ln+.5)-1,2==O)return e.fillStyle=0==ke||De>0&&6==ke?fn(o):o,e.fillRect(yn,Bt-Q,Q,Q),e.lineWidth=Rn,e.strokeStyle=i,e.beginPath(),e.rect(yn,Bt-Q-yn,Q,Q),e.stroke(),void jr(e,0,Q/2,Bt-(Q+1)/2-t);if(1==O){for(var r=0,n=0;n<7;n++){var a=Math.floor((At-r)/(7-n));e.fillStyle=ke==n?fn(o):o,e.fillRect(r,Bt,a,Q),e.lineWidth=Rn,e.strokeStyle=i,e.beginPath(),0==n?e.rect(r+yn,Bt-yn,a-Ln,Q):e.rect(r-yn,Bt-yn,a,Q),e.stroke(),e.strokeStyle="black",jr(e,n,r+a/2,Bt+Q/2-t),r+=a}pe=!1}}(kn)}function mr(){return Tn<10?Math.floor(10*Ln):Tn<12?Math.floor(12*Ln):Tn<14?Math.floor(14*Ln):ye}var Mr=[],pr=[],kr=[],Lr=[],yr=[[],[],[],[],[],[]],Rr=[[],[],[],[],[],[]],wr=[[.1,.1],[.9,.1],[.9,.9],[.1,.9]],Fr=[[0,0],[0,1],[1,1],[1,0]],Tr=[];function Dr(e,t,r,n,o,a,l){for(var i=0;i<8;i++){var c=(v=At<Bt?At:Bt-Le)/3.7*Xr(re[i],t)*D,s=v/3.7*Xr(re[i],r)*D;c/=1-(d=v/(5+T)*Xr(re[i],e)*D)/v,s/=1-d/v,kr[i]=At/2+c,Lr[i]=0==S?(Bt-Le)/2*D-s:1==S?(Bt-Le)/2-s:2==S?Bt-Le-(Bt-Le)/2*D-s:(Bt-Le)*(S*(1-D)+D/2)-s}for(i=0;i<6;i++)for(var h=0;h<4;h++)yr[i][h]=kr[ne[i][h]],Rr[i][h]=Lr[ne[i][h]];if(A)for(i=0;i<6;i++)if(Yr(Cr(Ir(lr,e),5+T),te[i]),Xr(lr,te[i])<0){Cr(Ir(Tr,te[i]),B);var v,d;c=(v=At<Bt?At:Bt-Le)/x*Xr(Tr,t),s=v/E*Xr(Tr,r);c/=1-(d=v/(5+T)*Xr(Tr,e))/v,s/=1-d/v;var g=n[i][0][1]-n[i][0][0],b=n[i][1][1]-n[i][1][0];if(g>0&&b>0)for(var p=0,k=n[i][1][0];p<b;p++,k++)for(var L=0,y=n[i][0][0];L<g;L++,y++){for(h=0;h<4;h++)Ar(i,h,Mr,pr,y+wr[h][0],k+wr[h][1],m),Mr[h]=Math.floor(Mr[h]+(m?-c:c)),pr[h]=Math.floor(pr[h]-s);1==Fe?(en(kn,Mr,pr,"#fdfdfd"),_r(kn,Mr,pr,U?fn("#fdfdfd"):"#fdfdfd"),on(kn,Mr,pr,i,$[i][5*k+y],J[V[i][5*k+y]])):(en(kn,Mr,pr,J[V[i][5*k+y]]),_r(kn,Mr,pr,U?fn(J[V[i][5*k+y]]):J[V[i][5*k+y]]))}}for(i=0;i<6;i++){g=n[i][0][1]-n[i][0][0],b=n[i][1][1]-n[i][1][0];if(g<=0||b<=0){var w=Sr(i,l);if(0!=w){for(h=0;h<4;h++){var F=oe[i][h];Mr[h]=Math.floor(yr[i][h]+(yr[1^i][F]-yr[i][h])*w),pr[h]=Math.floor(Rr[i][h]+(Rr[1^i][F]-Rr[i][h])*w),m&&(Mr[h]=At-Mr[h])}en(kn,Mr,pr,f)}}else{for(h=0;h<4;h++)Ar(i,h,Mr,pr,n[i][0][Fr[h][0]],n[i][1][Fr[h][1]],m);a<4?en(kn,Mr,pr,f):(Yr(Cr(Ir(lr,e),5+T),te[i]),Xr(lr,te[i])>0&&en(kn,Mr,pr,f))}}for(i=0;i<6;i++)if(Yr(Cr(Ir(lr,e),5+T),te[i]),Xr(lr,te[i])>0){g=n[i][0][1]-n[i][0][0],b=n[i][1][1]-n[i][1][0];if(g>0&&b>0)for(p=0,k=n[i][1][0];p<b;p++,k++)for(L=0,y=n[i][0][0];L<g;L++,y++){for(h=0;h<4;h++)Ar(i,h,Mr,pr,y+wr[h][0],k+wr[h][1],m);1==Fe?(_r(kn,Mr,pr,"#fdfdfd"),en(kn,Mr,pr,"#fdfdfd"),on(kn,Mr,pr,i,$[i][5*k+y],J[V[i][5*k+y]])):(_r(kn,Mr,pr,J[V[i][5*k+y]]),en(kn,Mr,pr,J[V[i][5*k+y]]))}if(!M||R)continue;var I=(yr[i][1]-yr[i][0]+yr[i][2]-yr[i][3])/6,P=(yr[i][3]-yr[i][0]+yr[i][2]-yr[i][1])/6,C=(Rr[i][1]-Rr[i][0]+Rr[i][2]-Rr[i][3])/6,X=(Rr[i][3]-Rr[i][0]+Rr[i][2]-Rr[i][1])/6;if(3==o)for(h=0;h<10;h++){for(F=0;F<4;F++)Ar(i,F,qt[Pt],Ot[Pt],Nt[h][F][0],Nt[h][F][1],!1);if(Qt[Pt]=(I*Ht[h][0]+C*Ht[h][1])*Gt[i][h],Zt[Pt]=(P*Ht[h][0]+X*Ht[h][1])*Gt[i][h],Kt[Pt]=ae[i][h%4],h>=8&&(Kt[Pt]&=-2),jt[Pt]=h>3?1:0,8!=Pt&&18!=Pt&&28!=Pt&&9!=Pt&&19!=Pt&&29!=Pt||(jt[Pt]=6),30==++Pt)break}else if(0==o){if(i!=u&&g>0&&b>0){for(h=5==g?0==n[i][1][0]?0:2:0==n[i][0][0]?3:1,F=0;F<4;F++)Ar(i,F,qt[Pt],Ot[Pt],Nt[h][F][0],Nt[h][F][1],!1);Qt[Pt]=(I*Ht[h][0]+C*Ht[h][1])*Gt[i][h],Zt[Pt]=(P*Ht[h][0]+X*Ht[h][1])*Gt[i][h],Kt[Pt]=u,jt[Pt]=0,Pt++}}else if(1==o){if(i!=u&&g>0&&b>0){h=5==g?1==n[i][1][0]?0:2:1==n[i][0][0]?3:1;h+=4;for(F=0;F<4;F++)Ar(i,F,qt[Pt],Ot[Pt],Nt[h][F][0],Nt[h][F][1],!1);Qt[Pt]=(I*Ht[h][0]+C*Ht[h][1])*Gt[i][h],Zt[Pt]=(P*Ht[h][0]+X*Ht[h][1])*Gt[i][h],Kt[Pt]=u,jt[Pt]=1,Pt++}}else if(6==o&&i!=u&&g>0&&b>0){for(h=5==g?8:9,F=0;F<4;F++)Ar(i,F,qt[Pt],Ot[Pt],Nt[h][F][0],Nt[h][F][1],!1);Qt[Pt]=(I*Ht[h][0]+C*Ht[h][1])*Gt[i][h],Zt[Pt]=(P*Ht[h][0]+X*Ht[h][1])*Gt[i][h],Kt[Pt]=u,jt[Pt]=6,Pt++}}}function Sr(e,t){var r=0,n=e%2,o=u%2;return 0==c?r=a(0==o?0:4):1==c?r=a(0==o?1:3):6==c?r=a(2):2==c?e==u?(0==o&&1==t||1==o&&3==t)&&(r=.4):(0==o&&2==t||1==o&&2==t)&&(r=.6):4!=c&&5!=c||((0==n&&1==t||1==n&&3==t)&&(r=.2),(1==n&&0==t||0==n&&4==t)&&(r=.8)),r;function a(e){if(0==n){if(t==e)return e/5;if(t==e+1)return(e+1)/5}else{if(t==e)return(4-e)/5;if(t==e-1)return(5-e)/5}return 0}}function Ar(e,t,r,n,o,a,l){o/=5,a/=5;var i=yr[e][0]+(yr[e][1]-yr[e][0])*o,f=Rr[e][0]+(Rr[e][1]-Rr[e][0])*o,u=yr[e][3]+(yr[e][2]-yr[e][3])*o,c=Rr[e][3]+(Rr[e][2]-Rr[e][3])*o;r[t]=Math.floor(.5+i+(u-i)*a),n[t]=Math.floor(.5+f+(c-f)*a),l&&(r[t]=At-r[t])}var Br=[1,1,-1,-1,-1,1,1,-1,-1,0,1,0,0,1,0,-1],xr=[];function Er(e,t,r,o){if(Re){e.fillStyle="black";for(var a=0;a<xr.length;a+=2)e.fillText(t,r+xr[a],o+xr[a+1]);e.fillStyle="white"}else e.fillStyle=n;e.fillText(t,r,o)}var Ur=[-1,3,1,-1,0,2,4,-1];function Ir(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Pr(e){var t=Math.sqrt(Xr(e,e));return e[0]/=t,e[1]/=t,e[2]/=t,e}function Cr(e,t){return e[0]*=t,e[1]*=t,e[2]*=t,e}function Xr(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Wr(e,t){return e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],e}function Yr(e,t){return e[0]-=t[0],e[1]-=t[1],e[2]-=t[2],e}function zr(e,t,r){return e[0]=t[1]*r[2]-t[2]*r[1],e[1]=t[2]*r[0]-t[0]*r[2],e[2]=t[0]*r[1]-t[1]*r[0],e}function qr(e,t){var r=Math.sin(t),n=Math.cos(t),o=e[1]*n-e[2]*r,a=e[1]*r+e[2]*n;return e[1]=o,e[2]=a,e}function Or(e,t){var r=Math.sin(t),n=Math.cos(t),o=e[0]*n-e[2]*r,a=e[0]*r+e[2]*n;return e[0]=o,e[2]=a,e}function Qr(e,t){var r=Math.sin(t),n=Math.cos(t),o=e[0]*n-e[1]*r,a=e[0]*r+e[1]*n;return e[0]=o,e[1]=a,e}function Zr(e,t,r){return"#"+Nr(e.toString(16))+Nr(t.toString(16))+Nr(r.toString(16))}function Nr(e){return("00"+e).substring(e.length)}function Hr(e){for(var t=0,r=0;r<6;r++)for(var n=0;n<16;n++)if(e[r].toLowerCase()=="0123456789abcdef".charAt(n)){t++;break}return 6==t}function Gr(e,t,r,n,o){e.beginPath(),e.moveTo(t,r),e.lineTo(t+n,r),e.lineTo(t+n,r+o),e.lineTo(t,r+o),e.lineTo(t,r),e.closePath(),e.clip()}var Kr=[];function jr(e,t,r,n){switch(r=Math.floor(r),n=Math.floor(n),t){case 0:Vr(e,r-Kr[4],n-Kr[3],Kr[3],Kr[6]+1),Jr(e,r+Kr[4],n,-1);break;case 1:Vr(e,r+Kr[1],n-Kr[3],Kr[3],Kr[6]+1),Jr(e,r-Kr[1],n,-1);break;case 2:Jr(e,r+Kr[1],n,-1);break;case 3:R?Vr(e,r-Kr[4],n-Kr[3],Kr[7],Kr[7]):(Vr(e,r-Kr[4],n-Kr[2],Kr[7],Kr[5]),Vr(e,r-Kr[2],n-Kr[4],Kr[3],Kr[9]));break;case 4:Jr(e,r-Kr[2],n,1);break;case 5:Vr(e,r-Kr[4],n-Kr[3],Kr[3],Kr[6]+1),Jr(e,r,n,1);break;case 6:Vr(e,r+Kr[1],n-Kr[3],Kr[3],Kr[6]+1),Jr(e,r-Kr[4],n,1);break;case 7:var a=7==ke?fn(o):o;$r(e,r-2*Ln,n+Ln,Q,n+Q,a),Jr(e,r+2*Ln+Q/2-3*Ln,n+Q/2+yn,-1);break;case 8:a=8==ke?fn(o):o;$r(e,r-2*Ln,n+Ln,Q,n+Q,a),Jr(e,r-Ln+Q/2-3*Ln,n+Q/2+yn,1)}}function Jr(e,t,r,n){var o=3*Ln,a=[],l=[];a[0]=t,a[1]=t+n,a[2]=t+4*Ln*n,a[3]=t+n,a[4]=t,l[0]=r-o,l[1]=r-o,l[2]=r,l[3]=r+o,l[4]=r+o,function(e,t,r){e.beginPath(),e.moveTo(t[0]+yn,r[0]+yn);for(var n=1;n<5;n++)e.lineTo(t[n]+yn,r[n]+yn);e.closePath(),e.fillStyle="white",e.strokeStyle="black",e.fill(),e.lineWidth=Rn,e.stroke()}(e,a,l)}function Vr(e,t,r,n,o){e.lineWidth=Rn,e.beginPath(),e.rect(t+yn,r+yn,n-1,o-1),e.fillStyle="white",e.fill(),e.strokeStyle="black",e.stroke()}function $r(e,t,r,n,o,a){e.lineWidth=Rn,e.beginPath(),e.rect(t+yn,r+yn,n-1,o-1),e.fillStyle=a,e.fill(),e.strokeStyle="black",e.stroke()}function _r(e,t,r,n){e.beginPath(),e.moveTo(t[0],r[0]),e.lineTo(t[1],r[1]),e.lineTo(t[2],r[2]),e.lineTo(t[3],r[3]),e.closePath(),e.strokeStyle=n,e.lineWidth=.7*Ln,e.stroke()}function en(e,t,r,n){e.beginPath(),e.moveTo(t[0],r[0]),e.lineTo(t[1],r[1]),e.lineTo(t[2],r[2]),e.lineTo(t[3],r[3]),e.closePath(),e.fillStyle=n,e.fill()}var tn,rn,nn=[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]];function on(e,t,r,n,o,a){var l=[],i=[];if(2!=Ae||"#ffffff"!=a){for(var f=0;f<4;f++)l[f]=Math.floor(t[f]+.05*(t[nn[2][f]]-t[f])),i[f]=Math.floor(r[f]+.05*(r[nn[2][f]]-r[f]));0==n&&(o=(o+1)%4),4==n&&(o=(o+3)%4);var u=nn[o][0],c=nn[o][1],s=nn[o][2],h=nn[o][3],v=.26*(l[s]-l[c]),d=.26*(i[s]-i[c]),g=(l[u]-l[c])/2,b=i[c]+(i[u]-i[c])/2,m=i[s]+(i[h]-i[s])/2,M=(l[h]-l[s])/2,p=1^o;e.fillStyle=a,e.beginPath(),e.moveTo(l[u]+(l[h]-l[u])/2,i[u]+(i[h]-i[u])/2),e.lineTo(l[p]+g,b),e.lineTo(l[p]+v+g,b+d),e.lineTo(l[p]+v,i[p]+d),p=(p+1)%4,e.lineTo(l[p]-v,i[p]-d),e.lineTo(l[p]-v+M,m-d),e.lineTo(l[p]+M,m),e.closePath(),e.fill(),e.lineWidth=.6*Ln,e.strokeStyle="black",e.stroke()}}function an(e){return"white"==e?"#FFFFFF":"black"==e?"#000000":"#808080"}function ln(e){return"#"!=e.substring(0,1)&&(e=an(e)),(299*parseInt(e.substring(1,3),16)+587*parseInt(e.substring(3,5),16)+114*parseInt(e.substring(5,7),16))/1e3}function fn(e){"#"!=e.substring(0,1)&&(e=an(e));var t=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16);return Zr(t=Math.floor(.7*t),r=Math.floor(.7*r),n=Math.floor(.7*n))}function un(e,t){if(e>tt)setTimeout(un,0,e,t);else{if(!F&&(0==de.length||0==de[P].length))return R=!1,pe=!0,void br();if(!Y){for(var r=de[P];C<r.length;){if(r[C]>=1e3)q=r[C]-1e3;else if(-1!=r[C]){var n=r[C]%4+1,o=Math.floor(r[C]/4)%7,a=Math.floor(r[C]/28);pt(V,a,4==n?2:n,o)}C++}return R=!1,pe=!0,br(),void tt++}var l,i,f,g,m,M,k=t;!1,requestAnimationFrame((function e(){if(T){if(T=!1,M=!1,p)k>0?C>=r.length&&(C=0,$e(r)):(q=-1,0==C&&(C=r.length));else if(k>0&&C>=r.length||k<0&&0==C)return b=!1,R=!1,tt++,pe=!0,void br();R=!0,pe=!0}if(D&&(D=!1,k<0&&(B=!1,0==C?(B=!0,A=!0):C--),!B)){if(w=!1,-1==r[C]){if(br(),!W)for(l=Date.now();Date.now()-l<1e3;);}else r[C]>=1e3?q=k>0?r[C]-1e3:-1:w=!0;if(w){n=r[C]%4+1,o=Math.floor(r[C]/4)%7;var t=n<3;if(4==n&&(n=2),k<0&&(t=!t,n=4-n),a=Math.floor(r[C]/28),L=!1,ve=!0,y=!0,h=0,le[a]>0&&(t=!t),Y){m=Math.PI/2,g=t?1:-1;var x=67*v;2==n&&(m=Math.PI,x=67*d),L=!0,u=a,c=o,Mt(a),l=Date.now(),i=l,f=g*m/x,s=0}}else S=!0}B||(w&&(Y&&s*g<m?(br(),b&&(S=!0),i=Date.now(),s=f*(i-l)):S=!0),S&&(S=!1,D=!0,w&&(s=0,L=!1,ve=!0,pt(V,a,n,o),y=!1,Y&&br(),W&&(M=!0)),k>0?(++C<r.length&&r[C]>=1e3&&(q=r[C]-1e3,C++),C==r.length&&(F?function(e){C=0;for(var t=0;t<6;t++)for(var r=0;r<25;r++)V[t][r]=_[t][r],$[t][r]=ee[t][r];be.length>0&&void 0!==be[P]&&_e(V,be[P],0,be[P].length,!1);me.length>0&&void 0!==me[P]&&_e(V,me[P],0,me[P].length,!0);$e(e)}(r):A=!0)):q=-1,(b||M)&&(A=!0)));if(A)return A=!1,T=!0,et<=tt+1&&(R=!1),pe=!0,0==ke&&ot(),br(),F&&(ot(),F=!1),b=!1,tt++,void(1==C&&r[0]>=1e3&&C--);requestAnimationFrame(e)}));var w=!1,T=!0,D=!0,S=!1,A=!1,B=!1;r=F?ge[0]:de[P]}}document.addEventListener("touchstart",bn),document.addEventListener("touchmove",An,{passive:!1}),document.addEventListener("touchend",gn),document.addEventListener("mousedown",bn),document.addEventListener("mousemove",An),document.addEventListener("mouseup",gn),document.addEventListener("contextmenu",En);var cn=!1,sn=!0,hn=document.getElementsByTagName("div"),vn=hn.length>0&&"wrap"==hn[0].className;function dn(e){vn?hn[0].style.overflow=e:document.body.style.overflow=e}function gn(e){if(cn&&void 0!==e.touches&&(e.preventDefault(),dn("auto")),cn?setTimeout((function(){sn=!0}),100):sn=!0,cn=!1,w=!1,Z)Z=!1,pe=!0,br();else if(L&&!y){L=!1,h+=s,s=0;for(var t=h;t<0;)t+=32*Math.PI;var r=Math.floor(8*t/Math.PI)%16;(we||r%4==0||r%4==3)&&(r=Math.floor((r+2)/4),le[u]>0&&(r=(4-r)%4),h=0,ve=!0,pt(V,u,r,c)),br()}}function bn(e){var t=pn.getBoundingClientRect(),r=Math.floor(t.left),n=Math.floor(t.top);if(void 0===e.touches)var o=e.clientX,a=e.clientY;else o=e.touches[0].clientX,a=e.touches[0].clientY;o<r||o>r+At/Ln||a<n||a>n+(Bt+Q)/Ln||(e.preventDefault(),cn=!0,sn=!1,void 0!==e.touches&&dn("hidden"),tn=r,rn=n,Ut=xt=Bn(e),It=Et=xn(e),g=!1,ke=function(e,t){if(0==O)return-1;if(de.length>1&&e>=At-2*Q&&e<At-Q&&t>=0&&t<Q)return 7;if(de.length>1&&e>=At-Q&&e<At&&t>=0&&t<Q)return 8;if(2==O)return e>=0&&e<Q&&t>=Bt-Q&&t<Bt?0:-1;if(t<Bt)return-1;for(var r=0,n=0;n<7;n++){var o=(At-r)/(7-n);if(e>=r&&e<r+o&&t>=Bt&&t<Bt+Q)return n;r+=o}return-1}(xt,Et),ke>=0?(Z=!0,3==ke?R?nt():m=!m:0==ke?De>0&&2==O?1==Te?(Te=!1,nt(),ot()):(Te=!0,rt(Ur[ke=6])):(nt(),ot()):7==ke||8==ke?(nt(),setTimeout(ot,20),P=7==ke?P>0?P-1:de.length-1:P<de.length-1?P+1:0):rt(Ur[ke]),pe=!0,br()):Le>0&&de.length>0&&de[P].length>0&&Et>Bt-Le&&Et<=Bt?k&&(nt(),mn(et++)):(m&&(Ut=xt=At-xt),void 0===e.touches?!M||R||0!=e.button||e.shiftKey||(g=!0):M&&!R&&(g=!0)))}function mn(e){if(e>tt)setTimeout(mn,0,e);else{var t=Ke(de[P]),r=Math.floor(((xt-1)*t*2/(At-2)+1)/2);(r=Math.max(0,Math.min(t,r)))>0&&(r=je(de[P],r)),r>C&&_e(V,de[P],C,r-C,!1),r<C&&_e(V,de[P],r,C-r,!0),C=r,w=!0,br(),R=!1,tt++}}var Mn,pn,kn,Ln,yn,Rn,wn,Fn,Tn,Dn,Sn=[];function An(e){if(cn&&!Z){if(void 0!==e.touches&&e.preventDefault(),w){nt();var t=Ke(de[P]),r=Math.floor(((Bn(e)-1)*t*2/(At-2)+1)/2);return(r=Math.max(0,Math.min(t,r)))>0&&(r=je(de[P],r)),r>C&&_e(V,de[P],C,r-C,!1),r<C&&_e(V,de[P],r,C-r,!0),C=r,void br()}var n=m?At-Bn(e):Bn(e),o=xn(e),a=n-xt,l=o-Et;if(M&&g&&!L&&!R){Ut=n,It=o;for(var i=0;i<Pt;i++){var f=qt[i][0],h=qt[i][1]-f,v=qt[i][3]-f,d=Ot[i][0],b=Ot[i][1]-d,p=Ot[i][3]-d,k=(p*(xt-f)-v*(Et-d))/(h*p-v*b),y=(-b*(xt-f)+h*(Et-d))/(h*p-v*b);if(k>0&&k<1&&y>0&&y<1){if(a*a+l*l<144)return;if(Yt=Qt[i],zt=Zt[i],Math.abs(Yt*a+zt*l)/Math.sqrt((Yt*Yt+zt*zt)*(a*a+l*l))>.75){L=!0,u=Kt[i],c=jt[i];break}}}g=!1,xt=Ut,Et=It}a=(n-xt)/Ln,l=(o-Et)/Ln,!L||R?(Pr(Wr(ie,Cr(Ir(Sn,fe),-.016*a))),Pr(zr(fe,ue,ie)),Pr(Wr(ie,Cr(Ir(Sn,ue),.016*l))),Pr(zr(ue,ie,fe)),xt=n,Et=o):(ve&&Mt(u),s=.03*(Yt*a+zt*l)/Math.sqrt(Yt*Yt+zt*zt)),br()}}function Bn(e){return void 0===e.touches?(e.clientX-tn)*Ln:(e.touches[0].clientX-tn)*Ln}function xn(e){return void 0===e.touches?(e.clientY-rn)*Ln:(e.touches[0].clientY-rn)*Ln}function En(e){sn||e.preventDefault()}function Un(){clearTimeout(Mn),Mn=setTimeout((function(){In(),pe=!0,br()}),20)}function In(){Bt=Dn.clientHeight-1,At=Dn.clientWidth-1,pn.style.width=At+"px",pn.style.height=Bt+"px",Ln=devicePixelRatio,yn=Ln/2,Bt=Math.floor(Bt*Ln),At=Math.floor(At*Ln),pn.width=At,pn.height=Bt,Rn=Ln,Q=Math.floor(wn*Ln),Le=Math.floor(Fn*Ln),ye=Math.floor(Tn*Ln);for(var e=1;e<10;e++)Kr[e]=e*Ln;for(e=0;e<Br.length;e++)xr[e]=Br[e]*Ln;1==O&&(Bt-=Q)}function Pn(e,t){var r,n,o=["R","L","F","B","U","D"],a=["","m","n"],l=["","2","'"],i=-1,f=-1,u=-1,c="";0==t&&(t=10*e);for(var s=0;s<t;s++){for(;i==f||Math.floor(i/2)==Math.floor(f/2)&&i==u;)i=Math.floor(6*Math.random());u=f,f=i,r=Math.floor(3*Math.random()),e<=3?c+=""+o[i]+l[r]+" ":(n=Math.floor(Math.random()*(e>4?3:2)),5==e&&1==n&&(n=0),c+=""+o[i]+a[n]+l[r]+" ")}return c}window.addEventListener("resize",Un);var Cn=[];function Xn(){nt(),document.removeEventListener("touchstart",bn),document.removeEventListener("touchmove",An),document.removeEventListener("touchend",gn),document.removeEventListener("mousedown",bn),document.removeEventListener("mousemove",An),document.removeEventListener("mouseup",gn),document.removeEventListener("contextmenu",En),window.removeEventListener("resize",Un)}!function(){pn=document.createElement("canvas"),void 0!==e&&function(){for(var t=e.split("&"),r=0;r<t.length;r++){var n=t[r].split("=");void 0!==n[1]&&(Cn[n[0]]=decodeURIComponent(n[1].trim()))}}();var t=Pe("id");if(null!=t)(Dn=document.getElementById(t)).innerHTML="";else if(null!=document.currentScript)Dn=document.currentScript.parentNode;else{var r=document.getElementsByTagName("script"),n=r[r.length-1];Dn=n.parentNode}null!=Dn.id&&"undefined"!=typeof removeListeners&&(removeListeners[Dn.id]=Xn);for(var o=0;o<6;o++)V[o]=[],$[o]=[],_[o]=[],ee[o]=[];for(o=0;o<30;o++)qt[o]=[],Ot[o]=[];P=0,h=0,Ue()}()}
"use strict";function AnimCube6(e){var t,r,n,o,a,f,i,l,u,c,s,h,v,d,g,m,b,M,p,k,L,w,y,T,R,A,F,S,D,B,x,E,I,U,P,C,W,X,Y,q,O,Q,z,N,Z,H,G=[],K=[],j=[],J=[],V=[],$=[],_=[[0,-1,0],[0,1,0],[0,0,-1],[0,0,1],[-1,0,0],[1,0,0]],ee=[[-1,-1,-1],[1,-1,-1],[1,-1,1],[-1,-1,1],[-1,1,-1],[1,1,-1],[1,1,1],[-1,1,1]],te=[[0,1,2,3],[4,7,6,5],[0,4,5,1],[2,6,7,3],[0,3,7,4],[1,5,6,2]],re=[[0,3,2,1],[0,3,2,1],[3,2,1,0],[3,2,1,0],[0,3,2,1],[0,3,2,1]],ne=[[2,5,3,4],[4,3,5,2],[4,1,5,0],[5,1,4,0],[0,3,1,2],[2,1,3,0]],oe=[1,1,-1,-1,-1,-1],ae=[0,0,-1],fe=[1,0,0],ie=[],le=[],ue=[],ce=[],se=!0,he=[],ve=[],de=[],ge=!0,me=-1,be=6,Me=12,pe=!0,ke=!1,Le=!1,we=!1,ye=0,Te=0,Re=0,Ae=0,Fe=[3,2,0,5,1,4],Se=[[30,24,18,12,6,0,31,25,19,13,7,1,32,26,20,14,8,2,33,27,21,15,9,3,34,28,22,16,10,4,35,29,23,17,11,5],[5,11,17,23,29,35,4,10,16,22,28,34,3,9,15,21,27,33,2,8,14,20,26,32,1,7,13,19,25,31,0,6,12,18,24,30],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35],[30,24,18,12,6,0,31,25,19,13,7,1,32,26,20,14,8,2,33,27,21,15,9,3,34,28,22,16,10,4,35,29,23,17,11,5],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35]];function De(){var e=xe("config");null!=e?function(e){var t=new XMLHttpRequest;function r(){4==t.readyState&&(200==t.status?function(e){for(var t=e.split("\n"),r=0;r<t.length;r++){var n=t[r].split("=");void 0!==n[1]&&(G[n[0]]=n[1].trim())}}(t.responseText):console.log("Error loading config file: "+e),Be())}t.onreadystatechange=r,t.open("GET",e,!0),t.send()}(e):Be()}function Be(){K[0]=Or(255,128,64),K[1]=Or(255,0,0),K[2]=Or(0,255,0),K[3]=Or(0,0,255),K[4]=Or(153,153,153),K[5]=Or(170,170,68),K[6]=Or(187,119,68),K[7]=Or(153,68,68),K[8]=Or(68,119,68),K[9]=Or(0,68,119),K[10]=Or(255,255,255),K[11]=Or(255,255,0),K[12]=Or(255,96,32),K[13]=Or(208,0,0),K[14]=Or(0,144,0),K[15]=Or(32,64,208),K[16]=Or(176,176,176),K[17]=Or(80,80,80),K[18]=Or(255,0,255),K[19]=Or(0,255,255),K[20]=Or(255,160,192),K[21]=Or(32,255,16),K[22]=Or(0,0,0),K[23]=Or(128,128,128);var e=xe("bgcolor");if(t=null!=e&&6==e.length&&zr(e)?"#"+e:"gray",e=xe("butbgcolor"),o=null!=e&&6==e.length&&zr(e)?"#"+e:t,null!=(e=xe("colors")))for(var u=0;u<10&&u<e.length/6;u++)zr(e.substring(6*u,6*u+6))&&(K[u]="#"+e.substring(6*u,6*u+6));for(u=0;u<6;u++)for(var c=0;c<36;c++)j[u][c]=u+10;if(null!=(e=xe("supercube"))&&"1"==e){Le=!0,Ee(.06);for(u=0;u<36;u++)j[0][u]=22;null!=(e=xe("scw"))&&("1"==e?Re=1:"2"==e&&(Re=2)),1==Re&&(K[10]="#000000")}if(null!=(e=xe("gabbacolors"))&&"1"==e&&(1==Le?(K[11]="#fdcf00",K[12]="#fd4e0a",K[13]="#93000d",K[14]="#00702d",K[15]="#00347a"):(Ee(.06),K[11]="#ffd90a",K[12]="#ff4f0b",K[13]="#9e0b19",K[14]="#0b7d39",K[15]="#0b4186")),null!=(e=xe("borderwidth"))){for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(Ae=10*Ae+parseInt(e[u]));Ae>=0&&Ae<=20&&Ee(Ae/100)}if(Le)for(u=0;u<6;u++)for(c=0;c<36;c++)J[u][c]=0;var s="lluu";if(null!=(e=xe("colorscheme"))&&6==e.length)for(u=0;u<6;u++){var h=23;for(c=0;c<23;c++)if(e[u].toLowerCase()=="0123456789wyorgbldmcpnk".charAt(c)){h=c;break}for(c=0;c<36;c++)j[u][c]=h}if("1"==(e=xe("scramble"))?ye=1:"2"==e&&(ye=2),2==ye)for(u=0;u<6;u++)for(c=0;c<36;c++)V[u][c]=j[u][c],$[u][c]=J[u][c];if(0==ye){if(null!=(e=xe("pos"))&&216==e.length){s="uuuuff","gray"==t&&(t="white");for(u=0;u<6;u++){var g=Fe[u];for(c=0;c<36;c++){var m=Se[u][c];j[g][m]=23;for(var b=0;b<14;b++)if(e.charAt(36*u+c)=="DFECABdfecabgh".charAt(b)){j[g][m]=b+4;break}}}}if(null!=(e=xe("facelets"))&&216==e.length)for(u=0;u<6;u++)for(c=0;c<36;c++){j[u][c]=23;for(b=0;b<23;b++)if(e[36*u+c].toLowerCase()=="0123456789wyorgbldmcpnk".charAt(b)){j[u][c]=b;break}}if(null!=(e=xe("superfacelets"))&&216==e.length)for(u=0;u<6;u++)for(c=0;c<36;c++)for(b=0;b<4;b++)if(e[36*u+c].toLowerCase()=="0123".charAt(b)){J[u][c]=b;break}}if(null!=(e=xe("randmoves"))){var L=0;for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(L=10*L+parseInt(e[u]));L>0&&(Te=L)}if(("random"==(e=xe("move"))||ye>0)&&(e=xn(6,Te)),he=null==e?[]:Pe(e,!0),C=0,O=-1,0==ye&&null!=(e=xe("initmove"))){"random"==e&&(e=xn(6,Te));var w="#"==e?he:Pe(e,!1);w.length>0&&Ke(j,w[0],0,w[0].length,!1)}if(e=xe("initrevmove"),1==ye?e=null:2==ye&&(e="#"),null!=e){"random"==e&&(e=xn(6,Te));var y="#"==e?he:Pe(e,!1);y.length>0&&Ke(j,y[0],0,y[0].length,!0)}0==ye&&null!=(e=xe("demo"))&&("random"==e&&(e=xn(6,Te)),(ve="#"==e?he:Pe(e,!0)).length>0&&ve[0].length>0&&(R=!0)),e=xe("position"),Er(Wr(ie,ae,fe)),null==e&&(e=s);var T=Math.PI/12;for(u=0;u<e.length;u++){var P=T;switch(e[u].toLowerCase()){case"d":P=-P;case"u":Yr(ae,P),Yr(fe,P);break;case"f":P=-P;case"b":qr(ae,P),qr(fe,P);break;case"l":P=-P;case"r":Xr(ae,P),Xr(fe,P)}}if(Er(Wr(ie,ae,fe)),v=0,d=0,null!=(e=xe("speed")))for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(v=10*v+parseInt(e[u]));if(null!=(e=xe("doublespeed")))for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(d=10*d+parseInt(e[u]));if(0==v&&(v=10),0==d&&(d=3*v/2),A=0,null==(e=xe("perspective")))A=2;else for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(A=10*A+parseInt(e[u]));var W,X=0;if(null!=(e=xe("scale")))for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(X=10*X+parseInt(e[u]));if(F=1/(1+X/10),D=!1,null!=(e=xe("hint"))){D=!0,B=0;for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(B=10*B+parseInt(e[u]));B<1?D=!1:B/=10}(x=3.7,null!=(e=xe("hinthoriz")))&&((W=parseFloat(e))>0&&(x=W));(E=3.7,null!=(e=xe("hintvert")))&&((W=parseFloat(e))>0&&(E=W));(I=0,null!=(e=xe("hintborder"))&&"1"==e&&(I=1),z=13,null!=(e=xe("buttonheight")))&&((W=parseInt(e))>=9&W<=25&&(z=W));(be=0==he.length?0:6,Q=1,"0"==(e=xe("buttonbar"))?(Q=0,z=0,be=0):"1"==e?Q=1:"2"!=e&&0!=he.length||(Q=2,be=0),e=xe("edit"),M="0"!=e,e=xe("repeat"),p="0"!=e,e=xe("clickprogress"),k="0"!=e,e=xe("movetext"),Z="1"==e?1:0,H=1,"0"==(e=xe("movetextspace"))&&(H=0),null!=(e=xe("textsize")))&&((W=parseInt(e))>=5&W<=40&&(Me=W));(e=xe("fonttype"),pe=null==e||"1"==e,q=0,null!=(e=xe("metric"))&&("1"==e?q=1:"2"==e?q=2:"3"==e&&(q=3)),S=1,null!=(e=xe("align")))&&((W=parseInt(e))>=0&W<=3&&(S=W),W>=3&W<=99&&(S=W/100));if(null!=(e=xe("snap"))&&"1"==e&&(ke=!0),2!=ye)for(u=0;u<6;u++)for(c=0;c<36;c++)V[u][c]=j[u][c],$[u][c]=J[u][c];for(u=0;u<3;u++)le[u]=ae[u],ue[u]=fe[u],ce[u]=ie[u];rn(t)<128?(n="white",r=function(e){"#"!=e.substring(0,1)&&(e=tn(e));var t=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16);return t=Math.floor(1.3*t),r=Math.floor(1.3*r),n=Math.floor(1.3*n),Or(t>255?255:t,r>255?255:r,n>255?255:n)}(t)):(n="black",r=nn(t)),i=rn(o)<128?"white":"black",a=n,null!=(e=xe("slidercolor"))&&6==e.length&&zr(e)&&(a="#"+e),f=nn(t),null!=(e=xe("sliderbgcolor"))&&6==e.length&&zr(e)&&(f="#"+e),null!=(e=xe("troughcolor"))&&6==e.length&&zr(e)&&(f="#"+e),l="black",null!=(e=xe("cubecolor"))&&6==e.length&&zr(e)&&(l="#"+e),U=1,"0"==(e=xe("counter"))&&(U=0),O=he.length>0&&he[0][0]>=1e3?0:-1,mn=gn.getContext("2d"),kn=z,Ln=be,wn=Me,Bn(),yn.appendChild(gn),dr(),R&&Ve(-1)}function xe(e){var t=En[e];return void 0===t?G[e]:t}function Ee(e){wr[0][0]=wr[0][1]=wr[1][1]=wr[3][0]=e,wr[1][0]=wr[2][0]=wr[2][1]=wr[3][1]=1-e}var Ie=[0,0,0,0,0,0,1,1,1,3,3,3,3,3,3,2,2,2,2,2,2],Ue=[0,1,2,3,4,5,1,2,4,5,2,0,5,2,0,0,1,2,3,4,5];function Pe(e,t){if(t){for(var r=e.indexOf("{");-1!=r;)r=e.indexOf("{",r+1);if(null==de)O=0,de=[];else{for(var n=[],o=0;o<de.length;o++)n[o]=de[o];O=de.length,de=n}}var a=1;for(r=e.indexOf(";");-1!=r;)a++,r=e.indexOf(";",r+1);var f=[],i=0;for(r=e.indexOf(";"),a=0;-1!=r;)f[a++]=We(e.substring(i,r),t),i=r+1,r=e.indexOf(";",i);return f[a]=We(e.substring(i),t),f}var Ce=["n","t","c","s","a","m"];function We(e,t){for(var r=0,n=[],o=0;o<e.length;o++)if("."==e.charAt(o))n[r]=-1,r++;else if("{"==e.charAt(o)){o++;for(var a="";o<e.length&&"}"!=e.charAt(o);)t&&(a+=e.charAt(o)),o++;t&&(de[O]=a,n[r]=1e3+O,O++,r++)}else for(var f=0;f<21;f++)if(e.charAt(o)=="UDFBLRESMXYZxyzudfblr".charAt(f)){o++;var i=Ie[f];if(n[r]=28*Ue[f],o<e.length&&0==Ie[f])for(var l=0;l<Ce.length;l++)if(e.charAt(o)==Ce[l]){i=l+1,o++;break}n[r]+=4*i,o<e.length&&("1"==e.charAt(o)?o++:"'"==e.charAt(o)||"3"==e.charAt(o)?(n[r]+=2,o++):"2"==e.charAt(o)&&(++o<e.length&&"'"==e.charAt(o)?(n[r]+=3,o++):n[r]+=1)),r++,o--;break}var u=[];for(o=0;o<r;o++)u[o]=n[o];return u}function Xe(e,t,r){if(t>=e.length)return"";for(var n="",o=t;o<r;o++){var a=Oe(e,o);""!=a&&(n+=a+(H?" ":""))}return n}var Ye=[[["U","D","F","B","L","R"],["Un","Dn","Fn","Bn","Ln","Rn"],["Ut","Dt","Ft","Bt","Lt","Rt"],["Uc","Dc","Fc","Bc","Lc","Rc"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"],["Um","Dm","Fm","Bm","Lm","Rm"]],[["U","D","F","B","L","R"],["Un","Dn","Fn","Bn","Ln","Rn"],["u","d","f","b","l","r"],["Z","~Z","Y","~Y","~X","X"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"],["~E","E","S","~S","M","~M"]],[["U","D","F","B","L","R"],["Un","Dn","Fn","Bn","Ln","Rn"],["u","d","f","b","l","r"],["Y","~Y","Z","~Z","~X","X"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"],["~E","E","S","~S","M","~M"]],[["U","D","F","B","L","R"],["Un","Dn","Fn","Bn","Ln","Rn"],["Uu","Dd","Ff","Bb","Ll","Rr"],["QU","QD","QF","QB","QL","QR"],["UD'","DU'","FB'","BF'","LR'","RL'"],["UD","DU","FB","BF","LR","RL"],["u","d","f","b","l","r"]]],qe=["","2","'","2'"];function Oe(e,t){if(t>=e.length)return"";if(e[t]>=1e3)return"";if(-1==e[t])return".";var r=Ye[Z-1][Math.floor(e[t]/4)%7][Math.floor(e[t]/28)];return"~"==r.charAt(0)?r.substring(1)+qe[(e[t]+2)%4]:r+qe[e[t]%4]}var Qe=["","q","h","s"];function ze(e){for(var t=0,r=0;r<e.length;r++)e[r]<1e3&&t++;return t}function Ne(e,t){for(var r=0,n=0;;){for(;r<e.length&&e[r]>=1e3;)r++;if(n==t)break;r<e.length&&(n++,r++)}return r}function Ze(e,t){for(var r=0,n=0;n<e.length&&(n<t||t<0);n++)r+=He(e[n]);return r}function He(e){if(e<0||e>=1e3)return 0;var t=e%4,r=Math.floor(e/4)%7,n=1;switch(q){case 1:1!=t&&3!=t||(n*=2);case 2:(1==r||r>3)&&(n*=2);case 3:3==r&&(n=0),3!=q||4!=r&&5!=r||(n*=2)}return n}function Ge(e){O=e.length>0&&e[0]>=1e3?e[0]-1e3:-1}function Ke(e,t,r,n,o){for(var a=o?r+n:r;;){if(o){if(a<=r)break;a--}if(t[a]>=1e3)O=o?-1:t[a]-1e3;else if(t[a]>=0){var f=t[a]%4+1,i=Math.floor(t[a]/4)%7;4==f&&(f=2),o&&(f=4-f),mt(e,Math.floor(t[a]/28),f,i)}if(!o&&++a>=r+n)break}}var je=0,Je=0;function Ve(e){if($e(),(R||0!=he.length&&0!=he[P].length)&&(!R||0!=ve.length&&0!=ve[0].length)){switch(W=1,X=!1,Y=!0,e){case 0:break;case 1:W=-1;break;case 2:X=!0;break;case 3:W=-1,X=!0;break;case 4:Y=!1}on(je++,W)}}function $e(){1==y&&(m=!0)}function _e(){C=0,he.length>0&&Ge(he[P]),se=!0,b=!1;for(var e=0;e<6;e++)for(var t=0;t<36;t++)j[e][t]=V[e][t],J[e][t]=$[e][t];ye>0&&(he=Pe(xn(6,Te),!1)),2==ye&&Ke(j,he[0],0,he[0].length,!0);for(e=0;e<3;e++)ae[e]=le[e],fe[e]=ue[e],ie[e]=ce[e]}var et=[[[0,6],[0,6]],[[0,6],[0,6]],[[0,6],[0,6]],[[0,6],[0,6]],[[0,6],[0,6]],[[0,6],[0,6]]],tt=[],rt=[],nt=[],ot=[],at=[],ft=[],it=[[[0,0],[0,0]],[[0,6],[0,6]],[[0,6],[0,1]],[[0,1],[0,6]],[[0,6],[5,6]],[[5,6],[0,6]]],lt=[[1,0,3,3,2,3],[0,1,5,5,4,5],[2,3,1,0,3,2],[4,5,0,1,5,4],[3,2,2,4,1,0],[5,4,4,2,0,1]],ut=[[0,1,5,5,4,5],[1,0,3,3,2,3],[4,5,0,1,5,4],[2,3,1,0,3,2],[5,4,4,2,0,1],[3,2,2,4,1,0]],ct=[[[0,0],[0,0]],[[4,5],[0,6]],[[0,6],[4,5]],[[0,6],[3,4]],[[0,6],[1,2]],[[3,4],[0,6]],[[1,2],[0,6]],[[2,3],[0,6]],[[0,6],[2,3]]],st=[[0,0,6,6,4,6],[0,0,1,1,2,1],[4,6,0,0,6,4],[2,1,0,0,1,2],[6,4,4,2,0,0],[1,2,2,4,0,0]],ht=[[0,0,7,7,8,7],[0,0,5,5,3,5],[8,7,0,0,7,8],[3,5,0,0,5,3],[7,8,8,3,0,0],[5,3,3,8,0,0]],vt=[[0,0,5,5,3,5],[0,0,7,7,8,7],[3,5,0,0,5,3],[8,7,0,0,7,8],[5,3,3,8,0,0],[7,8,8,3,0,0]],dt=[[0,0,1,1,2,1],[0,0,6,6,4,6],[2,1,0,0,1,2],[4,6,0,0,6,4],[1,2,2,4,0,0],[6,4,4,2,0,0]];function gt(e){for(var t=0;t<6;t++)tt[t]=it[lt[e][t]],ft[t]=it[ut[e][t]],rt[t]=ct[st[e][t]],nt[t]=ct[ht[e][t]],ot[t]=ct[vt[e][t]],at[t]=ct[dt[e][t]];se=!1}function mt(e,t,r,n){switch(n){case 2:Rt(e,t,4-r,0),Rt(e,t,4-r,1);break;case 3:Rt(e,t,4-r,0),Rt(e,t,4-r,1),Rt(e,t,4-r,6),Rt(e,1^t,r,6),Rt(e,1^t,r,1),Rt(e,1^t,r,0);break;case 4:Rt(e,t,4-r,0),Rt(e,1^t,r,0);break;case 5:Rt(e,1^t,4-r,0),Rt(e,t,4-r,0);break;default:Rt(e,t,4-r,n)}}var bt=[0,1,2,3,4,5,11,17,23,29,35,34,33,32,31,30,24,18,12,6],Mt=[7,8,9,10,16,22,28,27,26,25,19,13],pt=[14,15,21,20],kt=[1,6,-1,-6,1,6,-1,-6],Lt=[0,5,35,30,6,4,29,31,12,3,23,32],wt=[[3,3,3,0],[2,1,1,1],[3,3,0,0],[2,1,1,2],[3,2,0,0],[2,2,0,1]],yt=[[7,7,7,4],[6,5,5,5],[7,7,4,4],[6,5,5,6],[7,6,4,4],[6,6,4,5]],Tt=[];function Rt(e,t,r,n){At(e,t,r,n),1==Le&&r>0&&r<4&&(At(J,t,r,n),function(e,t,r){if(6==r)return 4==e&&(Pt(18,1,3),1==t?Pt(12,1,1):2==t?Pt(12,1,2):3==t&&Pt(2,6,0)),5==e&&(Pt(12,1,3),1==t?Pt(3,6,0):2==t?Pt(18,1,2):3==t&&Pt(18,1,1)),2==e&&Ct(4,4-t),void(3==e&&Ct(5,t));var n=1==r;if(0==n)for(var o=0;o<36;o++)J[e][o]=(J[e][o]+4-t)%4;4==e&&(0==n&&(Pt(30,1,3),1==t?Pt(0,1,1):2==t?Pt(0,1,2):3==t&&Pt(0,6,0)),1==n&&(Pt(24,1,3),1==t?Pt(6,1,1):2==t?Pt(6,1,2):3==t&&Pt(1,6,0)));5==e&&(0==n&&(Pt(0,1,3),1==t?Pt(5,6,0):2==t?Pt(30,1,2):3==t&&Pt(30,1,1)),1==n&&(Pt(6,1,3),1==t?Pt(4,6,0):2==t?Pt(24,1,2):3==t&&Pt(24,1,1)));0==n&&(2==e&&Ct(0,4-t),3==e&&Ct(1,t));1==n&&(2==e&&Ct(2,4-t),3==e&&Ct(3,t))}(t,r,n))}function At(e,t,r,n){if(!n){for(var o=0;o<20;o++)Tt[(o+5*r)%20]=e[t][bt[o]];for(o=0;o<20;o++)e[t][bt[o]]=Tt[o];for(o=0;o<12;o++)Tt[(o+3*r)%12]=e[t][Mt[o]];for(o=0;o<12;o++)e[t][Mt[o]]=Tt[o];for(o=0;o<4;o++)Tt[(o+r)%4]=e[t][pt[o]];for(o=0;o<4;o++)e[t][pt[o]]=Tt[o]}var a=6*r;for(o=0;o<4;o++)for(var f=ne[t][o],i=n?yt[t][o]:wt[t][o],l=kt[i],u=n>1?Lt[i+4]:Lt[i],c=0;c<6;c++,a++)Tt[a%24]=e[f][c*l+u];for(o=0,a=0;o<4;o++)for(f=ne[t][o],i=n?yt[t][o]:wt[t][o],l=kt[i],u=n>1?Lt[i+4]:Lt[i],c=0;c<6;c++,a++)e[f][c*l+u]=Tt[a]}var Ft,St,Dt,Bt,xt,Et,It,Ut=[[[0,1,0],[0,6,1],[0,6,4],[0,1,5]],[[30,1,0],[5,6,1],[5,6,4],[30,1,5]],[[6,1,0],[1,6,1],[1,6,4],[6,1,5]],[[24,1,0],[4,6,1],[4,6,4],[24,1,5]],[[12,1,0],[2,6,1],[2,6,4],[12,1,5]],[[18,1,0],[3,6,1],[3,6,4],[18,1,5]]];function Pt(e,t,r){for(var n=e,o=0;o<6;n+=t,o++)J[r][n]=(J[r][n]+2)%4}function Ct(e,t){for(var r=0;r<4;r++)for(var n=Ut[e][r],o=n[0],a=0;a<6;o+=n[1],a++)J[n[2]][o]=(J[n[2]][o]+t)%4}var Wt,Xt,Yt=[],qt=[],Ot=[],Qt=[],zt=[[[0,0],[6,0],[6,1],[0,1]],[[6,0],[6,6],[5,6],[5,0]],[[6,6],[0,6],[0,5],[6,5]],[[0,6],[0,0],[1,0],[1,6]],[[0,1],[6,1],[6,2],[0,2]],[[5,0],[5,6],[4,6],[4,0]],[[0,4],[6,4],[6,5],[0,5]],[[2,0],[2,6],[1,6],[1,0]],[[0,2],[6,2],[6,3],[0,3]],[[4,0],[4,6],[3,6],[3,0]],[[0,3],[6,3],[6,4],[0,4]],[[3,0],[3,6],[2,6],[2,0]]],Nt=[[1,0],[0,1],[-1,0],[0,-1],[1,0],[0,1],[-1,0],[0,-1],[1,0],[0,1],[-1,0],[0,-1]],Zt=[[1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1],[1,-1,1,-1,1,-1,1,-1,1,-1,1,-1],[1,-1,1,-1,1,-1,1,-1,1,-1,1,-1],[-1,1,-1,1,-1,1,-1,1,-1,1,-1,1],[1,-1,1,-1,1,-1,1,-1,1,-1,1,-1]],Ht=[],Gt=[],Kt=[[[1,0,0],[0,0,0],[0,0,1]],[[1,0,0],[0,1,0],[0,0,0]],[[0,0,0],[0,1,0],[0,0,1]]],jt=[[[0,0,1],[0,0,0],[-1,0,0]],[[0,1,0],[-1,0,0],[0,0,0]],[[0,0,0],[0,0,1],[0,-1,0]]],Jt=[[[0,0,0],[0,1,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,1]],[[1,0,0],[0,0,0],[0,0,0]]],Vt=[1,-1,1,-1,1,-1],$t=[],_t=[],er=[],tr=[],rr=[],nr=[],or=[],ar=[],fr=[],ir=[],lr=[],ur=[],cr=[[1,0,0,0,0,0],[0,1,0,0,0,0],[1,1,0,0,0,0],[1,1,1,1,1,1],[1,0,0,0,0,1],[1,0,0,0,0,2],[0,0,1,0,0,0]],sr=[],hr=[[0,2,2,2,2,2],[2,1,2,2,2,2],[2,2,2,2,2,2],[2,2,2,2,2,2],[2,2,2,2,2,2],[2,2,2,2,2,2],[2,2,6,2,2,2]],vr=[[0,1,2,3,4,5],[5,4,3,2,1,0],[0,5,4,3,1,2]];function dr(){if(mn.save(),mn.fillStyle=t,1!=Q||0!=be&&!R?(Nr(mn,0,0,Ft,St),mn.fillRect(0,0,Ft,St)):(Nr(mn,0,0,Ft,St-bn),mn.fillRect(0,0,Ft,St-bn)),It=0,se)Rr(ae,fe,ie,et,3,9);else{for(var e=Math.cos(h+s),n=Math.sin(h+s)*Vt[u],l=0;l<3;l++){$t[l]=0,_t[l]=0;for(var v=0;v<3;v++){var d=Math.floor(u/2);$t[l]+=ae[v]*(Jt[d][l][v]+Kt[d][l][v]*e+jt[d][l][v]*n),_t[l]+=fe[v]*(Jt[d][l][v]+Kt[d][l][v]*e+jt[d][l][v]*n)}}Wr(er,$t,_t);var g=Math.cos(h-s),m=Math.sin(h-s)*Vt[u];for(l=0;l<3;l++){tr[l]=0,rr[l]=0;for(v=0;v<3;v++){d=Math.floor(u/2);tr[l]+=ae[v]*(Jt[d][l][v]+Kt[d][l][v]*g+jt[d][l][v]*m),rr[l]+=fe[v]*(Jt[d][l][v]+Kt[d][l][v]*g+jt[d][l][v]*m)}}Wr(nr,tr,rr),ir[0]=ae,lr[0]=fe,ur[0]=ie,ir[1]=$t,lr[1]=_t,ur[1]=er,ir[2]=tr,lr[2]=rr,ur[2]=nr,sr[0]=tt,sr[1]=rt,sr[2]=nt,sr[3]=ot,sr[4]=at,sr[5]=ft,Cr(Ir(xr(or,ae),5+A),Ir(xr(fr,_[u]),.4)),Cr(Ir(xr(ar,ae),5+A),Ir(xr(fr,_[1^u]),1/6));var b,M=Ur(or,_[u]),p=Ur(ar,_[1^u]);Rr(ir[cr[c][vr[b=M<0&&p>0?0:M>0&&p<0?1:2][0]]],lr[cr[c][vr[b][0]]],ur[cr[c][vr[b][0]]],sr[vr[b][0]],hr[c][vr[b][0]],0),Rr(ir[cr[c][vr[b][1]]],lr[cr[c][vr[b][1]]],ur[cr[c][vr[b][1]]],sr[vr[b][1]],hr[c][vr[b][1]],1),Rr(ir[cr[c][vr[b][2]]],lr[cr[c][vr[b][2]]],ur[cr[c][vr[b][2]]],sr[vr[b][2]],hr[c][vr[b][2]],2),Rr(ir[cr[c][vr[b][3]]],lr[cr[c][vr[b][3]]],ur[cr[c][vr[b][3]]],sr[vr[b][3]],hr[c][vr[b][3]],3),Rr(ir[cr[c][vr[b][4]]],lr[cr[c][vr[b][4]]],ur[cr[c][vr[b][4]]],sr[vr[b][4]],hr[c][vr[b][4]],4),Rr(ir[cr[c][vr[b][5]]],lr[cr[c][vr[b][5]]],ur[cr[c][vr[b][5]]],sr[vr[b][5]],hr[c][vr[b][5]],5)}if(N||y||(me=-1),!(ye>0&&2==Q)){if(!R&&he.length>0){if(he[P].length>0){if(be>0){mn.lineWidth=pn,mn.strokeStyle=i;var k=(Ft-2)*function(e,t){for(var r=0,n=0;n<t;n++)e[n]<1e3&&r++;return r}(he[P],C)/ze(he[P]);mn.fillStyle=f,mn.fillRect(Mn,St-be-Mn,Ft-bn,be),mn.fillStyle=a,mn.fillRect(Mn,St-be-Mn,k,be),mn.beginPath(),mn.rect(Mn,St-be-Mn,Ft-bn,be),mn.stroke()}var L=Ze(he[P],C)+"/"+Ze(he[P],-1)+Qe[q];mn.font="bold "+Me+"px helvetica";var w=mn.measureText(L).width,T=Ft-w-2,F=St-be-Math.floor(4*bn);Z>0?(U&&Dr(mn,L,pe?T-bn:T,F-Me),function(e,t){var n=0==C?Ne(he[P],C):C,o=Xe(he[P],0,n),a=Oe(he[P],n),f=Xe(he[P],n+1,he[P].length);H&&(""==a&&(o=o.substr(0,o.length-1)),""!=f&&(f=" "+f.substr(0,f.length-1)));var i=e.measureText(o).width,l=e.measureText(a).width,u=e.measureText(f).width,c=1;c+i+l+u>Ft&&(c=Math.min(1,Ft/2-i-l/2),c=Math.max(c,Ft-i-l-u-2));l>0&&(e.fillStyle=r,e.lineWidth=2,e.strokeStyle="black",e.beginPath(),wn<=14?e.fillRect(c+i-1,St-be-Me-Math.floor(4*bn),l+2,Me+Math.floor(3*bn)):e.fillRect(c+i-1,St-be-Me-Math.floor(2*bn),l+2,Me+Math.floor(bn)));i>0&&Dr(e,o,c,t);l>0&&Dr(e,a,c+i,t);u>0&&Dr(e,f,c+i+l,t)}(mn,F)):U&&Dr(mn,L,pe?T-bn:T,F)}if(he.length>1){L=P+1+"/"+he.length,w=mn.measureText(L).width,T=Ft-w-z-Math.floor(5*bn);Dr(mn,L,T,gr()),Hr(mn,7,Ft-z/2,z/2)}}O>=0&&(mn.font="bold "+Me+"px helvetica",Dr(mn,de[O],pe?bn:0,gr()))}mn.restore(),ge&&0!=Q&&function(e){var t=z%2==0?1:0;if(t+=Math.floor(bn+.5)-1,2==Q)return e.fillStyle=0==me||ye>0&&6==me?nn(o):o,e.fillRect(Mn,St-z,z,z),e.lineWidth=pn,e.strokeStyle=i,e.beginPath(),e.rect(Mn,St-z-Mn,z,z),e.stroke(),void Hr(e,0,z/2,St-(z+1)/2-t);if(1==Q){for(var r=0,n=0;n<7;n++){var a=Math.floor((Ft-r)/(7-n));e.fillStyle=me==n?nn(o):o,e.fillRect(r,St,a,z),e.lineWidth=pn,e.strokeStyle=i,e.beginPath(),0==n?e.rect(r+Mn,St-Mn,a-bn,z):e.rect(r-Mn,St-Mn,a,z),e.stroke(),e.strokeStyle="black",Hr(e,n,r+a/2,St+z/2-t),r+=a}ge=!1}}(mn)}function gr(){return wn<10?Math.floor(10*bn):wn<12?Math.floor(12*bn):wn<14?Math.floor(14*bn):Me}var mr=[],br=[],Mr=[],pr=[],kr=[[],[],[],[],[],[]],Lr=[[],[],[],[],[],[]],wr=[[.1,.1],[.9,.1],[.9,.9],[.1,.9]],yr=[[0,0],[0,1],[1,1],[1,0]],Tr=[];function Rr(e,t,r,n,o,a){for(var f=0;f<8;f++){var i=(v=Ft<St?Ft:St-be)/3.7*Ur(ee[f],t)*F,s=v/3.7*Ur(ee[f],r)*F;i/=1-(d=v/(5+A)*Ur(ee[f],e)*F)/v,s/=1-d/v,Mr[f]=Ft/2+i,pr[f]=0==S?(St-be)/2*F-s:1==S?(St-be)/2-s:2==S?St-be-(St-be)/2*F-s:(St-be)*(S*(1-F)+F/2)-s}for(f=0;f<6;f++)for(var h=0;h<4;h++)kr[f][h]=Mr[te[f][h]],Lr[f][h]=pr[te[f][h]];if(D)for(f=0;f<6;f++)if(Cr(Ir(xr(or,e),5+A),_[f]),Ur(or,_[f])<0){Ir(xr(Tr,_[f]),B);var v,d;i=(v=Ft<St?Ft:St-be)/x*Ur(Tr,t),s=v/E*Ur(Tr,r);i/=1-(d=v/(5+A)*Ur(Tr,e))/v,s/=1-d/v;var g=n[f][0][1]-n[f][0][0],m=n[f][1][1]-n[f][1][0];if(g>0&&m>0)for(var p=0,k=n[f][1][0];p<m;p++,k++)for(var L=0,w=n[f][0][0];L<g;L++,w++){for(h=0;h<4;h++)Ar(f,h,mr,br,w+wr[h][0],k+wr[h][1],b),mr[h]=Math.floor(mr[h]+(b?-i:i)),br[h]=Math.floor(br[h]-s);1==Le?(Jr(mn,mr,br,"#fdfdfd"),jr(mn,mr,br,I?nn("#fdfdfd"):"#fdfdfd"),en(mn,mr,br,f,J[f][6*k+w],K[j[f][6*k+w]])):(Jr(mn,mr,br,K[j[f][6*k+w]]),jr(mn,mr,br,I?nn(K[j[f][6*k+w]]):K[j[f][6*k+w]]))}}var T=0;T=u>3?n[0][0][0]:u<2?n[2][0][0]:n[1][0][0];for(f=0;f<6;f++){g=n[f][0][1]-n[f][0][0],m=n[f][1][1]-n[f][1][0];if(g<=0||m<=0){var R=0;if(0!=T&&5!=T||0!=o?1!=T&&4!=T||1!=o?2!=T&&3!=T||6!=o?4!=c&&5!=c||2==o&&(1==T&&f%2==0||4==T&&f%2==1)&&(R=1/6):R=f%2==u%2?1/3:.5:R=f%2==u%2?1/6:2/3:R=5/6,0!=R){for(h=0;h<4;h++){var U=re[f][h];mr[h]=Math.floor(kr[f][h]+(kr[1^f][U]-kr[f][h])*R),br[h]=Math.floor(Lr[f][h]+(Lr[1^f][U]-Lr[f][h])*R),b&&(mr[h]=Ft-mr[h])}Jr(mn,mr,br,l)}}else{for(h=0;h<4;h++)Ar(f,h,mr,br,n[f][0][yr[h][0]],n[f][1][yr[h][1]],b);a<5?Jr(mn,mr,br,l):(Cr(Ir(xr(or,e),5+A),_[f]),Ur(or,_[f])>0&&Jr(mn,mr,br,l))}}for(f=0;f<6;f++)if(Cr(Ir(xr(or,e),5+A),_[f]),Ur(or,_[f])>0){g=n[f][0][1]-n[f][0][0],m=n[f][1][1]-n[f][1][0];if(g>0&&m>0)for(p=0,k=n[f][1][0];p<m;p++,k++)for(L=0,w=n[f][0][0];L<g;L++,w++){for(h=0;h<4;h++)Ar(f,h,mr,br,w+wr[h][0],k+wr[h][1],b);1==Le?(jr(mn,mr,br,"#fdfdfd"),Jr(mn,mr,br,"#fdfdfd"),en(mn,mr,br,f,J[f][6*k+w],K[j[f][6*k+w]])):(jr(mn,mr,br,K[j[f][6*k+w]]),Jr(mn,mr,br,K[j[f][6*k+w]]))}if(!M||y)continue;var P=(kr[f][1]-kr[f][0]+kr[f][2]-kr[f][3])/6,C=(kr[f][3]-kr[f][0]+kr[f][2]-kr[f][1])/6,W=(Lr[f][1]-Lr[f][0]+Lr[f][2]-Lr[f][3])/6,X=(Lr[f][3]-Lr[f][0]+Lr[f][2]-Lr[f][1])/6;if(3==o)for(h=0;h<12;h++){for(U=0;U<4;U++)Ar(f,U,Yt[It],qt[It],zt[h][U][0],zt[h][U][1],!1);if(Ot[It]=(P*Nt[h][0]+W*Nt[h][1])*Zt[f][h],Qt[It]=(C*Nt[h][0]+X*Nt[h][1])*Zt[f][h],Ht[It]=ne[f][h%4],Gt[It]=h>3?1:0,(It>7&&It<12||It>19&&It<24||It>31&&It<36)&&(Gt[It]=6),36==++It)break}else if(0==o){if(f!=u&&g>0&&m>0){for(h=6==g?0==n[f][1][0]?0:2:0==n[f][0][0]?3:1,U=0;U<4;U++)Ar(f,U,Yt[It],qt[It],zt[h][U][0],zt[h][U][1],!1);Ot[It]=(P*Nt[h][0]+W*Nt[h][1])*Zt[f][h],Qt[It]=(C*Nt[h][0]+X*Nt[h][1])*Zt[f][h],Ht[It]=u,Gt[It]=0,It++}}else if(1==o){if(f!=u&&g>0&&m>0){h=6==g?1==n[f][1][0]?0:2:1==n[f][0][0]?3:1;h+=4;for(U=0;U<4;U++)Ar(f,U,Yt[It],qt[It],zt[h][U][0],zt[h][U][1],!1);Ot[It]=(P*Nt[h][0]+W*Nt[h][1])*Zt[f][h],Qt[It]=(C*Nt[h][0]+X*Nt[h][1])*Zt[f][h],Ht[It]=u,Gt[It]=1,It++}}else if(6==o&&f!=u&&g>0&&m>0){h=6==g?2==n[f][1][0]?0:2:2==n[f][0][0]?3:1;h+=8;for(U=0;U<4;U++)Ar(f,U,Yt[It],qt[It],zt[h][U][0],zt[h][U][1],!1);Ot[It]=(P*Nt[h][0]+W*Nt[h][1])*Zt[f][h],Qt[It]=(C*Nt[h][0]+X*Nt[h][1])*Zt[f][h],Ht[It]=u,Gt[It]=6,It++}}}function Ar(e,t,r,n,o,a,f){o/=6,a/=6;var i=kr[e][0]+(kr[e][1]-kr[e][0])*o,l=Lr[e][0]+(Lr[e][1]-Lr[e][0])*o,u=kr[e][3]+(kr[e][2]-kr[e][3])*o,c=Lr[e][3]+(Lr[e][2]-Lr[e][3])*o;r[t]=Math.floor(.5+i+(u-i)*a),n[t]=Math.floor(.5+l+(c-l)*a),f&&(r[t]=Ft-r[t])}var Fr=[1,1,-1,-1,-1,1,1,-1,-1,0,1,0,0,1,0,-1],Sr=[];function Dr(e,t,r,o){if(pe){e.fillStyle="black";for(var a=0;a<Sr.length;a+=2)e.fillText(t,r+Sr[a],o+Sr[a+1]);e.fillStyle="white"}else e.fillStyle=n;e.fillText(t,r,o)}var Br=[-1,3,1,-1,0,2,4,-1];function xr(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Er(e){var t=Math.sqrt(Ur(e,e));return e[0]/=t,e[1]/=t,e[2]/=t,e}function Ir(e,t){return e[0]*=t,e[1]*=t,e[2]*=t,e}function Ur(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Pr(e,t){return e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],e}function Cr(e,t){return e[0]-=t[0],e[1]-=t[1],e[2]-=t[2],e}function Wr(e,t,r){return e[0]=t[1]*r[2]-t[2]*r[1],e[1]=t[2]*r[0]-t[0]*r[2],e[2]=t[0]*r[1]-t[1]*r[0],e}function Xr(e,t){var r=Math.sin(t),n=Math.cos(t),o=e[1]*n-e[2]*r,a=e[1]*r+e[2]*n;return e[1]=o,e[2]=a,e}function Yr(e,t){var r=Math.sin(t),n=Math.cos(t),o=e[0]*n-e[2]*r,a=e[0]*r+e[2]*n;return e[0]=o,e[2]=a,e}function qr(e,t){var r=Math.sin(t),n=Math.cos(t),o=e[0]*n-e[1]*r,a=e[0]*r+e[1]*n;return e[0]=o,e[1]=a,e}function Or(e,t,r){return"#"+Qr(e.toString(16))+Qr(t.toString(16))+Qr(r.toString(16))}function Qr(e){return("00"+e).substring(e.length)}function zr(e){for(var t=0,r=0;r<6;r++)for(var n=0;n<16;n++)if(e[r].toLowerCase()=="0123456789abcdef".charAt(n)){t++;break}return 6==t}function Nr(e,t,r,n,o){e.beginPath(),e.moveTo(t,r),e.lineTo(t+n,r),e.lineTo(t+n,r+o),e.lineTo(t,r+o),e.lineTo(t,r),e.closePath(),e.clip()}var Zr=[];function Hr(e,t,r,n){switch(r=Math.floor(r),n=Math.floor(n),t){case 0:Kr(e,r-Zr[4],n-Zr[3],Zr[3],Zr[6]+1),Gr(e,r+Zr[4],n,-1);break;case 1:Kr(e,r+Zr[1],n-Zr[3],Zr[3],Zr[6]+1),Gr(e,r-Zr[1],n,-1);break;case 2:Gr(e,r+Zr[1],n,-1);break;case 3:y?Kr(e,r-Zr[4],n-Zr[3],Zr[7],Zr[7]):(Kr(e,r-Zr[4],n-Zr[2],Zr[7],Zr[5]),Kr(e,r-Zr[2],n-Zr[4],Zr[3],Zr[9]));break;case 4:Gr(e,r-Zr[2],n,1);break;case 5:Kr(e,r-Zr[4],n-Zr[3],Zr[3],Zr[6]+1),Gr(e,r,n,1);break;case 6:Kr(e,r+Zr[1],n-Zr[3],Zr[3],Zr[6]+1),Gr(e,r-Zr[4],n,1);break;case 7:e.fillStyle=7==me?nn(o):o,e.fillRect(Ft-z-Zr[1]-Mn,Zr[1]+Mn,z,z),e.lineWidth=pn,e.strokeStyle=i,e.beginPath(),bn%2==0?e.rect(Ft-z-Zr[1],Zr[1],z,z):e.rect(Ft-z-Zr[1]-Mn,Zr[1]+Mn,z,z),e.stroke(),Gr(e,r-Zr[3],n+Zr[1],1)}}function Gr(e,t,r,n){var o=3*bn,a=[],f=[];a[0]=t,a[1]=t+n,a[2]=t+4*bn*n,a[3]=t+n,a[4]=t,f[0]=r-o,f[1]=r-o,f[2]=r,f[3]=r+o,f[4]=r+o,function(e,t,r){e.beginPath(),e.moveTo(t[0]+Mn,r[0]+Mn);for(var n=1;n<5;n++)e.lineTo(t[n]+Mn,r[n]+Mn);e.closePath(),e.fillStyle="white",e.strokeStyle="black",e.fill(),e.lineWidth=pn,e.stroke()}(e,a,f)}function Kr(e,t,r,n,o){e.lineWidth=pn,e.beginPath(),e.rect(t+Mn,r+Mn,n-1,o-1),e.fillStyle="white",e.fill(),e.strokeStyle="black",e.stroke()}function jr(e,t,r,n){e.beginPath(),e.moveTo(t[0],r[0]),e.lineTo(t[1],r[1]),e.lineTo(t[2],r[2]),e.lineTo(t[3],r[3]),e.closePath(),e.strokeStyle=n,e.lineWidth=.7*bn,e.stroke()}function Jr(e,t,r,n){e.beginPath(),e.moveTo(t[0],r[0]),e.lineTo(t[1],r[1]),e.lineTo(t[2],r[2]),e.lineTo(t[3],r[3]),e.closePath(),e.fillStyle=n,e.fill()}var Vr,$r,_r=[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]];function en(e,t,r,n,o,a){var f=[],i=[];if(2!=Re||"#ffffff"!=a){for(var l=0;l<4;l++)f[l]=Math.floor(t[l]+.05*(t[_r[2][l]]-t[l])),i[l]=Math.floor(r[l]+.05*(r[_r[2][l]]-r[l]));0==n&&(o=(o+1)%4),4==n&&(o=(o+3)%4);var u=_r[o][0],c=_r[o][1],s=_r[o][2],h=_r[o][3],v=.26*(f[s]-f[c]),d=.26*(i[s]-i[c]),g=(f[u]-f[c])/2,m=i[c]+(i[u]-i[c])/2,b=i[s]+(i[h]-i[s])/2,M=(f[h]-f[s])/2,p=1^o;e.fillStyle=a,e.beginPath(),e.moveTo(f[u]+(f[h]-f[u])/2,i[u]+(i[h]-i[u])/2),e.lineTo(f[p]+g,m),e.lineTo(f[p]+v+g,m+d),e.lineTo(f[p]+v,i[p]+d),p=(p+1)%4,e.lineTo(f[p]-v,i[p]-d),e.lineTo(f[p]-v+M,b-d),e.lineTo(f[p]+M,b),e.closePath(),e.fill(),e.lineWidth=.6*bn,e.strokeStyle="black",e.stroke()}}function tn(e){return"white"==e?"#FFFFFF":"black"==e?"#000000":"#808080"}function rn(e){return"#"!=e.substring(0,1)&&(e=tn(e)),(299*parseInt(e.substring(1,3),16)+587*parseInt(e.substring(3,5),16)+114*parseInt(e.substring(5,7),16))/1e3}function nn(e){"#"!=e.substring(0,1)&&(e=tn(e));var t=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16);return Or(t=Math.floor(.7*t),r=Math.floor(.7*r),n=Math.floor(.7*n))}function on(e,t){if(e>Je)setTimeout(on,0,e,t);else{if(!Y){for(var r=he[P];C<r.length;){if(r[C]>=1e3)O=r[C]-1e3;else if(-1!=r[C]){var n=r[C]%4+1,o=Math.floor(r[C]/4)%7,a=Math.floor(r[C]/28);mt(j,a,4==n?2:n,o)}C++}return y=!1,ge=!0,dr(),void Je++}var f,i,l,g,b,M,k=t;!1,requestAnimationFrame((function e(){if(A){if(A=!1,M=!1,p)k>0?C>=r.length&&(C=0,Ge(r)):(O=-1,0==C&&(C=r.length));else if(k>0&&C>=r.length||k<0&&0==C)return m=!1,y=!1,Je++,ge=!0,void dr();y=!0,ge=!0}if(F&&(F=!1,k<0&&(B=!1,0==C?(B=!0,D=!0):C--),!B)){if(T=!1,-1==r[C]){if(dr(),!X)for(f=Date.now();Date.now()-f<1e3;);}else r[C]>=1e3?O=k>0?r[C]-1e3:-1:T=!0;if(T){n=r[C]%4+1,o=Math.floor(r[C]/4)%7;var t=n<3;if(4==n&&(n=2),k<0&&(t=!t,n=4-n),a=Math.floor(r[C]/28),L=!1,se=!0,w=!0,h=0,oe[a]>0&&(t=!t),Y){b=Math.PI/2,g=t?1:-1;var x=67*v;2==n&&(b=Math.PI,x=67*d),L=!0,u=a,c=o,gt(a),f=Date.now(),i=f,l=g*b/x,s=0}}else S=!0}if(!B&&(T&&(Y&&s*g<b?(dr(),m&&(S=!0),i=Date.now(),s=l*(i-f)):S=!0),S)){if(S=!1,F=!0,T&&(s=0,L=!1,se=!0,mt(j,a,n,o),w=!1,Y&&dr(),X&&(M=!0)),k>0){if(++C<r.length&&r[C]>=1e3&&(O=r[C]-1e3,C++),C==r.length)if(R){C=0,Ge(r);for(var E=0;E<6;E++)for(var I=0;I<36;I++)j[E][I]=V[E][I],J[E][I]=$[E][I]}else D=!0}else O=-1;(m||M)&&(D=!0)}if(D)return D=!1,A=!0,je<=Je+1&&(y=!1),ge=!0,0==me&&_e(),dr(),R&&(_e(),R=!1),m=!1,Je++,void(1==C&&r[0]>=1e3&&C--);requestAnimationFrame(e)}));var T=!1,A=!0,F=!0,S=!1,D=!1,B=!1;r=R?ve[0]:he[P]}}document.addEventListener("touchstart",hn),document.addEventListener("touchmove",Rn),document.addEventListener("touchend",sn),document.addEventListener("mousedown",hn),document.addEventListener("mousemove",Rn),document.addEventListener("mouseup",sn),document.addEventListener("contextmenu",Sn);var an=!1,fn=!0,ln=document.getElementsByTagName("div"),un=ln.length>0&&"wrap"==ln[0].className;function cn(e){un?ln[0].style.overflow=e:document.body.style.overflow=e}function sn(e){if(an&&void 0!==e.touches&&(e.preventDefault(),cn("auto")),an?setTimeout((function(){fn=!0}),100):fn=!0,an=!1,T=!1,N)N=!1,ge=!0,dr();else if(L&&!w){L=!1,h+=s,s=0;for(var t=h;t<0;)t+=32*Math.PI;var r=Math.floor(8*t/Math.PI)%16;(ke||r%4==0||r%4==3)&&(r=Math.floor((r+2)/4),oe[u]>0&&(r=(4-r)%4),h=0,se=!0,mt(j,u,r,c)),dr()}}function hn(e){var t=gn.getBoundingClientRect(),r=Math.floor(t.left),n=Math.floor(t.top);if(void 0===e.touches)var o=e.clientX,a=e.clientY;else o=e.touches[0].clientX,a=e.touches[0].clientY;o<r||o>r+Ft/bn||a<n||a>n+(St+z)/bn||(e.preventDefault(),an=!0,fn=!1,void 0!==e.touches&&(e.preventDefault(),cn("hidden")),Vr=r,$r=n,xt=Dt=An(e),Et=Bt=Fn(e),g=!1,me=function(e,t){if(0==Q)return-1;if(he.length>1&&e>=Ft-z&&e<Ft&&t>=0&&t<z)return 7;if(2==Q)return e>=0&&e<z&&t>=St-z&&t<St?0:-1;if(t<St)return-1;for(var r=0,n=0;n<7;n++){var o=(Ft-r)/(7-n);if(e>=r&&e<r+o&&t>=St&&t<St+z)return n;r+=o}return-1}(Dt,Bt),me>=0?(N=!0,3==me?y?$e():b=!b:0==me?ye>0&&2==Q?1==we?(we=!1,$e(),_e()):(we=!0,Ve(Br[me=6])):($e(),_e()):7==me?($e(),setTimeout(_e,10),P=P<he.length-1?P+1:0):Ve(Br[me]),ge=!0,dr()):be>0&&he.length>0&&he[P].length>0&&Bt>St-be&&Bt<=St?k&&($e(),vn(je++)):(b&&(xt=Dt=Ft-Dt),void 0===e.touches?!M||y||0!=e.button||e.shiftKey||(g=!0):M&&!y&&(g=!0)))}function vn(e){if(e>Je)setTimeout(vn,0,e);else{var t=ze(he[P]),r=Math.floor(((Dt-1)*t*2/(Ft-2)+1)/2);(r=Math.max(0,Math.min(t,r)))>0&&(r=Ne(he[P],r)),r>C&&Ke(j,he[P],C,r-C,!1),r<C&&Ke(j,he[P],r,C-r,!0),C=r,T=!0,dr(),y=!1,Je++}}var dn,gn,mn,bn,Mn,pn,kn,Ln,wn,yn,Tn=[];function Rn(e){if(an&&!N){if(T){$e();var t=ze(he[P]),r=Math.floor(((An(e)-1)*t*2/(Ft-2)+1)/2);return(r=Math.max(0,Math.min(t,r)))>0&&(r=Ne(he[P],r)),r>C&&Ke(j,he[P],C,r-C,!1),r<C&&Ke(j,he[P],r,C-r,!0),C=r,void dr()}var n=b?Ft-An(e):An(e),o=Fn(e),a=n-Dt,f=o-Bt;if(M&&g&&!L&&!y){xt=n,Et=o;for(var i=0;i<It;i++){var l=Yt[i][0],h=Yt[i][1]-l,v=Yt[i][3]-l,d=qt[i][0],m=qt[i][1]-d,p=qt[i][3]-d,k=(p*(Dt-l)-v*(Bt-d))/(h*p-v*m),w=(-m*(Dt-l)+h*(Bt-d))/(h*p-v*m);if(k>0&&k<1&&w>0&&w<1){if(a*a+f*f<144)return;if(Wt=Ot[i],Xt=Qt[i],Math.abs(Wt*a+Xt*f)/Math.sqrt((Wt*Wt+Xt*Xt)*(a*a+f*f))>.75){L=!0,u=Ht[i],c=Gt[i];break}}}g=!1,Dt=xt,Bt=Et}a=(n-Dt)/bn,f=(o-Bt)/bn,!L||y?(Er(Pr(ae,Ir(xr(Tn,fe),-.016*a))),Er(Wr(fe,ie,ae)),Er(Pr(ae,Ir(xr(Tn,ie),.016*f))),Er(Wr(ie,ae,fe)),Dt=n,Bt=o):(se&&gt(u),s=.03*(Wt*a+Xt*f)/Math.sqrt(Wt*Wt+Xt*Xt)),dr()}}function An(e){return void 0===e.touches?(e.clientX-Vr)*bn:(e.touches[0].clientX-Vr)*bn}function Fn(e){return void 0===e.touches?(e.clientY-$r)*bn:(e.touches[0].clientY-$r)*bn}function Sn(e){fn||e.preventDefault()}function Dn(){clearTimeout(dn),dn=setTimeout((function(){Bn(),ge=!0,dr()}),20)}function Bn(){St=yn.clientHeight-1,Ft=yn.clientWidth-1,gn.style.width=Ft+"px",gn.style.height=St+"px",bn=devicePixelRatio,Mn=bn/2,St=Math.floor(St*bn),Ft=Math.floor(Ft*bn),gn.width=Ft,gn.height=St,pn=bn,z=Math.floor(kn*bn),be=Math.floor(Ln*bn),Me=Math.floor(wn*bn);for(var e=1;e<10;e++)Zr[e]=e*bn;for(e=0;e<Fr.length;e++)Sr[e]=Fr[e]*bn;1==Q&&(St-=z)}function xn(e,t){var r,n,o=["R","L","F","B","U","D"],a=["","m","n"],f=["","2","'"],i=-1,l=-1,u=-1,c="";0==t&&(t=10*e);for(var s=0;s<t;s++){for(;i==l||Math.floor(i/2)==Math.floor(l/2)&&i==u;)i=Math.floor(6*Math.random());u=l,l=i,r=Math.floor(3*Math.random()),e<=3?c+=""+o[i]+f[r]+" ":(n=Math.floor(Math.random()*(e>4?3:2)),5==e&&1==n&&(n=0),c+=""+o[i]+a[n]+f[r]+" ")}return c}window.addEventListener("resize",Dn);var En=[];function In(){$e(),document.removeEventListener("mousedown",hn),document.removeEventListener("touchstart",hn),document.removeEventListener("touchmove",Rn),document.removeEventListener("touchend",sn),document.removeEventListener("mousedown",hn),document.removeEventListener("mousemove",Rn),document.removeEventListener("mouseup",sn),document.removeEventListener("contextmenu",Sn),window.removeEventListener("resize",Dn)}!function(){gn=document.createElement("canvas"),void 0!==e&&function(){for(var t=e.split("&"),r=0;r<t.length;r++){var n=t[r].split("=");void 0!==n[1]&&(En[n[0]]=decodeURIComponent(n[1].trim()))}}();var t=xe("id");if(null!=t)(yn=document.getElementById(t)).innerHTML="";else if(null!=document.currentScript)yn=document.currentScript.parentNode;else{var r=document.getElementsByTagName("script"),n=r[r.length-1];yn=n.parentNode}null!=yn.id&&"undefined"!=typeof removeListeners&&(removeListeners[yn.id]=In);for(var o=0;o<6;o++)j[o]=[],J[o]=[],V[o]=[],$[o]=[];for(o=0;o<36;o++)Yt[o]=[],qt[o]=[];P=0,h=0,De()}()}
"use strict";function AnimCube6(e){var t,r,n,o,a,f,i,l,u,c,s,h,v,d,g,m,b,M,p,k,L,w,y,R,A,T,D,S,F,B,E,x,U,I,P,C,W,X,Y,q,O,Q,N=[],Z=[],z=[],H=[],G=[],K=[],j=[[0,-1,0],[0,1,0],[0,0,-1],[0,0,1],[-1,0,0],[1,0,0]],J=[[-1,-1,-1],[1,-1,-1],[1,-1,1],[-1,-1,1],[-1,1,-1],[1,1,-1],[1,1,1],[-1,1,1]],V=[[0,1,2,3],[4,7,6,5],[0,4,5,1],[2,6,7,3],[0,3,7,4],[1,5,6,2]],$=[[0,3,2,1],[0,3,2,1],[3,2,1,0],[3,2,1,0],[0,3,2,1],[0,3,2,1]],_=[[2,5,3,4],[4,3,5,2],[4,1,5,0],[5,1,4,0],[0,3,1,2],[2,1,3,0]],ee=[1,1,-1,-1,-1,-1],te=[0,0,-1],re=[1,0,0],ne=[],oe=[],ae=[],fe=[],ie=!0,le=[],ue=[],ce=[],se=!0,he=-1,ve=6,de=12,ge=!0,me=!1,be=!1,Me=!1,pe=!1,ke=0,Le=0,we=0,ye=0,Re=[3,2,0,5,1,4],Ae=[[30,24,18,12,6,0,31,25,19,13,7,1,32,26,20,14,8,2,33,27,21,15,9,3,34,28,22,16,10,4,35,29,23,17,11,5],[5,11,17,23,29,35,4,10,16,22,28,34,3,9,15,21,27,33,2,8,14,20,26,32,1,7,13,19,25,31,0,6,12,18,24,30],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35],[30,24,18,12,6,0,31,25,19,13,7,1,32,26,20,14,8,2,33,27,21,15,9,3,34,28,22,16,10,4,35,29,23,17,11,5],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35]];function Te(){var e=Se("config");null!=e?function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==t.readyState&&(200==t.status?function(e){for(var t=e.split("\n"),r=0;r<t.length;r++){var n=t[r].split("=");void 0!==n[1]&&(N[n[0]]=n[1].trim())}}(t.responseText):console.log("Error loading config file: "+e),De())},t.open("GET",e,!0),t.send()}(e):De()}function De(){Z[0]=Yr(255,128,64),Z[1]=Yr(255,0,0),Z[2]=Yr(0,255,0),Z[3]=Yr(0,0,255),Z[4]=Yr(153,153,153),Z[5]=Yr(170,170,68),Z[6]=Yr(187,119,68),Z[7]=Yr(153,68,68),Z[8]=Yr(68,119,68),Z[9]=Yr(0,68,119),Z[10]=Yr(255,255,255),Z[11]=Yr(255,255,0),Z[12]=Yr(255,96,32),Z[13]=Yr(208,0,0),Z[14]=Yr(0,144,0),Z[15]=Yr(32,64,208),Z[16]=Yr(176,176,176),Z[17]=Yr(80,80,80),Z[18]=Yr(255,0,255),Z[19]=Yr(0,255,255),Z[20]=Yr(255,160,192),Z[21]=Yr(32,255,16),Z[22]=Yr(0,0,0),Z[23]=Yr(128,128,128);var e=Se("bgcolor");if(t=null!=e&&6==e.length&&Or(e)?"#"+e:"gray",e=Se("butbgcolor"),o=null!=e&&6==e.length&&Or(e)?"#"+e:t,null!=(e=Se("colors")))for(var u=0;u<10&&u<e.length/6;u++)Or(e.substring(6*u,6*u+6))&&(Z[u]="#"+e.substring(6*u,6*u+6));for(u=0;u<6;u++)for(var c=0;c<36;c++)z[u][c]=u+10;if(null!=(e=Se("supercube"))&&"1"==e){Me=!0,Fe(.06);for(u=0;u<36;u++)z[0][u]=22;null!=(e=Se("scw"))&&("1"==e?we=1:"2"==e&&(we=2)),1==we&&(Z[10]="#000000")}if(null!=(e=Se("gabbacolors"))&&"1"==e&&(1==Me?(Z[11]="#fdcf00",Z[12]="#fd4e0a",Z[13]="#93000d",Z[14]="#00702d",Z[15]="#00347a"):(Fe(.06),Z[11]="#ffd90a",Z[12]="#ff4f0b",Z[13]="#9e0b19",Z[14]="#0b7d39",Z[15]="#0b4186")),null!=(e=Se("borderwidth"))){for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(ye=10*ye+parseInt(e[u]));ye>=0&&ye<=20&&Fe(ye/100)}if(Me)for(u=0;u<6;u++)for(c=0;c<36;c++)H[u][c]=0;var s="lluu";if(null!=(e=Se("colorscheme"))&&6==e.length)for(u=0;u<6;u++){var h=23;for(c=0;c<23;c++)if(e[u].toLowerCase()=="0123456789wyorgbldmcpnk".charAt(c)){h=c;break}for(c=0;c<36;c++)z[u][c]=h}if("1"==(e=Se("scramble"))?ke=1:"2"==e&&(ke=2),2==ke)for(u=0;u<6;u++)for(c=0;c<36;c++)G[u][c]=z[u][c],K[u][c]=H[u][c];if(0==ke){if(null!=(e=Se("pos"))&&216==e.length){s="uuuuff","gray"==t&&(t="white");for(u=0;u<6;u++){var g=Re[u];for(c=0;c<36;c++){var m=Ae[u][c];z[g][m]=23;for(var b=0;b<14;b++)if(e.charAt(36*u+c)=="DFECABdfecabgh".charAt(b)){z[g][m]=b+4;break}}}}if(null!=(e=Se("facelets"))&&216==e.length)for(u=0;u<6;u++)for(c=0;c<36;c++){z[u][c]=23;for(b=0;b<23;b++)if(e[36*u+c].toLowerCase()=="0123456789wyorgbldmcpnk".charAt(b)){z[u][c]=b;break}}if(null!=(e=Se("superfacelets"))&&216==e.length)for(u=0;u<6;u++)for(c=0;c<36;c++)for(b=0;b<4;b++)if(e[36*u+c].toLowerCase()=="0123".charAt(b)){H[u][c]=b;break}}if(null!=(e=Se("randmoves"))){var M=0;for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(M=10*M+parseInt(e[u]));M>0&&(Le=M)}if(("random"==(e=Se("move"))||ke>0)&&(e=Tn(6,Le)),le=null==e?[]:xe(e,!0),U=0,X=-1,0==ke&&null!=(e=Se("initmove"))){"random"==e&&(e=Tn(6,Le));var w="#"==e?le:xe(e,!1);w.length>0&&ze(z,w[0],0,w[0].length,!1)}if(e=Se("initrevmove"),1==ke?e=null:2==ke&&(e="#"),null!=e){"random"==e&&(e=Tn(6,Le));var y="#"==e?le:xe(e,!1);y.length>0&&ze(z,y[0],0,y[0].length,!0)}0==ke&&null!=(e=Se("demo"))&&("random"==e&&(e=Tn(6,Le)),(ue="#"==e?le:xe(e,!0)).length>0&&ue[0].length>0&&(T=!0)),e=Se("position"),Br(Pr(ne,te,re)),null==e&&(e=s);var R=Math.PI/12;for(u=0;u<e.length;u++){var A=R;switch(e[u].toLowerCase()){case"d":A=-A;case"u":Wr(te,A),Wr(re,A);break;case"f":A=-A;case"b":Xr(te,A),Xr(re,A);break;case"l":A=-A;case"r":Cr(te,A),Cr(re,A)}}if(Br(Pr(ne,te,re)),v=0,d=0,null!=(e=Se("speed")))for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(v=10*v+parseInt(e[u]));if(null!=(e=Se("doublespeed")))for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(d=10*d+parseInt(e[u]));if(0==v&&(v=10),0==d&&(d=3*v/2),D=0,null==(e=Se("perspective")))D=2;else for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(D=10*D+parseInt(e[u]));var x,I=0;if(null!=(e=Se("scale")))for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(I=10*I+parseInt(e[u]));if(S=1/(1+I/10),B=!1,null!=(e=Se("hint"))){B=!0,E=0;for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(E=10*E+parseInt(e[u]));E<1?B=!1:E/=10}(q=13,null!=(e=Se("buttonheight")))&&((x=parseInt(e))>=9&x<=25&&(q=x));(ve=0==le.length?0:6,Y=1,"0"==(e=Se("buttonbar"))?(Y=0,q=0,ve=0):"1"==e?Y=1:"2"!=e&&0!=le.length||(Y=2,ve=0),e=Se("edit"),p="0"!=e,e=Se("repeat"),k="0"!=e,e=Se("clickprogress"),L="0"!=e,e=Se("movetext"),Q="1"==e?1:0,null!=(e=Se("textsize")))&&((x=parseInt(e))>=5&x<=40&&(de=x));if(e=Se("fonttype"),ge=null==e||"1"==e,W=0,null!=(e=Se("metric"))&&("1"==e?W=1:"2"==e?W=2:"3"==e&&(W=3)),F=1,null!=(e=Se("align"))&&("0"==e?F=0:"1"==e?F=1:"2"==e&&(F=2)),null!=(e=Se("ww"))&&"1"==e&&(me=!0),null!=(e=Se("snap"))&&"1"==e&&(be=!0),2!=ke)for(u=0;u<6;u++)for(c=0;c<36;c++)G[u][c]=z[u][c],K[u][c]=H[u][c];for(u=0;u<3;u++)oe[u]=te[u],ae[u]=re[u],fe[u]=ne[u];$r(t)<128?(n="white",r=function(e){"#"!=e.substring(0,1)&&(e=Vr(e));var t=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16);return t=Math.floor(1.3*t),r=Math.floor(1.3*r),n=Math.floor(1.3*n),Yr(t>255?255:t,r>255?255:r,n>255?255:n)}(t)):(n="black",r=_r(t)),i=$r(o)<128?"white":"black",a=n,null!=(e=Se("slidercolor"))&&6==e.length&&Or(e)&&(a="#"+e),f=_r(t),null!=(e=Se("sliderbgcolor"))&&6==e.length&&Or(e)&&(f="#"+e),null!=(e=Se("troughcolor"))&&6==e.length&&Or(e)&&(f="#"+e),l="black",null!=(e=Se("cubecolor"))&&6==e.length&&Or(e)&&(l="#"+e),X=-1,hn=sn.getContext("2d"),mn=q,bn=ve,Mn=de,An(),pn.appendChild(sn),sr(),T&&Ke(-1)}function Se(e){var t=Dn[e];return void 0===t?N[e]:t}function Fe(e){pr[0][0]=pr[0][1]=pr[1][1]=pr[3][0]=e,pr[1][0]=pr[2][0]=pr[2][1]=pr[3][1]=1-e}var Be=[0,0,0,0,0,0,1,1,1,3,3,3,3,3,3,2,2,2,2,2,2],Ee=[0,1,2,3,4,5,1,2,4,5,2,0,5,2,0,0,1,2,3,4,5];function xe(e,t){if(t){for(var r=e.indexOf("{");-1!=r;)0,r=e.indexOf("{",r+1);if(null==ce)X=0,ce=[];else{for(var n=[],o=0;o<ce.length;o++)n[o]=ce[o];X=ce.length,ce=n}}var a=1;for(r=e.indexOf(";");-1!=r;)a++,r=e.indexOf(";",r+1);var f=[],i=0;for(r=e.indexOf(";"),a=0;-1!=r;)f[a++]=Ie(e.substring(i,r),t),i=r+1,r=e.indexOf(";",i);return f[a]=Ie(e.substring(i),t),f}var Ue=["n","t","c","s","a","m"];function Ie(e,t){for(var r=0,n=[],o=0;o<e.length;o++)if("."==e.charAt(o))n[r]=-1,r++;else if("{"==e.charAt(o)){o++;for(var a="";o<e.length&&"}"!=e.charAt(o);)t&&(a+=e.charAt(o)),o++;t&&(ce[X]=a,n[r]=1e3+X,X++,r++)}else for(var f=0;f<21;f++)if(e.charAt(o)=="UDFBLRESMXYZxyzudfblr".charAt(f)){o++;var i=Be[f];if(n[r]=28*Ee[f],o<e.length&&0==Be[f])for(var l=0;l<Ue.length;l++)if(e.charAt(o)==Ue[l]){i=l+1,o++;break}n[r]+=4*i,o<e.length&&("1"==e.charAt(o)?o++:"'"==e.charAt(o)||"3"==e.charAt(o)?(n[r]+=2,o++):"2"==e.charAt(o)&&(++o<e.length&&"'"==e.charAt(o)?(n[r]+=3,o++):n[r]+=1)),r++,o--;break}var u=[];for(o=0;o<r;o++)u[o]=n[o];return u}function Pe(e,t,r){if(t>=e.length)return"";for(var n="",o=t;o<r;o++)n+=Xe(e,o);return n}var Ce=[[["U","D","F","B","L","R"],["Un","Dn","Fn","Bn","Ln","Rn"],["Ut","Dt","Ft","Bt","Lt","Rt"],["Uc","Dc","Fc","Bc","Lc","Rc"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"],["Um","Dm","Fm","Bm","Lm","Rm"]],[["U","D","F","B","L","R"],["Un","Dn","Fn","Bn","Ln","Rn"],["u","d","f","b","l","r"],["Z","~Z","Y","~Y","~X","X"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"],["~E","E","S","~S","M","~M"]],[["U","D","F","B","L","R"],["Un","Dn","Fn","Bn","Ln","Rn"],["u","d","f","b","l","r"],["Y","~Y","Z","~Z","~X","X"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"],["~E","E","S","~S","M","~M"]],[["U","D","F","B","L","R"],["Un","Dn","Fn","Bn","Ln","Rn"],["Uu","Dd","Ff","Bb","Ll","Rr"],["QU","QD","QF","QB","QL","QR"],["UD'","DU'","FB'","BF'","LR'","RL'"],["UD","DU","FB","BF","LR","RL"],["u","d","f","b","l","r"]]],We=["","2","'","2'"];function Xe(e,t){if(t>=e.length)return"";if(e[t]>=1e3)return"";if(-1==e[t])return".";var r=Ce[Q-1][Math.floor(e[t]/4)%7][Math.floor(e[t]/28)];return"~"==r.charAt(0)?r.substring(1)+We[(e[t]+2)%4]:r+We[e[t]%4]}var Ye=["","q","h","s"];function qe(e){for(var t=0,r=0;r<e.length;r++)e[r]<1e3&&t++;return t}function Oe(e,t){for(var r=0,n=0;;){for(;r<e.length&&e[r]>=1e3;)r++;if(n==t)break;r<e.length&&(n++,r++)}return r}function Qe(e,t){for(var r=0,n=0;n<e.length&&(n<t||t<0);n++)r+=Ne(e[n]);return r}function Ne(e){if(e<0||e>=1e3)return 0;var t=e%4,r=Math.floor(e/4)%7,n=1;switch(W){case 1:1!=t&&3!=t||(n*=2);case 2:(1==r||r>3)&&(n*=2);case 3:3==r&&(n=0),3!=W||4!=r&&5!=r||(n*=2)}return n}function Ze(e){X=e.length>0&&e[0]>=1e3?e[0]-1e3:-1}function ze(e,t,r,n,o){for(var a=o?r+n:r;;){if(o){if(a<=r)break;a--}if(t[a]>=1e3)X=o?-1:t[a]-1e3;else if(t[a]>=0){var f=t[a]%4+1,i=Math.floor(t[a]/4)%7;4==f&&(f=2),o&&(f=4-f),vt(e,Math.floor(t[a]/28),f,i)}if(!o&&++a>=r+n)break}}var He=0,Ge=0;function Ke(e){if(je(),(T||0!=le.length&&0!=le[x].length)&&(!T||0!=ue.length&&0!=ue[0].length)){switch(I=1,P=!1,C=!0,e){case 0:break;case 1:I=-1;break;case 2:P=!0;break;case 3:I=-1,P=!0;break;case 4:C=!1}en(He++,I)}}function je(){1==R&&(b=!0)}function Je(){U=0,le.length>0&&Ze(le[x]),ie=!0,M=!1;for(var e=0;e<6;e++)for(var t=0;t<36;t++)z[e][t]=G[e][t],H[e][t]=K[e][t];ke>0&&(le=xe(Tn(6,Le),!1)),2==ke&&ze(z,le[0],0,le[0].length,!0);for(e=0;e<3;e++)te[e]=oe[e],re[e]=ae[e],ne[e]=fe[e]}var Ve=[[[0,6],[0,6]],[[0,6],[0,6]],[[0,6],[0,6]],[[0,6],[0,6]],[[0,6],[0,6]],[[0,6],[0,6]]],$e=[],_e=[],et=[],tt=[],rt=[],nt=[],ot=[[[0,0],[0,0]],[[0,6],[0,6]],[[0,6],[0,1]],[[0,1],[0,6]],[[0,6],[5,6]],[[5,6],[0,6]]],at=[[1,0,3,3,2,3],[0,1,5,5,4,5],[2,3,1,0,3,2],[4,5,0,1,5,4],[3,2,2,4,1,0],[5,4,4,2,0,1]],ft=[[0,1,5,5,4,5],[1,0,3,3,2,3],[4,5,0,1,5,4],[2,3,1,0,3,2],[5,4,4,2,0,1],[3,2,2,4,1,0]],it=[[[0,0],[0,0]],[[4,5],[0,6]],[[0,6],[4,5]],[[0,6],[3,4]],[[0,6],[1,2]],[[3,4],[0,6]],[[1,2],[0,6]],[[2,3],[0,6]],[[0,6],[2,3]]],lt=[[0,0,6,6,4,6],[0,0,1,1,2,1],[4,6,0,0,6,4],[2,1,0,0,1,2],[6,4,4,2,0,0],[1,2,2,4,0,0]],ut=[[0,0,7,7,8,7],[0,0,5,5,3,5],[8,7,0,0,7,8],[3,5,0,0,5,3],[7,8,8,3,0,0],[5,3,3,8,0,0]],ct=[[0,0,5,5,3,5],[0,0,7,7,8,7],[3,5,0,0,5,3],[8,7,0,0,7,8],[5,3,3,8,0,0],[7,8,8,3,0,0]],st=[[0,0,1,1,2,1],[0,0,6,6,4,6],[2,1,0,0,1,2],[4,6,0,0,6,4],[1,2,2,4,0,0],[6,4,4,2,0,0]];function ht(e){for(var t=0;t<6;t++)$e[t]=ot[at[e][t]],nt[t]=ot[ft[e][t]],_e[t]=it[lt[e][t]],et[t]=it[ut[e][t]],tt[t]=it[ct[e][t]],rt[t]=it[st[e][t]];ie=!1}function vt(e,t,r,n){switch(n){case 2:wt(e,t,4-r,0),wt(e,t,4-r,1);break;case 3:wt(e,t,4-r,0),wt(e,t,4-r,1),wt(e,t,4-r,6),wt(e,1^t,r,6),wt(e,1^t,r,1),wt(e,1^t,r,0);break;case 4:wt(e,t,4-r,0),wt(e,1^t,r,0);break;case 5:wt(e,1^t,4-r,0),wt(e,t,4-r,0);break;default:wt(e,t,4-r,n)}}var dt=[0,1,2,3,4,5,11,17,23,29,35,34,33,32,31,30,24,18,12,6],gt=[7,8,9,10,16,22,28,27,26,25,19,13],mt=[14,15,21,20],bt=[1,6,-1,-6,1,6,-1,-6],Mt=[0,5,35,30,6,4,29,31,12,3,23,32],pt=[[3,3,3,0],[2,1,1,1],[3,3,0,0],[2,1,1,2],[3,2,0,0],[2,2,0,1]],kt=[[7,7,7,4],[6,5,5,5],[7,7,4,4],[6,5,5,6],[7,6,4,4],[6,6,4,5]],Lt=[];function wt(e,t,r,n){yt(e,t,r,n),1==Me&&r>0&&r<4&&(yt(H,t,r,n),function(e,t,r){if(6==r)return 4==e&&(xt(18,1,3),1==t?xt(12,1,1):2==t?xt(12,1,2):3==t&&xt(2,6,0)),5==e&&(xt(12,1,3),1==t?xt(3,6,0):2==t?xt(18,1,2):3==t&&xt(18,1,1)),2==e&&Ut(4,4-t),void(3==e&&Ut(5,t));var n=1==r;if(0==n)for(var o=0;o<36;o++)H[e][o]=(H[e][o]+4-t)%4;4==e&&(0==n&&(xt(30,1,3),1==t?xt(0,1,1):2==t?xt(0,1,2):3==t&&xt(0,6,0)),1==n&&(xt(24,1,3),1==t?xt(6,1,1):2==t?xt(6,1,2):3==t&&xt(1,6,0)));5==e&&(0==n&&(xt(0,1,3),1==t?xt(5,6,0):2==t?xt(30,1,2):3==t&&xt(30,1,1)),1==n&&(xt(6,1,3),1==t?xt(4,6,0):2==t?xt(24,1,2):3==t&&xt(24,1,1)));0==n&&(2==e&&Ut(0,4-t),3==e&&Ut(1,t));1==n&&(2==e&&Ut(2,4-t),3==e&&Ut(3,t))}(t,r,n))}function yt(e,t,r,n){if(!n){for(var o=0;o<20;o++)Lt[(o+5*r)%20]=e[t][dt[o]];for(o=0;o<20;o++)e[t][dt[o]]=Lt[o];for(o=0;o<12;o++)Lt[(o+3*r)%12]=e[t][gt[o]];for(o=0;o<12;o++)e[t][gt[o]]=Lt[o];for(o=0;o<4;o++)Lt[(o+r)%4]=e[t][mt[o]];for(o=0;o<4;o++)e[t][mt[o]]=Lt[o]}var a=6*r;for(o=0;o<4;o++)for(var f=_[t][o],i=n?kt[t][o]:pt[t][o],l=bt[i],u=n>1?Mt[i+4]:Mt[i],c=0;c<6;c++,a++)Lt[a%24]=e[f][c*l+u];for(o=0,a=0;o<4;o++)for(f=_[t][o],i=n?kt[t][o]:pt[t][o],l=bt[i],u=n>1?Mt[i+4]:Mt[i],c=0;c<6;c++,a++)e[f][c*l+u]=Lt[a]}var Rt,At,Tt,Dt,St,Ft,Bt,Et=[[[0,1,0],[0,6,1],[0,6,4],[0,1,5]],[[30,1,0],[5,6,1],[5,6,4],[30,1,5]],[[6,1,0],[1,6,1],[1,6,4],[6,1,5]],[[24,1,0],[4,6,1],[4,6,4],[24,1,5]],[[12,1,0],[2,6,1],[2,6,4],[12,1,5]],[[18,1,0],[3,6,1],[3,6,4],[18,1,5]]];function xt(e,t,r){for(var n=e,o=0;o<6;n+=t,o++)H[r][n]=(H[r][n]+2)%4}function Ut(e,t){for(var r=0;r<4;r++)for(var n=Et[e][r],o=n[0],a=0;a<6;o+=n[1],a++)H[n[2]][o]=(H[n[2]][o]+t)%4}var It,Pt,Ct=[],Wt=[],Xt=[],Yt=[],qt=[[[0,0],[6,0],[6,1],[0,1]],[[6,0],[6,6],[5,6],[5,0]],[[6,6],[0,6],[0,5],[6,5]],[[0,6],[0,0],[1,0],[1,6]],[[0,1],[6,1],[6,2],[0,2]],[[5,0],[5,6],[4,6],[4,0]],[[0,4],[6,4],[6,5],[0,5]],[[2,0],[2,6],[1,6],[1,0]],[[0,2],[6,2],[6,3],[0,3]],[[4,0],[4,6],[3,6],[3,0]],[[0,3],[6,3],[6,4],[0,4]],[[3,0],[3,6],[2,6],[2,0]]],Ot=[[1,0],[0,1],[-1,0],[0,-1],[1,0],[0,1],[-1,0],[0,-1],[1,0],[0,1],[-1,0],[0,-1]],Qt=[[1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1],[1,-1,1,-1,1,-1,1,-1,1,-1,1,-1],[1,-1,1,-1,1,-1,1,-1,1,-1,1,-1],[-1,1,-1,1,-1,1,-1,1,-1,1,-1,1],[1,-1,1,-1,1,-1,1,-1,1,-1,1,-1]],Nt=[],Zt=[],zt=[[[1,0,0],[0,0,0],[0,0,1]],[[1,0,0],[0,1,0],[0,0,0]],[[0,0,0],[0,1,0],[0,0,1]]],Ht=[[[0,0,1],[0,0,0],[-1,0,0]],[[0,1,0],[-1,0,0],[0,0,0]],[[0,0,0],[0,0,1],[0,-1,0]]],Gt=[[[0,0,0],[0,1,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,1]],[[1,0,0],[0,0,0],[0,0,0]]],Kt=[1,-1,1,-1,1,-1],jt=[],Jt=[],Vt=[],$t=[],_t=[],er=[],tr=[],rr=[],nr=[],or=[],ar=[],fr=[],ir=[[1,0,0,0,0,0],[0,1,0,0,0,0],[1,1,0,0,0,0],[1,1,1,1,1,1],[1,0,0,0,0,1],[1,0,0,0,0,2],[0,0,1,0,0,0]],lr=[],ur=[[0,2,2,2,2,2],[2,1,2,2,2,2],[2,2,2,2,2,2],[2,2,2,2,2,2],[2,2,2,2,2,2],[2,2,2,2,2,2],[2,2,6,2,2,2]],cr=[[0,1,2,3,4,5],[5,4,3,2,1,0],[0,5,4,3,1,2]];function sr(){if(hn.save(),hn.fillStyle=t,1!=Y||0!=ve&&!T?(Qr(hn,0,0,Rt,At),hn.fillRect(0,0,Rt,At)):(Qr(hn,0,0,Rt,At-vn),hn.fillRect(0,0,Rt,At-vn)),Bt=0,ie)wr(te,re,ne,Ve,3,9);else{for(var e=Math.cos(h+s),n=Math.sin(h+s)*Kt[u],l=0;l<3;l++){jt[l]=0,Jt[l]=0;for(var v=0;v<3;v++){var d=Math.floor(u/2);jt[l]+=te[v]*(Gt[d][l][v]+zt[d][l][v]*e+Ht[d][l][v]*n),Jt[l]+=re[v]*(Gt[d][l][v]+zt[d][l][v]*e+Ht[d][l][v]*n)}}Pr(Vt,jt,Jt);var g=Math.cos(h-s),m=Math.sin(h-s)*Kt[u];for(l=0;l<3;l++){$t[l]=0,_t[l]=0;for(v=0;v<3;v++){d=Math.floor(u/2);$t[l]+=te[v]*(Gt[d][l][v]+zt[d][l][v]*g+Ht[d][l][v]*m),_t[l]+=re[v]*(Gt[d][l][v]+zt[d][l][v]*g+Ht[d][l][v]*m)}}Pr(er,$t,_t),or[0]=te,ar[0]=re,fr[0]=ne,or[1]=jt,ar[1]=Jt,fr[1]=Vt,or[2]=$t,ar[2]=_t,fr[2]=er,lr[0]=$e,lr[1]=_e,lr[2]=et,lr[3]=tt,lr[4]=rt,lr[5]=nt,Ir(Er(Fr(tr,te),5+D),Er(Fr(nr,j[u]),.4)),Ir(Er(Fr(rr,te),5+D),Er(Fr(nr,j[1^u]),1/6));var b,M=xr(tr,j[u]),p=xr(rr,j[1^u]);b=M<0&&p>0?0:M>0&&p<0?1:2,wr(or[ir[c][cr[b][0]]],ar[ir[c][cr[b][0]]],fr[ir[c][cr[b][0]]],lr[cr[b][0]],ur[c][cr[b][0]],0),wr(or[ir[c][cr[b][1]]],ar[ir[c][cr[b][1]]],fr[ir[c][cr[b][1]]],lr[cr[b][1]],ur[c][cr[b][1]],1),wr(or[ir[c][cr[b][2]]],ar[ir[c][cr[b][2]]],fr[ir[c][cr[b][2]]],lr[cr[b][2]],ur[c][cr[b][2]],2),wr(or[ir[c][cr[b][3]]],ar[ir[c][cr[b][3]]],fr[ir[c][cr[b][3]]],lr[cr[b][3]],ur[c][cr[b][3]],3),wr(or[ir[c][cr[b][4]]],ar[ir[c][cr[b][4]]],fr[ir[c][cr[b][4]]],lr[cr[b][4]],ur[c][cr[b][4]],4),wr(or[ir[c][cr[b][5]]],ar[ir[c][cr[b][5]]],fr[ir[c][cr[b][5]]],lr[cr[b][5]],ur[c][cr[b][5]],5)}if(O||R||(he=-1),!(ke>0&&2==Y)){if(!T&&le.length>0){if(le[x].length>0){if(ve>0){hn.lineWidth=gn,hn.strokeStyle=i;var k=(Rt-2)*function(e,t){for(var r=0,n=0;n<t;n++)e[n]<1e3&&r++;return r}(le[x],U)/qe(le[x]);hn.fillStyle=f,hn.fillRect(dn,At-ve-dn,Rt-vn,ve),hn.fillStyle=a,hn.fillRect(dn,At-ve-dn,k,ve),hn.beginPath(),hn.rect(dn,At-ve-dn,Rt-vn,ve),hn.stroke()}var L=Qe(le[x],U)+"/"+Qe(le[x],-1)+Ye[W];hn.font="bold "+de+"px helvetica";var w=hn.measureText(L).width,y=Rt-w-2,A=At-ve-Math.floor(3*vn);Q>0?(Tr(hn,L,ge?y-vn:y,A-de),function(e,t){var n=0==U?Oe(le[x],U):U,o=Pe(le[x],0,n),a=Xe(le[x],n),f=Pe(le[x],n+1,le[x].length),i=e.measureText(o).width,l=e.measureText(a).width,u=e.measureText(f).width,c=1;c+i+l+u>Rt&&(c=Math.min(1,Rt/2-i-l/2),c=Math.max(c,Rt-i-l-u-2));l>0&&(e.fillStyle=r,e.lineWidth=2,e.strokeStyle="black",e.beginPath(),Mn<=14?e.fillRect(c+i-1,At-ve-de-Math.floor(4*vn),l+2,de+Math.floor(3*vn)):e.fillRect(c+i-1,At-ve-de-Math.floor(2*vn),l+2,de+Math.floor(vn)));i>0&&Tr(e,o,c,t);l>0&&Tr(e,a,c+i,t);u>0&&Tr(e,f,c+i+l,t)}(hn,A)):Tr(hn,L,ge?y-vn:y,A)}if(le.length>1){L=x+1+"/"+le.length,w=hn.measureText(L).width,y=Rt-w-q-Math.floor(5*vn);Tr(hn,L,y,hr()),Hr(hn,7,Rt-q/2,q/2)}}X>=0&&(hn.font="bold "+de+"px helvetica",Tr(hn,ce[X],ge?vn:0,hr()))}hn.restore(),se&&0!=Y&&function(e){var t=q%2==0?1:0;if(t+=Math.floor(vn+.5)-1,2==Y)return e.fillStyle=0==he||ke>0&&6==he?_r(o):o,e.fillRect(dn,At-q,q,q),e.lineWidth=gn,e.strokeStyle=i,e.beginPath(),e.rect(dn,At-q-dn,q,q),e.stroke(),void Hr(e,0,q/2,At-(q+1)/2-t);if(1==Y){for(var r=0,n=0;n<7;n++){var a=Math.floor((Rt-r)/(7-n));e.fillStyle=he==n?_r(o):o,e.fillRect(r,At,a,q),e.lineWidth=gn,e.strokeStyle=i,e.beginPath(),0==n?e.rect(r+dn,At-dn,a-vn,q):e.rect(r-dn,At-dn,a,q),e.stroke(),e.strokeStyle="black",Hr(e,n,r+a/2,At+q/2-t),r+=a}se=!1}}(hn)}function hr(){return Mn<10?Math.floor(10*vn):Mn<12?Math.floor(12*vn):Mn<14?Math.floor(14*vn):de}var vr=[],dr=[],gr=[],mr=[],br=[[],[],[],[],[],[]],Mr=[[],[],[],[],[],[]],pr=[[.1,.1],[.9,.1],[.9,.9],[.1,.9]],kr=[[0,0],[0,1],[1,1],[1,0]],Lr=[];function wr(e,t,r,n,o,a){for(var f=0;f<8;f++){var i=(v=Rt<At?Rt:At-ve)/3.7*xr(J[f],t)*S,s=v/3.7*xr(J[f],r)*S;i/=1-(d=v/(5+D)*xr(J[f],e)*S)/v,s/=1-d/v,gr[f]=Rt/2+i,mr[f]=0==F?(At-ve)/2*S-s:2==F?At-ve-(At-ve)/2*S-s:(At-ve)/2-s}for(f=0;f<6;f++)for(var h=0;h<4;h++)br[f][h]=gr[V[f][h]],Mr[f][h]=mr[V[f][h]];if(B)for(f=0;f<6;f++)if(Ir(Er(Fr(tr,e),5+D),j[f]),xr(tr,j[f])<0){Er(Fr(Lr,j[f]),E);var v,d;i=(v=Rt<At?Rt:At-ve)/3.7*xr(Lr,t),s=v/3.7*xr(Lr,r);i/=1-(d=v/(5+D)*xr(Lr,e))/v,s/=1-d/v;var g=n[f][0][1]-n[f][0][0],m=n[f][1][1]-n[f][1][0];if(g>0&&m>0)for(var b=0,k=n[f][1][0];b<m;b++,k++)for(var L=0,w=n[f][0][0];L<g;L++,w++){for(h=0;h<4;h++)yr(f,h,vr,dr,w+pr[h][0],k+pr[h][1],M),vr[h]=Math.floor(vr[h]+(M?-i:i)),dr[h]=Math.floor(dr[h]-s);1==Me?(jr(hn,vr,dr,"#fdfdfd"),Jr(hn,vr,dr,f,H[f][6*k+w],Z[z[f][6*k+w]])):jr(hn,vr,dr,Z[z[f][6*k+w]])}}var y=0;y=u>3?n[0][0][0]:u<2?n[2][0][0]:n[1][0][0];for(f=0;f<6;f++){g=n[f][0][1]-n[f][0][0],m=n[f][1][1]-n[f][1][0];if(g<=0||m<=0){var A=0;if(0!=y&&5!=y||0!=o?1!=y&&4!=y||1!=o?2!=y&&3!=y||6!=o?4!=c&&5!=c||2==o&&(1==y&&f%2==0||4==y&&f%2==1)&&(A=1/6):A=f%2==u%2?1/3:.5:A=f%2==u%2?1/6:2/3:A=5/6,0!=A){for(h=0;h<4;h++){var T=$[f][h];vr[h]=Math.floor(br[f][h]+(br[1^f][T]-br[f][h])*A),dr[h]=Math.floor(Mr[f][h]+(Mr[1^f][T]-Mr[f][h])*A),M&&(vr[h]=Rt-vr[h])}jr(hn,vr,dr,l)}}else{for(h=0;h<4;h++)yr(f,h,vr,dr,n[f][0][kr[h][0]],n[f][1][kr[h][1]],M);a<5?jr(hn,vr,dr,l):(Ir(Er(Fr(tr,e),5+D),j[f]),xr(tr,j[f])>0&&jr(hn,vr,dr,l))}}for(f=0;f<6;f++)if(Ir(Er(Fr(tr,e),5+D),j[f]),xr(tr,j[f])>0){g=n[f][0][1]-n[f][0][0],m=n[f][1][1]-n[f][1][0];if(g>0&&m>0)for(b=0,k=n[f][1][0];b<m;b++,k++)for(L=0,w=n[f][0][0];L<g;L++,w++){for(h=0;h<4;h++)yr(f,h,vr,dr,w+pr[h][0],k+pr[h][1],M);1==Me?(jr(hn,vr,dr,"#fdfdfd"),Jr(hn,vr,dr,f,H[f][6*k+w],Z[z[f][6*k+w]])):jr(hn,vr,dr,Z[z[f][6*k+w]])}if(!p||R)continue;var x=(br[f][1]-br[f][0]+br[f][2]-br[f][3])/6,U=(br[f][3]-br[f][0]+br[f][2]-br[f][1])/6,I=(Mr[f][1]-Mr[f][0]+Mr[f][2]-Mr[f][3])/6,P=(Mr[f][3]-Mr[f][0]+Mr[f][2]-Mr[f][1])/6;if(3==o)for(h=0;h<12;h++){for(T=0;T<4;T++)yr(f,T,Ct[Bt],Wt[Bt],qt[h][T][0],qt[h][T][1],!1);if(Xt[Bt]=(x*Ot[h][0]+I*Ot[h][1])*Qt[f][h],Yt[Bt]=(U*Ot[h][0]+P*Ot[h][1])*Qt[f][h],Nt[Bt]=_[f][h%4],Zt[Bt]=h>3?1:0,(Bt>7&&Bt<12||Bt>19&&Bt<24||Bt>31&&Bt<36)&&(Zt[Bt]=6),36==++Bt)break}else if(0==o){if(f!=u&&g>0&&m>0){for(h=6==g?0==n[f][1][0]?0:2:0==n[f][0][0]?3:1,T=0;T<4;T++)yr(f,T,Ct[Bt],Wt[Bt],qt[h][T][0],qt[h][T][1],!1);Xt[Bt]=(x*Ot[h][0]+I*Ot[h][1])*Qt[f][h],Yt[Bt]=(U*Ot[h][0]+P*Ot[h][1])*Qt[f][h],Nt[Bt]=u,Zt[Bt]=0,Bt++}}else if(1==o){if(f!=u&&g>0&&m>0){h=6==g?1==n[f][1][0]?0:2:1==n[f][0][0]?3:1;h+=4;for(T=0;T<4;T++)yr(f,T,Ct[Bt],Wt[Bt],qt[h][T][0],qt[h][T][1],!1);Xt[Bt]=(x*Ot[h][0]+I*Ot[h][1])*Qt[f][h],Yt[Bt]=(U*Ot[h][0]+P*Ot[h][1])*Qt[f][h],Nt[Bt]=u,Zt[Bt]=1,Bt++}}else if(6==o&&f!=u&&g>0&&m>0){h=6==g?2==n[f][1][0]?0:2:2==n[f][0][0]?3:1;h+=8;for(T=0;T<4;T++)yr(f,T,Ct[Bt],Wt[Bt],qt[h][T][0],qt[h][T][1],!1);Xt[Bt]=(x*Ot[h][0]+I*Ot[h][1])*Qt[f][h],Yt[Bt]=(U*Ot[h][0]+P*Ot[h][1])*Qt[f][h],Nt[Bt]=u,Zt[Bt]=6,Bt++}}}function yr(e,t,r,n,o,a,f){o/=6,a/=6;var i=br[e][0]+(br[e][1]-br[e][0])*o,l=Mr[e][0]+(Mr[e][1]-Mr[e][0])*o,u=br[e][3]+(br[e][2]-br[e][3])*o,c=Mr[e][3]+(Mr[e][2]-Mr[e][3])*o;r[t]=Math.floor(.5+i+(u-i)*a),n[t]=Math.floor(.5+l+(c-l)*a),f&&(r[t]=Rt-r[t])}var Rr=[1,1,-1,-1,-1,1,1,-1,-1,0,1,0,0,1,0,-1],Ar=[];function Tr(e,t,r,o){if(ge){e.fillStyle="black";for(var a=0;a<Ar.length;a+=2)e.fillText(t,r+Ar[a],o+Ar[a+1]);e.fillStyle="white"}else e.fillStyle=n;e.fillText(t,r,o)}var Dr=[-1,3,1,-1,0,2,4,-1],Sr=[];function Fr(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Br(e){var t=Math.sqrt(xr(e,e));return e[0]/=t,e[1]/=t,e[2]/=t,e}function Er(e,t){return e[0]*=t,e[1]*=t,e[2]*=t,e}function xr(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ur(e,t){return e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],e}function Ir(e,t){return e[0]-=t[0],e[1]-=t[1],e[2]-=t[2],e}function Pr(e,t,r){return e[0]=t[1]*r[2]-t[2]*r[1],e[1]=t[2]*r[0]-t[0]*r[2],e[2]=t[0]*r[1]-t[1]*r[0],e}function Cr(e,t){var r=Math.sin(t),n=Math.cos(t),o=e[1]*n-e[2]*r,a=e[1]*r+e[2]*n;return e[1]=o,e[2]=a,e}function Wr(e,t){var r=Math.sin(t),n=Math.cos(t),o=e[0]*n-e[2]*r,a=e[0]*r+e[2]*n;return e[0]=o,e[2]=a,e}function Xr(e,t){var r=Math.sin(t),n=Math.cos(t),o=e[0]*n-e[1]*r,a=e[0]*r+e[1]*n;return e[0]=o,e[1]=a,e}function Yr(e,t,r){return"#"+qr(e.toString(16))+qr(t.toString(16))+qr(r.toString(16))}function qr(e){return("00"+e).substring(e.length)}function Or(e){for(var t=0,r=0;r<6;r++)for(var n=0;n<16;n++)if(e[r].toLowerCase()=="0123456789abcdef".charAt(n)){t++;break}return 6==t}function Qr(e,t,r,n,o){e.beginPath(),e.moveTo(t,r),e.lineTo(t+n,r),e.lineTo(t+n,r+o),e.lineTo(t,r+o),e.lineTo(t,r),e.closePath(),e.clip()}var Nr,Zr,zr=[];function Hr(e,t,r,n){switch(r=Math.floor(r),n=Math.floor(n),t){case 0:Kr(e,r-zr[4],n-zr[3],zr[3],zr[6]+1),Gr(e,r+zr[4],n,-1);break;case 1:Kr(e,r+zr[1],n-zr[3],zr[3],zr[6]+1),Gr(e,r-zr[1],n,-1);break;case 2:Gr(e,r+zr[1],n,-1);break;case 3:R?Kr(e,r-zr[4],n-zr[3],zr[7],zr[7]):(Kr(e,r-zr[4],n-zr[2],zr[7],zr[5]),Kr(e,r-zr[2],n-zr[4],zr[3],zr[9]));break;case 4:Gr(e,r-zr[2],n,1);break;case 5:Kr(e,r-zr[4],n-zr[3],zr[3],zr[6]+1),Gr(e,r,n,1);break;case 6:Kr(e,r+zr[1],n-zr[3],zr[3],zr[6]+1),Gr(e,r-zr[4],n,1);break;case 7:e.fillStyle=7==he?_r(o):o,e.fillRect(Rt-q-zr[1]-dn,zr[1]+dn,q,q),e.lineWidth=gn,e.strokeStyle=i,e.beginPath(),vn%2==0?e.rect(Rt-q-zr[1],zr[1],q,q):e.rect(Rt-q-zr[1]-dn,zr[1]+dn,q,q),e.stroke(),Gr(e,r-zr[3],n+zr[1],1)}}function Gr(e,t,r,n){var o=3*vn,a=[],f=[];a[0]=t,a[1]=t+n,a[2]=t+4*vn*n,a[3]=t+n,a[4]=t,f[0]=r-o,f[1]=r-o,f[2]=r,f[3]=r+o,f[4]=r+o,function(e,t,r){e.beginPath(),e.moveTo(t[0]+dn,r[0]+dn);for(var n=1;n<5;n++)e.lineTo(t[n]+dn,r[n]+dn);e.closePath(),e.fillStyle="white",e.strokeStyle="black",e.fill(),e.lineWidth=gn,e.stroke()}(e,a,f)}function Kr(e,t,r,n,o){e.lineWidth=gn,e.beginPath(),e.rect(t+dn,r+dn,n-1,o-1),e.fillStyle="white",e.fill(),e.strokeStyle="black",e.stroke()}function jr(e,t,r,n){e.beginPath(),e.moveTo(t[0],r[0]),e.lineTo(t[1],r[1]),e.lineTo(t[2],r[2]),e.lineTo(t[3],r[3]),e.closePath(),e.fillStyle=n,e.strokeStyle=n,e.fill(),e.lineWidth=.7,e.stroke()}function Jr(e,t,r,n,o,a){var f=[],i=[],l=[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]];if(2!=we||"#ffffff"!=a){for(var u=0;u<4;u++)f[u]=Math.floor(t[u]+.05*(t[l[2][u]]-t[u])),i[u]=Math.floor(r[u]+.05*(r[l[2][u]]-r[u]));0==n&&(o=(o+1)%4),4==n&&(o=(o+3)%4);var c=l[o][0],s=l[o][1],h=l[o][2],v=l[o][3],d=.26*(f[h]-f[s]),g=.26*(i[h]-i[s]),m=(f[c]-f[s])/2,b=i[s]+(i[c]-i[s])/2,M=i[h]+(i[v]-i[h])/2,p=(f[v]-f[h])/2,k=1^o;e.fillStyle=a,e.beginPath(),e.moveTo(f[c]+(f[v]-f[c])/2,i[c]+(i[v]-i[c])/2),e.lineTo(f[k]+m,b),e.lineTo(f[k]+d+m,b+g),e.lineTo(f[k]+d,i[k]+g),k=(k+1)%4,e.lineTo(f[k]-d,i[k]-g),e.lineTo(f[k]-d+p,M-g),e.lineTo(f[k]+p,M),e.closePath(),e.fill(),e.lineWidth=.6*vn,e.strokeStyle="black",e.stroke()}}function Vr(e){return"white"==e?"#FFFFFF":"black"==e?"#000000":"#808080"}function $r(e){return"#"!=e.substring(0,1)&&(e=Vr(e)),(299*parseInt(e.substring(1,3),16)+587*parseInt(e.substring(3,5),16)+114*parseInt(e.substring(5,7),16))/1e3}function _r(e){"#"!=e.substring(0,1)&&(e=Vr(e));var t=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16);return Yr(t=Math.floor(.7*t),r=Math.floor(.7*r),n=Math.floor(.7*n))}function en(e,t){if(e>Ge)setTimeout(en,0,e,t);else{if(!C){for(var r=le[x];U<r.length;){if(r[U]>=1e3)X=r[U]-1e3;else if(-1!=r[U]){var n=r[U]%4+1,o=Math.floor(r[U]/4)%7,a=Math.floor(r[U]/28);vt(z,a,4==n?2:n,o)}U++}return R=!1,se=!0,sr(),void Ge++}var f,i,l,g,M,p,L=t;m=!1,requestAnimationFrame(function e(){if(D){if(D=!1,p=!1,k)L>0?U>=r.length&&(U=0,Ze(r)):(X=-1,0==U&&(U=r.length));else if(L>0&&U>=r.length||L<0&&0==U)return b=!1,R=!1,Ge++,se=!0,void sr();R=!0,se=!0}if(S&&(S=!1,L<0&&(E=!1,0==U?(E=!0,B=!0):U--),!E)){if(A=!1,-1==r[U]){if(sr(),!P)for(f=Date.now();Date.now()-f<1e3;);}else r[U]>=1e3?X=L>0?r[U]-1e3:-1:A=!0;if(A){n=r[U]%4+1,o=Math.floor(r[U]/4)%7;var t=n<3;if(4==n&&(n=2),L<0&&(t=!t,n=4-n),a=Math.floor(r[U]/28),w=!1,ie=!0,y=!0,h=0,ee[a]>0&&(t=!t),C){M=Math.PI/2,g=t?1:-1;var x=67*v;2==n&&(M=Math.PI,x=67*d),w=!0,u=a,c=o,ht(a),f=Date.now(),i=f,l=g*M/x,s=0}}else F=!0}if(!E&&(A&&(C?s*g<M?(sr(),(m||b)&&(F=!0),i=Date.now(),s=l*(i-f)):(F=!0,me&&!P&&(s-=g*M,sr(),U>0&&U<r.length-1&&(F=!1,U+=L,f=i,i=Date.now(),s=l*(i-f)))):F=!0),F)){if(F=!1,S=!0,A&&(s=0,w=!1,ie=!0,vt(z,a,n,o),y=!1,C&&sr(),P&&(p=!0)),L>0){if(++U<r.length&&r[U]>=1e3&&(X=r[U]-1e3,U++),U==r.length)if(T){U=0,Ze(r);for(var I=0;I<6;I++)for(var W=0;W<36;W++)z[I][W]=G[I][W],H[I][W]=K[I][W]}else B=!0}else X=-1;(m||b||p)&&(B=!0)}if(B)return B=!1,D=!0,He<=Ge+1&&(R=!1),se=!0,0==he&&Je(),sr(),T&&(Je(),T=!1),b=!1,void Ge++;requestAnimationFrame(e)});var A=!1,D=!0,S=!0,F=!1,B=!1,E=!1;r=T?ue[0]:le[x]}}document.addEventListener("touchstart",ln),document.addEventListener("touchmove",kn),document.addEventListener("touchend",fn),document.addEventListener("mousedown",ln),document.addEventListener("mousemove",kn),document.addEventListener("mouseup",fn),document.addEventListener("contextmenu",yn);var tn=!1,rn=!0,nn=document.getElementsByTagName("div"),on=nn.length>0&&"wrap"==nn[0].className;function an(e){on?nn[0].style.overflow=e:document.body.style.overflow=e}function fn(e){if(tn&&void 0!==e.touches&&(e.preventDefault(),an("auto")),tn?setTimeout(function(){rn=!0},100):rn=!0,tn=!1,A=!1,O)O=!1,se=!0,sr();else if(w&&!y){w=!1,h+=s,s=0;for(var t=h;t<0;)t+=32*Math.PI;var r=Math.floor(8*t/Math.PI)%16;(be||r%4==0||r%4==3)&&(r=Math.floor((r+2)/4),ee[u]>0&&(r=(4-r)%4),h=0,ie=!0,vt(z,u,r,c)),sr()}}function ln(e){var t=sn.getBoundingClientRect(),r=Math.floor(t.left),n=Math.floor(t.top);if(void 0===e.touches)var o=e.clientX,a=e.clientY;else o=e.touches[0].clientX,a=e.touches[0].clientY;o<r||o>r+Rt/vn||a<n||a>n+(At+q)/vn||(e.preventDefault(),tn=!0,rn=!1,void 0!==e.touches&&(e.preventDefault(),an("hidden")),Nr=r,Zr=n,St=Tt=Ln(e),Ft=Dt=wn(e),g=!1,(he=function(e,t){if(0==Y)return-1;if(le.length>1&&e>=Rt-q&&e<Rt&&t>=0&&t<q)return 7;if(2==Y)return e>=0&&e<q&&t>=At-q&&t<At?0:-1;if(t<At)return-1;for(var r=0,n=0;n<7;n++){var o=(Rt-r)/(7-n);if(e>=r&&e<r+o&&t>=At&&t<At+q)return n;r+=o}return-1}(Tt,Dt))>=0?(O=!0,3==he?R?je():M=!M:0==he?ke>0&&2==Y?1==pe?(pe=!1,je(),Je()):(pe=!0,Ke(Dr[he=6])):(je(),Je()):7==he?(je(),setTimeout(Je,10),x=x<le.length-1?x+1:0):Ke(Dr[he]),se=!0,sr()):ve>0&&le.length>0&&le[x].length>0&&Dt>At-ve&&Dt<=At?L&&(je(),un(He++)):(M&&(St=Tt=Rt-Tt),void 0===e.touches?!p||R||0!=e.button||e.shiftKey||(g=!0):p&&!R&&(g=!0)))}function un(e){if(e>Ge)setTimeout(un,0,e);else{var t=qe(le[x]),r=Math.floor(((Tt-1)*t*2/(Rt-2)+1)/2);(r=Math.max(0,Math.min(t,r)))>0&&(r=Oe(le[x],r)),r>U&&ze(z,le[x],U,r-U,!1),r<U&&ze(z,le[x],r,U-r,!0),U=r,A=!0,sr(),R=!1,Ge++}}var cn,sn,hn,vn,dn,gn,mn,bn,Mn,pn;Sr=[];function kn(e){if(tn&&!O){if(A){je();var t=qe(le[x]),r=Math.floor(((Ln(e)-1)*t*2/(Rt-2)+1)/2);return(r=Math.max(0,Math.min(t,r)))>0&&(r=Oe(le[x],r)),r>U&&ze(z,le[x],U,r-U,!1),r<U&&ze(z,le[x],r,U-r,!0),U=r,void sr()}var n=M?Rt-Ln(e):Ln(e),o=wn(e),a=n-Tt,f=o-Dt;if(p&&g&&!w&&!R){St=n,Ft=o;for(var i=0;i<Bt;i++){var l=Ct[i][0],h=Ct[i][1]-l,v=Ct[i][3]-l,d=Wt[i][0],m=Wt[i][1]-d,b=Wt[i][3]-d,k=(b*(Tt-l)-v*(Dt-d))/(h*b-v*m),L=(-m*(Tt-l)+h*(Dt-d))/(h*b-v*m);if(k>0&&k<1&&L>0&&L<1){if(a*a+f*f<144)return;if(It=Xt[i],Pt=Yt[i],Math.abs(It*a+Pt*f)/Math.sqrt((It*It+Pt*Pt)*(a*a+f*f))>.75){w=!0,u=Nt[i],c=Zt[i];break}}}g=!1,Tt=St,Dt=Ft}a=(n-Tt)/vn,f=(o-Dt)/vn,!w||R?(Br(Ur(te,Er(Fr(Sr,re),-.016*a))),Br(Pr(re,ne,te)),Br(Ur(te,Er(Fr(Sr,ne),.016*f))),Br(Pr(ne,te,re)),Tt=n,Dt=o):(ie&&ht(u),s=.03*(It*a+Pt*f)/Math.sqrt(It*It+Pt*Pt)),sr()}}function Ln(e){return void 0===e.touches?(e.clientX-Nr)*vn:(e.touches[0].clientX-Nr)*vn}function wn(e){return void 0===e.touches?(e.clientY-Zr)*vn:(e.touches[0].clientY-Zr)*vn}function yn(e){rn||e.preventDefault()}function Rn(){clearTimeout(cn),cn=setTimeout(function(){An(),se=!0,sr()},20)}function An(){At=pn.clientHeight-1,Rt=pn.clientWidth-1,sn.style.width=Rt+"px",sn.style.height=At+"px",vn=devicePixelRatio,dn=vn/2,At=Math.floor(At*vn),Rt=Math.floor(Rt*vn),sn.width=Rt,sn.height=At,gn=vn,q=Math.floor(mn*vn),ve=Math.floor(bn*vn),de=Math.floor(Mn*vn);for(var e=1;e<10;e++)zr[e]=e*vn;for(e=0;e<Rr.length;e++)Ar[e]=Rr[e]*vn;1==Y&&(At-=q)}function Tn(e,t){var r,n,o=["R","L","F","B","U","D"],a=["","m","n"],f=["","2","'"],i=-1,l=-1,u=-1,c="";0==t&&(t=10*e);for(var s=0;s<t;s++){for(;i==l||Math.floor(i/2)==Math.floor(l/2)&&i==u;)i=Math.floor(6*Math.random());u=l,l=i,r=Math.floor(3*Math.random()),e<=3?c+=""+o[i]+f[r]+" ":(n=Math.floor(Math.random()*(e>4?3:2)),5==e&&1==n&&(n=0),c+=""+o[i]+a[n]+f[r]+" ")}return c}window.addEventListener("resize",Rn);var Dn=[];function Sn(){document.removeEventListener("mousedown",ln),document.removeEventListener("touchstart",ln),document.removeEventListener("touchmove",kn),document.removeEventListener("touchend",fn),document.removeEventListener("mousedown",ln),document.removeEventListener("mousemove",kn),document.removeEventListener("mouseup",fn),document.removeEventListener("contextmenu",yn),window.removeEventListener("resize",Rn)}!function(){sn=document.createElement("canvas"),void 0!==e&&function(){for(var t=e.split("&"),r=0;r<t.length;r++){var n=t[r].split("=");void 0!==n[1]&&(Dn[n[0]]=decodeURIComponent(n[1].trim()))}}();var t=Se("id");if(null!=t)(pn=document.getElementById(t)).innerHTML="";else if(null!=document.currentScript)pn=document.currentScript.parentNode;else{var r=document.getElementsByTagName("script"),n=r[r.length-1];pn=n.parentNode}null!=pn.id&&"undefined"!=typeof removeListeners&&(removeListeners[pn.id]=Sn);for(var o=0;o<6;o++)z[o]=[],H[o]=[],G[o]=[],K[o]=[];for(o=0;o<36;o++)Ct[o]=[],Wt[o]=[];x=0,h=0,Te()}()}
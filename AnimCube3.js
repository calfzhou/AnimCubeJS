"use strict";function AnimCube3(e){var t,r,n,o,a,f,l,i,u,s,c,h,v,d,g,m,b,M,p,k,L,w,y,T,R,S,A,F,D,x,E,B,I,U,P,C,X,W,Y,z,q,O,Q,Z,N,H=[],G=[],K=[],j=[],J=[],V=[],$=[[0,-1,0],[0,1,0],[0,0,-1],[0,0,1],[-1,0,0],[1,0,0]],_=[[-1,-1,-1],[1,-1,-1],[1,-1,1],[-1,-1,1],[-1,1,-1],[1,1,-1],[1,1,1],[-1,1,1]],ee=[[0,1,2,3],[4,7,6,5],[0,4,5,1],[2,6,7,3],[0,3,7,4],[1,5,6,2]],te=[[0,3,2,1],[0,3,2,1],[3,2,1,0],[3,2,1,0],[0,3,2,1],[0,3,2,1]],re=[[2,5,3,4],[4,3,5,2],[4,1,5,0],[5,1,4,0],[0,3,1,2],[2,1,3,0]],ne=[1,1,-1,-1,-1,-1],oe=[0,0,-1],ae=[1,0,0],fe=[],le=[],ie=[],ue=[],se=!0,ce=[],he=[],ve=[],de=!0,ge=-1,me=6,be=12,Me=!0,pe=!1,ke=!1,Le=!1,we=!1,ye=!1,Te=0,Re=0,Se=0,Ae=0,Fe=[3,2,0,5,1,4],De=[[6,3,0,7,4,1,8,5,2],[2,5,8,1,4,7,0,3,6],[0,1,2,3,4,5,6,7,8],[0,1,2,3,4,5,6,7,8],[6,3,0,7,4,1,8,5,2],[0,1,2,3,4,5,6,7,8]];function xe(){var e=Be("config");null!=e?function(e){var t=new XMLHttpRequest;function r(){4==t.readyState&&(200==t.status?function(e){for(var t=e.split("\n"),r=0;r<t.length;r++){var n=t[r].split("=");void 0!==n[1]&&(H[n[0]]=n[1].trim())}}(t.responseText):console.log("Error loading config file: "+e),Ee())}t.onreadystatechange=r,t.open("GET",e,!0),t.send()}(e):Ee()}function Ee(){G[0]=Ur(255,128,64),G[1]=Ur(255,0,0),G[2]=Ur(0,255,0),G[3]=Ur(0,0,255),G[4]=Ur(153,153,153),G[5]=Ur(170,170,68),G[6]=Ur(187,119,68),G[7]=Ur(153,68,68),G[8]=Ur(68,119,68),G[9]=Ur(0,68,119),G[10]=Ur(255,255,255),G[11]=Ur(255,255,0),G[12]=Ur(255,96,32),G[13]=Ur(208,0,0),G[14]=Ur(0,144,0),G[15]=Ur(32,64,208),G[16]=Ur(176,176,176),G[17]=Ur(80,80,80),G[18]=Ur(255,0,255),G[19]=Ur(0,255,255),G[20]=Ur(255,160,192),G[21]=Ur(32,255,16),G[22]=Ur(0,0,0),G[23]=Ur(128,128,128);var e=Be("bgcolor");if(t=null!=e&&6==e.length&&Cr(e)?"#"+e:"gray",e=Be("butbgcolor"),o=null!=e&&6==e.length&&Cr(e)?"#"+e:t,null!=(e=Be("colors")))for(var u=0;u<10&&u<e.length/6;u++)Cr(e.substring(6*u,6*u+6))&&(G[u]="#"+e.substring(6*u,6*u+6));for(u=0;u<6;u++)for(var s=0;s<9;s++)K[u][s]=u+10;if(null!=(e=Be("supercube"))&&"1"==e){we=!0,Ie(.06);for(u=0;u<9;u++)K[0][u]=22;null!=(e=Be("scw"))&&("1"==e?Se=1:"2"==e&&(Se=2)),1==Se&&(G[10]="#000000")}if(null!=(e=Be("gabbacolors"))&&"1"==e&&(1==we?(G[11]="#fdcf00",G[12]="#fd4e0a",G[13]="#93000d",G[14]="#00702d",G[15]="#00347a"):(Ie(.06),G[11]="#ffd90a",G[12]="#ff4f0b",G[13]="#9e0b19",G[14]="#0b7d39",G[15]="#0b4186")),null!=(e=Be("borderwidth"))){for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(Ae=10*Ae+parseInt(e[u]));Ae>=0&&Ae<=20&&Ie(Ae/100)}if(we)for(u=0;u<6;u++)for(s=0;s<9;s++)j[u][s]=0;var c="lluu";if(null!=(e=Be("colorscheme"))&&6==e.length)for(u=0;u<6;u++){var h=23;for(s=0;s<23;s++)if(e[u].toLowerCase()=="0123456789wyorgbldmcpnk".charAt(s)){h=s;break}for(s=0;s<9;s++)K[u][s]=h}if("1"==(e=Be("scramble"))?Te=1:"2"==e&&(Te=2),2==Te)for(u=0;u<6;u++)for(s=0;s<9;s++)J[u][s]=K[u][s],V[u][s]=j[u][s];if(0==Te){if(null!=(e=Be("pos"))&&54==e.length){c="uuuuff","gray"==t&&(t="white");for(u=0;u<6;u++){var g=Fe[u];for(s=0;s<9;s++){var m=De[u][s];K[g][m]=23;for(var b=0;b<14;b++)if(e.charAt(9*u+s)=="DFECABdfecabgh".charAt(b)){K[g][m]=b+4;break}}}}if(null!=(e=Be("facelets"))&&54==e.length)for(u=0;u<6;u++)for(s=0;s<9;s++){K[u][s]=23;for(b=0;b<23;b++)if(e[9*u+s].toLowerCase()=="0123456789wyorgbldmcpnk".charAt(b)){K[u][s]=b;break}}if(null!=(e=Be("superfacelets"))&&54==e.length)for(u=0;u<6;u++)for(s=0;s<9;s++)for(b=0;b<4;b++)if(e[9*u+s].toLowerCase()=="0123".charAt(b)){j[u][s]=b;break}}if(null!=(e=Be("yz"))&&"1"==e&&(Le=!0),null!=(e=Be("randmoves"))){var L=0;for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(L=10*L+parseInt(e[u]));L>0&&(Re=L)}if(("random"==(e=Be("move"))||Te>0)&&(e=Tn(3,Re)),ce=null==e?[]:Ce(e,!0),P=0,z=-1,0==Te&&null!=(e=Be("initmove"))){"random"==e&&(e=Tn(3,Re));var w="#"==e?ce:Ce(e,!1);w.length>0&&je(K,w[0],0,w[0].length,!1)}if(e=Be("initrevmove"),1==Te?e=null:2==Te&&(e="#"),null!=e){"random"==e&&(e=Tn(3,Re));var y="#"==e?ce:Ce(e,!1);y.length>0&&je(K,y[0],0,y[0].length,!0)}0==Te&&null!=(e=Be("demo"))&&("random"==e&&(e=Tn(3,Re)),(he="#"==e?ce:Ce(e,!0)).length>0&&he[0].length>0&&(R=!0)),e=Be("position"),Rr(xr(fe,oe,ae)),null==e&&(e=c);var T=Math.PI/12;for(u=0;u<e.length;u++){var U=T;switch(e[u].toLowerCase()){case"d":U=-U;case"u":Br(oe,U),Br(ae,U);break;case"f":U=-U;case"b":Ir(oe,U),Ir(ae,U);break;case"l":U=-U;case"r":Er(oe,U),Er(ae,U)}}if(Rr(xr(fe,oe,ae)),v=0,d=0,null!=(e=Be("speed")))for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(v=10*v+parseInt(e[u]));if(null!=(e=Be("doublespeed")))for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(d=10*d+parseInt(e[u]));if(0==v&&(v=10),0==d&&(d=3*v/2),S=0,null==(e=Be("perspective")))S=2;else for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(S=10*S+parseInt(e[u]));var C,X=0;if(null!=(e=Be("scale")))for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(X=10*X+parseInt(e[u]));if(A=1/(1+X/10),D=!1,null!=(e=Be("hint"))){D=!0,x=0;for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(x=10*x+parseInt(e[u]));x<1?D=!1:x/=10}(E=3.7,null!=(e=Be("hinthoriz")))&&((C=parseFloat(e))>0&&(E=C));(B=3.7,null!=(e=Be("hintvert")))&&((C=parseFloat(e))>0&&(B=C));(I=0,null!=(e=Be("hintborder"))&&"1"==e&&(I=1),O=13,null!=(e=Be("buttonheight")))&&((C=parseInt(e))>=9&C<=25&&(O=C));(me=0==ce.length?0:6,q=1,"0"==(e=Be("buttonbar"))?(q=0,O=0,me=0):"1"==e?q=1:"2"!=e&&0!=ce.length||(q=2,me=0),e=Be("edit"),M="0"!=e,e=Be("repeat"),p="0"!=e,e=Be("clickprogress"),k="0"!=e,e=Be("movetext"),Z="1"==e?1:"2"==e?2:"3"==e?3:"4"==e?4:"5"==e?5:0,N=1,"0"==(e=Be("movetextspace"))&&(N=0),null!=(e=Be("textsize")))&&((C=parseInt(e))>=5&C<=40&&(be=C));(e=Be("fonttype"),Me=null==e||"1"==e,Y=0,null!=(e=Be("metric"))&&("1"==e?Y=1:"2"==e?Y=2:"3"==e&&(Y=3)),F=1,null!=(e=Be("align")))&&((C=parseInt(e))>=0&C<=3&&(F=C),C>=3&C<=99&&(F=C/100));if(null!=(e=Be("ww"))&&"1"==e&&(pe=!0),null!=(e=Be("snap"))&&"1"==e&&(ke=!0),2!=Te)for(u=0;u<6;u++)for(s=0;s<9;s++)J[u][s]=K[u][s],V[u][s]=j[u][s];for(u=0;u<3;u++)le[u]=oe[u],ie[u]=ae[u],ue[u]=fe[u];jr(t)<128?(n="white",r=function(e){"#"!=e.substring(0,1)&&(e=Kr(e));var t=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16);return t=Math.floor(1.3*t),r=Math.floor(1.3*r),n=Math.floor(1.3*n),Ur(t>255?255:t,r>255?255:r,n>255?255:n)}(t)):(n="black",r=Jr(t)),l=jr(o)<128?"white":"black",a=n,null!=(e=Be("slidercolor"))&&6==e.length&&Cr(e)&&(a="#"+e),f=Jr(t),null!=(e=Be("sliderbgcolor"))&&6==e.length&&Cr(e)&&(f="#"+e),null!=(e=Be("troughcolor"))&&6==e.length&&Cr(e)&&(f="#"+e),i="black",null!=(e=Be("cubecolor"))&&6==e.length&&Cr(e)&&(i="#"+e),z=-1,un=ln.getContext("2d"),vn=O,dn=me,gn=be,yn(),mn.appendChild(ln),lr(),R&&$e(-1)}function Be(e){var t=Rn[e];return void 0===t?H[e]:t}function Ie(e){gr[0][0]=gr[0][1]=gr[1][1]=gr[3][0]=e,gr[1][0]=gr[2][0]=gr[2][1]=gr[3][1]=1-e}var Ue=[0,0,0,0,0,0,1,1,1,3,3,3,3,3,3,2,2,2,2,2,2],Pe=[0,1,2,3,4,5,1,2,4,5,2,0,5,2,0,0,1,2,3,4,5];function Ce(e,t){if(t){for(var r=e.indexOf("{");-1!=r;)r=e.indexOf("{",r+1);if(null==ve)z=0,ve=[];else{for(var n=[],o=0;o<ve.length;o++)n[o]=ve[o];z=ve.length,ve=n}}var a=1;for(r=e.indexOf(";");-1!=r;)a++,r=e.indexOf(";",r+1);var f=[],l=0;for(r=e.indexOf(";"),a=0;-1!=r;)f[a++]=We(e.substring(l,r),t),l=r+1,r=e.indexOf(";",l);return f[a]=We(e.substring(l),t),f}var Xe=["m","t","c","s","a"];function We(e,t){var r=0,n=[],o="UDFBLRESMXYZxyzudfblr";1==Le&&(o="UDFBLRESMXZYxzyudfblr");for(var a=0;a<e.length;a++)if("."==e.charAt(a))n[r]=-1,r++;else if("{"==e.charAt(a)){a++;for(var f="";a<e.length&&"}"!=e.charAt(a);)t&&(f+=e.charAt(a)),a++;t&&(ve[z]=f,n[r]=1e3+z,z++,r++)}else for(var l=0;l<21;l++)if(e.charAt(a)==o.charAt(l)){a++;var i=Ue[l];if(n[r]=24*Pe[l],a<e.length&&0==Ue[l])for(var u=0;u<Xe.length;u++)if(e.charAt(a)==Xe[u]){i=u+1,a++;break}n[r]+=4*i,a<e.length&&("1"==e.charAt(a)?a++:"'"==e.charAt(a)||"3"==e.charAt(a)?(n[r]+=2,a++):"2"==e.charAt(a)&&(++a<e.length&&"'"==e.charAt(a)?(n[r]+=3,a++):n[r]+=1)),r++,a--;break}var s=[];for(a=0;a<r;a++)s[a]=n[a];return s}function Ye(e,t,r){if(t>=e.length)return"";for(var n="",o=t;o<r;o++){var a=Oe(e,o);""!=a&&(n+=a+(N?" ":""))}return n}var ze=[[["U","D","F","B","L","R"],["Um","Dm","Fm","Bm","Lm","Rm"],["Ut","Dt","Ft","Bt","Lt","Rt"],["Uc","Dc","Fc","Bc","Lc","Rc"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"]],[["U","D","F","B","L","R"],["~E","E","S","~S","M","~M"],["u","d","f","b","l","r"],["Z","~Z","Y","~Y","~X","X"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"]],[["U","D","F","B","L","R"],["~E","E","S","~S","M","~M"],["u","d","f","b","l","r"],["Y","~Y","Z","~Z","~X","X"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"]],[["U","D","F","B","L","R"],["u","d","f","b","l","r"],["Uu","Dd","Ff","Bb","Ll","Rr"],["QU","QD","QF","QB","QL","QR"],["UD'","DU'","FB'","BF'","LR'","RL'"],["UD","DU","FB","BF","LR","RL"]],[["U","D","F","B","L","R"],["~E","E","S","~S","M","~M"],["u","d","f","b","l","r"],["y","~y","z","~z","~x","x"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"]]],qe=["","2","'","2'"];function Oe(e,t){if(t>=e.length)return"";if(e[t]>=1e3)return"";if(-1==e[t])return".";var r=ze[Z-1][Math.floor(e[t]/4)%6][Math.floor(e[t]/24)];return"~"==r.charAt(0)?r.substring(1)+qe[(e[t]+2)%4]:r+qe[e[t]%4]}var Qe=["","q","h","s"];function Ze(e){for(var t=0,r=0;r<e.length;r++)e[r]<1e3&&t++;return t}function Ne(e,t){for(var r=0,n=0;;){for(;r<e.length&&e[r]>=1e3;)r++;if(n==t)break;r<e.length&&(n++,r++)}return r}function He(e,t){for(var r=0,n=0;n<e.length&&(n<t||t<0);n++)r+=Ge(e[n]);return r}function Ge(e){if(e<0||e>=1e3)return 0;var t=e%4,r=Math.floor(e/4)%6,n=1;switch(Y){case 1:1!=t&&3!=t||(n*=2);case 2:1!=r&&4!=r&&5!=r||(n*=2);case 3:3==r&&(n=0),3!=Y||4!=r&&5!=r||(n*=2)}return n}function Ke(e){z=e.length>0&&e[0]>=1e3?e[0]-1e3:-1}function je(e,t,r,n,o){for(var a=o?r+n:r;;){if(o){if(a<=r)break;a--}if(t[a]>=1e3)z=o?-1:t[a]-1e3;else if(t[a]>=0){var f=t[a]%4+1,l=Math.floor(t[a]/4)%6;4==f&&(f=2),o&&(f=4-f),ct(e,Math.floor(t[a]/24),f,l)}if(!o&&++a>=r+n)break}}var Je=0,Ve=0;function $e(e){if(_e(),(R||0!=ce.length&&0!=ce[U].length)&&(!R||0!=he.length&&0!=he[0].length)){switch(C=1,X=!1,W=!0,e){case 0:break;case 1:C=-1;break;case 2:X=!0;break;case 3:C=-1,X=!0;break;case 4:W=!1}Vr(Je++,C)}}function _e(){1==y&&(m=!0)}function et(){P=0,ce.length>0&&Ke(ce[U]),se=!0,b=!1;for(var e=0;e<6;e++)for(var t=0;t<9;t++)K[e][t]=J[e][t],j[e][t]=V[e][t];Te>0&&(ce=Ce(Tn(3,Re),!1)),2==Te&&je(K,ce[0],0,ce[0].length,!0);for(e=0;e<3;e++)oe[e]=le[e],ae[e]=ie[e],fe[e]=ue[e]}var tt=[[[0,3],[0,3]],[[0,3],[0,3]],[[0,3],[0,3]],[[0,3],[0,3]],[[0,3],[0,3]],[[0,3],[0,3]]],rt=[],nt=[],ot=[],at=[[[0,0],[0,0]],[[0,3],[0,3]],[[0,3],[0,1]],[[0,1],[0,3]],[[0,3],[2,3]],[[2,3],[0,3]]],ft=[[[0,0],[0,0]],[[0,3],[1,2]],[[1,2],[0,3]]],lt=[[1,0,3,3,2,3],[0,1,5,5,4,5],[2,3,1,0,3,2],[4,5,0,1,5,4],[3,2,2,4,1,0],[5,4,4,2,0,1]],it=[[0,0,2,2,1,2],[0,0,2,2,1,2],[1,2,0,0,2,1],[1,2,0,0,2,1],[2,1,1,1,0,0],[2,1,1,1,0,0]],ut=[[0,1,5,5,4,5],[1,0,3,3,2,3],[4,5,0,1,5,4],[2,3,1,0,3,2],[5,4,4,2,0,1],[3,2,2,4,1,0]];function st(e){for(var t=0;t<6;t++)rt[t]=at[lt[e][t]],ot[t]=at[ut[e][t]],nt[t]=ft[it[e][t]];se=!1}function ct(e,t,r,n){switch(n){case 3:Mt(e,1^t,r,!1);case 2:Mt(e,t,4-r,!1);case 1:Mt(e,t,4-r,!0);break;case 5:Mt(e,1^t,4-r,!1),Mt(e,t,4-r,!1);break;case 4:Mt(e,1^t,r,!1);default:Mt(e,t,4-r,!1)}}var ht=[0,1,2,5,8,7,6,3],vt=[1,3,-1,-3,1,3,-1,-3],dt=[0,2,8,6,3,1,5,7],gt=[[3,3,3,0],[2,1,1,1],[3,3,0,0],[2,1,1,2],[3,2,0,0],[2,2,0,1]],mt=[[7,7,7,4],[6,5,5,5],[7,7,4,4],[6,5,5,6],[7,6,4,4],[6,6,4,5]],bt=[];function Mt(e,t,r,n){pt(e,t,r,n),1==we&&r>0&&r<4&&(pt(j,t,r,n),function(e,t,r){if(0==r)for(var n=0;n<9;n++)j[e][n]=(j[e][n]+4-t)%4;4==e&&(0==r&&(Ft(6,1,3),1==t?Ft(0,1,1):2==t?Ft(0,1,2):3==t&&Ft(0,3,0)),1==r&&(Ft(3,1,3),1==t?Ft(3,1,1):2==t?Ft(3,1,2):3==t&&Ft(1,3,0)));5==e&&(0==r&&(Ft(0,1,3),1==t?Ft(2,3,0):2==t?Ft(6,1,2):3==t&&Ft(6,1,1)),1==r&&(Ft(3,1,3),1==t?Ft(1,3,0):2==t?Ft(3,1,2):3==t&&Ft(3,1,1)));0==r&&(2==e&&Dt(0,4-t),3==e&&Dt(1,t));1==r&&(2==e&&Dt(2,4-t),3==e&&Dt(2,t))}(t,r,n))}function pt(e,t,r,n){if(!n){for(var o=0;o<8;o++)bt[(o+2*r)%8]=e[t][ht[o]];for(o=0;o<8;o++)e[t][ht[o]]=bt[o]}var a=3*r;for(o=0;o<4;o++)for(var f=re[t][o],l=n?mt[t][o]:gt[t][o],i=vt[l],u=dt[l],s=0;s<3;s++,a++)bt[a%12]=e[f][s*i+u];for(o=0,a=0;o<4;o++)for(f=re[t][o],l=n?mt[t][o]:gt[t][o],i=vt[l],u=dt[l],s=0;s<3;s++,a++)e[f][s*i+u]=bt[a]}var kt,Lt,wt,yt,Tt,Rt,St,At=[[[0,1,0],[0,3,1],[0,3,4],[0,1,5]],[[6,1,0],[2,3,1],[2,3,4],[6,1,5]],[[3,1,0],[1,3,1],[1,3,4],[3,1,5]]];function Ft(e,t,r){for(var n=e,o=0;o<3;n+=t,o++)j[r][n]=(j[r][n]+2)%4}function Dt(e,t){for(var r=0;r<4;r++)for(var n=At[e][r],o=n[0],a=0;a<3;o+=n[1],a++)j[n[2]][o]=(j[n[2]][o]+t)%4}var xt,Et,Bt=[],It=[],Ut=[],Pt=[],Ct=[[[0,0],[3,0],[3,1],[0,1]],[[3,0],[3,3],[2,3],[2,0]],[[3,3],[0,3],[0,2],[3,2]],[[0,3],[0,0],[1,0],[1,3]],[[0,1],[3,1],[3,2],[0,2]],[[2,0],[2,3],[1,3],[1,0]]],Xt=[[1,0],[0,1],[-1,0],[0,-1],[1,0],[0,1]],Wt=[[1,1,1,1,1,-1],[1,1,1,1,1,-1],[1,-1,1,-1,1,1],[1,-1,1,-1,-1,1],[-1,1,-1,1,-1,-1],[1,-1,1,-1,1,1]],Yt=[],zt=[],qt=[[[1,0,0],[0,0,0],[0,0,1]],[[1,0,0],[0,1,0],[0,0,0]],[[0,0,0],[0,1,0],[0,0,1]]],Ot=[[[0,0,1],[0,0,0],[-1,0,0]],[[0,1,0],[-1,0,0],[0,0,0]],[[0,0,0],[0,0,1],[0,-1,0]]],Qt=[[[0,0,0],[0,1,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,1]],[[1,0,0],[0,0,0],[0,0,0]]],Zt=[1,-1,1,-1,1,-1],Nt=[],Ht=[],Gt=[],Kt=[],jt=[],Jt=[],Vt=[],$t=[],_t=[],er=[],tr=[],rr=[],nr=[[1,0,0],[0,1,0],[1,1,0],[1,1,1],[1,0,1],[1,0,2]],or=[],ar=[[0,2,2],[2,1,2],[2,2,2],[2,2,2],[2,2,2],[2,2,2]],fr=[[0,1,2],[2,1,0],[0,2,1]];function lr(){if(un.save(),un.fillStyle=t,1!=q||0!=me&&!R?(Xr(un,0,0,kt,Lt),un.fillRect(0,0,kt,Lt)):(Xr(un,0,0,kt,Lt-sn),un.fillRect(0,0,kt,Lt-sn)),St=0,se)Mr(oe,ae,fe,tt,3);else{for(var e=Math.cos(h+c),n=Math.sin(h+c)*Zt[u],i=0;i<3;i++){Nt[i]=0,Ht[i]=0;for(var v=0;v<3;v++){var d=Math.floor(u/2);Nt[i]+=oe[v]*(Qt[d][i][v]+qt[d][i][v]*e+Ot[d][i][v]*n),Ht[i]+=ae[v]*(Qt[d][i][v]+qt[d][i][v]*e+Ot[d][i][v]*n)}}xr(Gt,Nt,Ht);var g=Math.cos(h-c),m=Math.sin(h-c)*Zt[u];for(i=0;i<3;i++){Kt[i]=0,jt[i]=0;for(v=0;v<3;v++){d=Math.floor(u/2);Kt[i]+=oe[v]*(Qt[d][i][v]+qt[d][i][v]*g+Ot[d][i][v]*m),jt[i]+=ae[v]*(Qt[d][i][v]+qt[d][i][v]*g+Ot[d][i][v]*m)}}xr(Jt,Kt,jt),er[0]=oe,tr[0]=ae,rr[0]=fe,er[1]=Nt,tr[1]=Ht,rr[1]=Gt,er[2]=Kt,tr[2]=jt,rr[2]=Jt,or[0]=rt,or[1]=nt,or[2]=ot,Dr(Sr(Tr(Vt,oe),5+S),Sr(Tr(_t,$[u]),1/3)),Dr(Sr(Tr($t,oe),5+S),Sr(Tr(_t,$[1^u]),1/3));var b,M=Ar(Vt,$[u]),p=Ar($t,$[1^u]);Mr(er[nr[s][fr[b=M<0&&p>0?0:M>0&&p<0?1:2][0]]],tr[nr[s][fr[b][0]]],rr[nr[s][fr[b][0]]],or[fr[b][0]],ar[s][fr[b][0]]),Mr(er[nr[s][fr[b][1]]],tr[nr[s][fr[b][1]]],rr[nr[s][fr[b][1]]],or[fr[b][1]],ar[s][fr[b][1]]),Mr(er[nr[s][fr[b][2]]],tr[nr[s][fr[b][2]]],rr[nr[s][fr[b][2]]],or[fr[b][2]],ar[s][fr[b][2]])}if(Q||y||(ge=-1),!(Te>0&&2==q)){if(!R&&ce.length>0){if(ce[U].length>0){if(me>0){un.lineWidth=hn,un.strokeStyle=l;var k=(kt-2)*function(e,t){for(var r=0,n=0;n<t;n++)e[n]<1e3&&r++;return r}(ce[U],P)/Ze(ce[U]);un.fillStyle=f,un.fillRect(cn,Lt-me-cn,kt-sn,me),un.fillStyle=a,un.fillRect(cn,Lt-me-cn,k,me),un.beginPath(),un.rect(cn,Lt-me-cn,kt-sn,me),un.stroke()}var L=He(ce[U],P)+"/"+He(ce[U],-1)+Qe[Y];un.font="bold "+be+"px helvetica";var w=un.measureText(L).width,T=kt-w-2,A=Lt-me-Math.floor(4*sn);Z>0?(wr(un,L,Me?T-sn:T,A-be),function(e,t){var n=0==P?Ne(ce[U],P):P,o=Ye(ce[U],0,n),a=Oe(ce[U],n),f=Ye(ce[U],n+1,ce[U].length);N&&(""==a&&(o=o.substr(0,o.length-1)),""!=f&&(f=" "+f.substr(0,f.length-1)));var l=e.measureText(o).width,i=e.measureText(a).width,u=e.measureText(f).width,s=1;s+l+i+u>kt&&(s=Math.min(1,kt/2-l-i/2),s=Math.max(s,kt-l-i-u-2));i>0&&(e.fillStyle=r,e.lineWidth=2,e.strokeStyle="black",e.beginPath(),gn<=14?e.fillRect(s+l-1,Lt-me-be-Math.floor(4*sn),i+2,be+Math.floor(3*sn)):e.fillRect(s+l-1,Lt-me-be-Math.floor(2*sn),i+2,be+Math.floor(sn)));l>0&&wr(e,o,s,t);i>0&&wr(e,a,s+l,t);u>0&&wr(e,f,s+l+i,t)}(un,A)):wr(un,L,Me?T-sn:T,A)}if(ce.length>1){L=U+1+"/"+ce.length,w=un.measureText(L).width,T=kt-w-O-Math.floor(5*sn);wr(un,L,T,ir()),Yr(un,7,kt-O/2,O/2)}}z>=0&&(un.font="bold "+be+"px helvetica",wr(un,ve[z],Me?sn:0,ir()))}un.restore(),de&&0!=q&&function(e){var t=O%2==0?1:0;if(t+=Math.floor(sn+.5)-1,2==q)return e.fillStyle=0==ge||Te>0&&6==ge?Jr(o):o,e.fillRect(cn,Lt-O,O,O),e.lineWidth=hn,e.strokeStyle=l,e.beginPath(),e.rect(cn,Lt-O-cn,O,O),e.stroke(),void Yr(e,0,O/2,Lt-(O+1)/2-t);if(1==q){for(var r=0,n=0;n<7;n++){var a=Math.floor((kt-r)/(7-n));e.fillStyle=ge==n?Jr(o):o,e.fillRect(r,Lt,a,O),e.lineWidth=hn,e.strokeStyle=l,e.beginPath(),0==n?e.rect(r+cn,Lt-cn,a-sn,O):e.rect(r-cn,Lt-cn,a,O),e.stroke(),e.strokeStyle="black",Yr(e,n,r+a/2,Lt+O/2-t),r+=a}de=!1}}(un)}function ir(){return gn<10?Math.floor(10*sn):gn<12?Math.floor(12*sn):gn<14?Math.floor(14*sn):be}var ur=[],sr=[],cr=[],hr=[],vr=[[],[],[],[],[],[]],dr=[[],[],[],[],[],[]],gr=[[.1,.1],[.9,.1],[.9,.9],[.1,.9]],mr=[[0,0],[0,1],[1,1],[1,0]],br=[];function Mr(e,t,r,n,o){for(var a=0;a<8;a++){var f=(c=kt<Lt?kt:Lt-me)/3.7*Ar(_[a],t)*A,l=c/3.7*Ar(_[a],r)*A;f/=1-(h=c/(5+S)*Ar(_[a],e)*A)/c,l/=1-h/c,cr[a]=kt/2+f,hr[a]=0==F?(Lt-me)/2*A-l:1==F?(Lt-me)/2-l:2==F?Lt-me-(Lt-me)/2*A-l:(Lt-me)*(F*(1-A)+A/2)-l}for(a=0;a<6;a++)for(var s=0;s<4;s++)vr[a][s]=cr[ee[a][s]],dr[a][s]=hr[ee[a][s]];if(D)for(a=0;a<6;a++)if(Dr(Sr(Tr(Vt,e),5+S),$[a]),Ar(Vt,$[a])<0){Sr(Tr(br,$[a]),x);var c,h;f=(c=kt<Lt?kt:Lt-me)/E*Ar(br,t),l=c/B*Ar(br,r);f/=1-(h=c/(5+S)*Ar(br,e))/c,l/=1-h/c;var v=n[a][0][1]-n[a][0][0],d=n[a][1][1]-n[a][1][0];if(v>0&&d>0)for(var g=0,m=n[a][1][0];g<d;g++,m++)for(var p=0,k=n[a][0][0];p<v;p++,k++){for(s=0;s<4;s++)pr(a,s,ur,sr,k+gr[s][0],m+gr[s][1],b),ur[s]=Math.floor(ur[s]+(b?-f:f)),sr[s]=Math.floor(sr[s]-l);1==we?(Qr(un,ur,sr,"#fdfdfd"),Or(un,ur,sr,I?Jr("#fdfdfd"):"#fdfdfd"),Gr(un,ur,sr,a,j[a][3*m+k],G[K[a][3*m+k]])):(Qr(un,ur,sr,G[K[a][3*m+k]]),Or(un,ur,sr,I?Jr(G[K[a][3*m+k]]):G[K[a][3*m+k]]))}}for(a=0;a<6;a++){v=n[a][0][1]-n[a][0][0],d=n[a][1][1]-n[a][1][0];if(v<=0||d<=0){for(s=0;s<4;s++){var L=te[a][s];ur[s]=Math.floor(vr[a][s]+2*(vr[1^a][L]-vr[a][s])/3),sr[s]=Math.floor(dr[a][s]+2*(dr[1^a][L]-dr[a][s])/3),b&&(ur[s]=kt-ur[s])}Qr(un,ur,sr,i)}else{for(s=0;s<4;s++)pr(a,s,ur,sr,n[a][0][mr[s][0]],n[a][1][mr[s][1]],b);Qr(un,ur,sr,i)}}for(a=0;a<6;a++)if(Dr(Sr(Tr(Vt,e),5+S),$[a]),Ar(Vt,$[a])>0){v=n[a][0][1]-n[a][0][0],d=n[a][1][1]-n[a][1][0];if(v>0&&d>0)for(g=0,m=n[a][1][0];g<d;g++,m++)for(p=0,k=n[a][0][0];p<v;p++,k++){for(s=0;s<4;s++)pr(a,s,ur,sr,k+gr[s][0],m+gr[s][1],b);1==we?(Or(un,ur,sr,"#fdfdfd"),Qr(un,ur,sr,"#fdfdfd"),Gr(un,ur,sr,a,j[a][3*m+k],G[K[a][3*m+k]])):(Or(un,ur,sr,G[K[a][3*m+k]]),Qr(un,ur,sr,G[K[a][3*m+k]]))}if(!M||y)continue;var w=(vr[a][1]-vr[a][0]+vr[a][2]-vr[a][3])/6,T=(vr[a][3]-vr[a][0]+vr[a][2]-vr[a][1])/6,R=(dr[a][1]-dr[a][0]+dr[a][2]-dr[a][3])/6,U=(dr[a][3]-dr[a][0]+dr[a][2]-dr[a][1])/6;if(3==o)for(s=0;s<6;s++){for(L=0;L<4;L++)pr(a,L,Bt[St],It[St],Ct[s][L][0],Ct[s][L][1],!1);if(Ut[St]=(w*Xt[s][0]+R*Xt[s][1])*Wt[a][s],Pt[St]=(T*Xt[s][0]+U*Xt[s][1])*Wt[a][s],Yt[St]=re[a][s%4],s>=4&&(Yt[St]&=-2),zt[St]=Math.floor(s/4),18==++St)break}else if(0==o){if(a!=u&&v>0&&d>0){for(s=3==v?0==n[a][1][0]?0:2:0==n[a][0][0]?3:1,L=0;L<4;L++)pr(a,L,Bt[St],It[St],Ct[s][L][0],Ct[s][L][1],!1);Ut[St]=(w*Xt[s][0]+R*Xt[s][1])*Wt[a][s],Pt[St]=(T*Xt[s][0]+U*Xt[s][1])*Wt[a][s],Yt[St]=u,zt[St]=0,St++}}else if(1==o&&a!=u&&v>0&&d>0){for(s=3==v?4:5,L=0;L<4;L++)pr(a,L,Bt[St],It[St],Ct[s][L][0],Ct[s][L][1],!1);Ut[St]=(w*Xt[s][0]+R*Xt[s][1])*Wt[a][s],Pt[St]=(T*Xt[s][0]+U*Xt[s][1])*Wt[a][s],Yt[St]=u,zt[St]=1,St++}}}function pr(e,t,r,n,o,a,f){o/=3,a/=3;var l=vr[e][0]+(vr[e][1]-vr[e][0])*o,i=dr[e][0]+(dr[e][1]-dr[e][0])*o,u=vr[e][3]+(vr[e][2]-vr[e][3])*o,s=dr[e][3]+(dr[e][2]-dr[e][3])*o;r[t]=Math.floor(.5+l+(u-l)*a),n[t]=Math.floor(.5+i+(s-i)*a),f&&(r[t]=kt-r[t])}var kr=[1,1,-1,-1,-1,1,1,-1,-1,0,1,0,0,1,0,-1],Lr=[];function wr(e,t,r,o){if(Me){e.fillStyle="black";for(var a=0;a<Lr.length;a+=2)e.fillText(t,r+Lr[a],o+Lr[a+1]);e.fillStyle="white"}else e.fillStyle=n;e.fillText(t,r,o)}var yr=[-1,3,1,-1,0,2,4,-1];function Tr(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Rr(e){var t=Math.sqrt(Ar(e,e));return e[0]/=t,e[1]/=t,e[2]/=t,e}function Sr(e,t){return e[0]*=t,e[1]*=t,e[2]*=t,e}function Ar(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Fr(e,t){return e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],e}function Dr(e,t){return e[0]-=t[0],e[1]-=t[1],e[2]-=t[2],e}function xr(e,t,r){return e[0]=t[1]*r[2]-t[2]*r[1],e[1]=t[2]*r[0]-t[0]*r[2],e[2]=t[0]*r[1]-t[1]*r[0],e}function Er(e,t){var r=Math.sin(t),n=Math.cos(t),o=e[1]*n-e[2]*r,a=e[1]*r+e[2]*n;return e[1]=o,e[2]=a,e}function Br(e,t){var r=Math.sin(t),n=Math.cos(t),o=e[0]*n-e[2]*r,a=e[0]*r+e[2]*n;return e[0]=o,e[2]=a,e}function Ir(e,t){var r=Math.sin(t),n=Math.cos(t),o=e[0]*n-e[1]*r,a=e[0]*r+e[1]*n;return e[0]=o,e[1]=a,e}function Ur(e,t,r){return"#"+Pr(e.toString(16))+Pr(t.toString(16))+Pr(r.toString(16))}function Pr(e){return("00"+e).substring(e.length)}function Cr(e){for(var t=0,r=0;r<6;r++)for(var n=0;n<16;n++)if(e[r].toLowerCase()=="0123456789abcdef".charAt(n)){t++;break}return 6==t}function Xr(e,t,r,n,o){e.beginPath(),e.moveTo(t,r),e.lineTo(t+n,r),e.lineTo(t+n,r+o),e.lineTo(t,r+o),e.lineTo(t,r),e.closePath(),e.clip()}var Wr=[];function Yr(e,t,r,n){switch(r=Math.floor(r),n=Math.floor(n),t){case 0:qr(e,r-Wr[4],n-Wr[3],Wr[3],Wr[6]+1),zr(e,r+Wr[4],n,-1);break;case 1:qr(e,r+Wr[1],n-Wr[3],Wr[3],Wr[6]+1),zr(e,r-Wr[1],n,-1);break;case 2:zr(e,r+Wr[1],n,-1);break;case 3:y?qr(e,r-Wr[4],n-Wr[3],Wr[7],Wr[7]):(qr(e,r-Wr[4],n-Wr[2],Wr[7],Wr[5]),qr(e,r-Wr[2],n-Wr[4],Wr[3],Wr[9]));break;case 4:zr(e,r-Wr[2],n,1);break;case 5:qr(e,r-Wr[4],n-Wr[3],Wr[3],Wr[6]+1),zr(e,r,n,1);break;case 6:qr(e,r+Wr[1],n-Wr[3],Wr[3],Wr[6]+1),zr(e,r-Wr[4],n,1);break;case 7:e.fillStyle=7==ge?Jr(o):o,e.fillRect(kt-O-Wr[1]-cn,Wr[1]+cn,O,O),e.lineWidth=hn,e.strokeStyle=l,e.beginPath(),sn%2==0?e.rect(kt-O-Wr[1],Wr[1],O,O):e.rect(kt-O-Wr[1]-cn,Wr[1]+cn,O,O),e.stroke(),zr(e,r-Wr[3],n+Wr[1],1)}}function zr(e,t,r,n){var o=3*sn,a=[],f=[];a[0]=t,a[1]=t+n,a[2]=t+4*sn*n,a[3]=t+n,a[4]=t,f[0]=r-o,f[1]=r-o,f[2]=r,f[3]=r+o,f[4]=r+o,function(e,t,r){e.beginPath(),e.moveTo(t[0]+cn,r[0]+cn);for(var n=1;n<5;n++)e.lineTo(t[n]+cn,r[n]+cn);e.closePath(),e.fillStyle="white",e.strokeStyle="black",e.fill(),e.lineWidth=hn,e.stroke()}(e,a,f)}function qr(e,t,r,n,o){e.lineWidth=hn,e.beginPath(),e.rect(t+cn,r+cn,n-1,o-1),e.fillStyle="white",e.fill(),e.strokeStyle="black",e.stroke()}function Or(e,t,r,n){e.beginPath(),e.moveTo(t[0],r[0]),e.lineTo(t[1],r[1]),e.lineTo(t[2],r[2]),e.lineTo(t[3],r[3]),e.closePath(),e.strokeStyle=n,e.lineWidth=.7*sn,e.stroke()}function Qr(e,t,r,n){e.beginPath(),e.moveTo(t[0],r[0]),e.lineTo(t[1],r[1]),e.lineTo(t[2],r[2]),e.lineTo(t[3],r[3]),e.closePath(),e.fillStyle=n,e.fill()}var Zr,Nr,Hr=[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]];function Gr(e,t,r,n,o,a){var f=[],l=[];if(2!=Se||"#ffffff"!=a){for(var i=0;i<4;i++)f[i]=Math.floor(t[i]+.05*(t[Hr[2][i]]-t[i])),l[i]=Math.floor(r[i]+.05*(r[Hr[2][i]]-r[i]));0==n&&(o=(o+1)%4),4==n&&(o=(o+3)%4);var u=Hr[o][0],s=Hr[o][1],c=Hr[o][2],h=Hr[o][3],v=.26*(f[c]-f[s]),d=.26*(l[c]-l[s]),g=(f[u]-f[s])/2,m=l[s]+(l[u]-l[s])/2,b=l[c]+(l[h]-l[c])/2,M=(f[h]-f[c])/2,p=1^o;e.fillStyle=a,e.beginPath(),e.moveTo(f[u]+(f[h]-f[u])/2,l[u]+(l[h]-l[u])/2),e.lineTo(f[p]+g,m),e.lineTo(f[p]+v+g,m+d),e.lineTo(f[p]+v,l[p]+d),p=(p+1)%4,e.lineTo(f[p]-v,l[p]-d),e.lineTo(f[p]-v+M,b-d),e.lineTo(f[p]+M,b),e.closePath(),e.fill(),e.lineWidth=.6*sn,e.strokeStyle="black",e.stroke()}}function Kr(e){return"white"==e?"#FFFFFF":"black"==e?"#000000":"#808080"}function jr(e){return"#"!=e.substring(0,1)&&(e=Kr(e)),(299*parseInt(e.substring(1,3),16)+587*parseInt(e.substring(3,5),16)+114*parseInt(e.substring(5,7),16))/1e3}function Jr(e){"#"!=e.substring(0,1)&&(e=Kr(e));var t=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16);return Ur(t=Math.floor(.7*t),r=Math.floor(.7*r),n=Math.floor(.7*n))}function Vr(e,t){if(e>Ve)setTimeout(Vr,0,e,t);else{if(!W){for(var r=ce[U];P<r.length;){if(r[P]>=1e3)z=r[P]-1e3;else if(-1!=r[P]){var n=r[P]%4+1,o=Math.floor(r[P]/4)%6,a=Math.floor(r[P]/24);ct(K,a,4==n?2:n,o)}P++}return y=!1,de=!0,lr(),void Ve++}var f,l,i,g,b,M,k=t;!1,requestAnimationFrame((function e(){if(S){if(S=!1,M=!1,p)k>0?P>=r.length&&(P=0,Ke(r)):(z=-1,0==P&&(P=r.length));else if(k>0&&P>=r.length||k<0&&0==P)return m=!1,y=!1,Ve++,de=!0,void lr();y=!0,de=!0}if(A&&(A=!1,k<0&&(x=!1,0==P?(x=!0,D=!0):P--),!x)){if(T=!1,-1==r[P]){if(lr(),!X)for(f=Date.now();Date.now()-f<1e3;);}else r[P]>=1e3?z=k>0?r[P]-1e3:-1:T=!0;if(T){n=r[P]%4+1,o=Math.floor(r[P]/4)%6;var t=n<3;if(4==n&&(n=2),k<0&&(t=!t,n=4-n),a=Math.floor(r[P]/24),L=!1,se=!0,w=!0,h=0,ne[a]>0&&(t=!t),W){b=Math.PI/2,g=t?1:-1;var E=67*v;2==n&&(b=Math.PI,E=67*d),L=!0,u=a,s=o,st(a),f=Date.now(),l=f,i=g*b/E,c=0}}else F=!0}if(!x&&(T&&(W?c*g<b?(lr(),m&&(F=!0),l=Date.now(),c=i*(l-f)):(F=!0,pe&&!X&&(c-=g*b,lr(),P>0&&P<r.length-1&&(F=!1,P+=k,f=l,l=Date.now(),c=i*(l-f)))):F=!0),F)){if(F=!1,A=!0,T&&(c=0,L=!1,se=!0,ct(K,a,n,o),w=!1,W&&lr(),X&&(M=!0)),k>0){if(++P<r.length&&r[P]>=1e3&&(z=r[P]-1e3,P++),P==r.length)if(R){P=0,Ke(r);for(var B=0;B<6;B++)for(var I=0;I<9;I++)K[B][I]=J[B][I],j[B][I]=V[B][I]}else D=!0}else z=-1;(m||M)&&(D=!0)}if(D)return D=!1,S=!0,Je<=Ve+1&&(y=!1),de=!0,0==ge&&et(),lr(),R&&(et(),R=!1),m=!1,Ve++,void(1==P&&r[0]>=1e3&&P--);requestAnimationFrame(e)}));var T=!1,S=!0,A=!0,F=!1,D=!1,x=!1;r=R?he[0]:ce[U]}}document.addEventListener("touchstart",on),document.addEventListener("touchmove",Mn),document.addEventListener("touchend",nn),document.addEventListener("mousedown",on),document.addEventListener("mousemove",Mn),document.addEventListener("mouseup",nn),document.addEventListener("contextmenu",Ln);var $r=!1,_r=!0,en=document.getElementsByTagName("div"),tn=en.length>0&&"wrap"==en[0].className;function rn(e){tn?en[0].style.overflow=e:document.body.style.overflow=e}function nn(e){if($r&&void 0!==e.touches&&(e.preventDefault(),rn("auto")),$r?setTimeout((function(){_r=!0}),100):_r=!0,$r=!1,T=!1,Q)Q=!1,de=!0,lr();else if(L&&!w){L=!1,h+=c,c=0;for(var t=h;t<0;)t+=32*Math.PI;var r=Math.floor(8*t/Math.PI)%16;(ke||r%4==0||r%4==3)&&(r=Math.floor((r+2)/4),ne[u]>0&&(r=(4-r)%4),h=0,se=!0,ct(K,u,r,s)),lr()}}function on(e){var t=ln.getBoundingClientRect(),r=Math.floor(t.left),n=Math.floor(t.top);if(void 0===e.touches)var o=e.clientX,a=e.clientY;else o=e.touches[0].clientX,a=e.touches[0].clientY;o<r||o>r+kt/sn||a<n||a>n+(Lt+(1==q?O:0))/sn||(e.preventDefault(),$r=!0,_r=!1,void 0!==e.touches&&(e.preventDefault(),rn("hidden")),Zr=r,Nr=n,Tt=wt=pn(e),Rt=yt=kn(e),g=!1,ge=function(e,t){if(0==q)return-1;if(ce.length>1&&e>=kt-O&&e<kt&&t>=0&&t<O)return 7;if(2==q)return e>=0&&e<O&&t>=Lt-O&&t<Lt?0:-1;if(t<Lt)return-1;for(var r=0,n=0;n<7;n++){var o=(kt-r)/(7-n);if(e>=r&&e<r+o&&t>=Lt&&t<Lt+O)return n;r+=o}return-1}(wt,yt),ge>=0?(Q=!0,3==ge?y?_e():b=!b:0==ge?Te>0&&2==q?1==ye?(ye=!1,_e(),et()):(ye=!0,$e(yr[ge=6])):(_e(),et()):7==ge?(_e(),setTimeout(et,10),U=U<ce.length-1?U+1:0):$e(yr[ge]),de=!0,lr()):me>0&&ce.length>0&&ce[U].length>0&&yt>Lt-me&&yt<=Lt?k&&(_e(),an(Je++)):(b&&(Tt=wt=kt-wt),void 0===e.touches?!M||y||0!=e.button||e.shiftKey||(g=!0):M&&!y&&(g=!0)))}function an(e){if(e>Ve)setTimeout(an,0,e);else{var t=Ze(ce[U]),r=Math.floor(((wt-1)*t*2/(kt-2)+1)/2);(r=Math.max(0,Math.min(t,r)))>0&&(r=Ne(ce[U],r)),r>P&&je(K,ce[U],P,r-P,!1),r<P&&je(K,ce[U],r,P-r,!0),P=r,T=!0,lr(),y=!1,Ve++}}var fn,ln,un,sn,cn,hn,vn,dn,gn,mn,bn=[];function Mn(e){if($r&&!Q){if(T){_e();var t=Ze(ce[U]),r=Math.floor(((pn(e)-1)*t*2/(kt-2)+1)/2);return(r=Math.max(0,Math.min(t,r)))>0&&(r=Ne(ce[U],r)),r>P&&je(K,ce[U],P,r-P,!1),r<P&&je(K,ce[U],r,P-r,!0),P=r,void lr()}var n=b?kt-pn(e):pn(e),o=kn(e),a=n-wt,f=o-yt;if(M&&g&&!L&&!y){Tt=n,Rt=o;for(var l=0;l<St;l++){var i=Bt[l][0],h=Bt[l][1]-i,v=Bt[l][3]-i,d=It[l][0],m=It[l][1]-d,p=It[l][3]-d,k=(p*(wt-i)-v*(yt-d))/(h*p-v*m),w=(-m*(wt-i)+h*(yt-d))/(h*p-v*m);if(k>0&&k<1&&w>0&&w<1){if(a*a+f*f<144)return;if(xt=Ut[l],Et=Pt[l],Math.abs(xt*a+Et*f)/Math.sqrt((xt*xt+Et*Et)*(a*a+f*f))>.75){L=!0,u=Yt[l],s=zt[l];break}}}g=!1,wt=Tt,yt=Rt}a=(n-wt)/sn,f=(o-yt)/sn,!L||y?(Rr(Fr(oe,Sr(Tr(bn,ae),-.016*a))),Rr(xr(ae,fe,oe)),Rr(Fr(oe,Sr(Tr(bn,fe),.016*f))),Rr(xr(fe,oe,ae)),wt=n,yt=o):(se&&st(u),c=.03*(xt*a+Et*f)/Math.sqrt(xt*xt+Et*Et)),lr()}}function pn(e){return void 0===e.touches?(e.clientX-Zr)*sn:(e.touches[0].clientX-Zr)*sn}function kn(e){return void 0===e.touches?(e.clientY-Nr)*sn:(e.touches[0].clientY-Nr)*sn}function Ln(e){_r||e.preventDefault()}function wn(){clearTimeout(fn),fn=setTimeout((function(){yn(),de=!0,lr()}),20)}function yn(){Lt=mn.clientHeight-1,kt=mn.clientWidth-1,ln.style.width=kt+"px",ln.style.height=Lt+"px",sn=devicePixelRatio,cn=sn/2,Lt=Math.floor(Lt*sn),kt=Math.floor(kt*sn),ln.width=kt,ln.height=Lt,hn=sn,O=Math.floor(vn*sn),me=Math.floor(dn*sn),be=Math.floor(gn*sn);for(var e=1;e<10;e++)Wr[e]=e*sn;for(e=0;e<kr.length;e++)Lr[e]=kr[e]*sn;1==q&&(Lt-=O)}function Tn(e,t){var r,n,o=["R","L","F","B","U","D"],a=["","m","n"],f=["","2","'"],l=-1,i=-1,u=-1,s="";0==t&&(t=10*e);for(var c=0;c<t;c++){for(;l==i||Math.floor(l/2)==Math.floor(i/2)&&l==u;)l=Math.floor(6*Math.random());u=i,i=l,r=Math.floor(3*Math.random()),e<=3?s+=""+o[l]+f[r]+" ":(n=Math.floor(Math.random()*(e>4?3:2)),5==e&&1==n&&(n=0),s+=""+o[l]+a[n]+f[r]+" ")}return s}window.addEventListener("resize",wn);var Rn=[];function Sn(){_e(),document.removeEventListener("mousedown",on),document.removeEventListener("touchstart",on),document.removeEventListener("touchmove",Mn),document.removeEventListener("touchend",nn),document.removeEventListener("mousedown",on),document.removeEventListener("mousemove",Mn),document.removeEventListener("mouseup",nn),document.removeEventListener("contextmenu",Ln),window.removeEventListener("resize",wn)}!function(){ln=document.createElement("canvas"),void 0!==e&&function(){for(var t=e.split("&"),r=0;r<t.length;r++){var n=t[r].split("=");void 0!==n[1]&&(Rn[n[0]]=decodeURIComponent(n[1].trim()))}}();var t=Be("id");if(null!=t)(mn=document.getElementById(t)).innerHTML="";else if(null!=document.currentScript)mn=document.currentScript.parentNode;else{var r=document.getElementsByTagName("script"),n=r[r.length-1];mn=n.parentNode}null!=mn.id&&"undefined"!=typeof removeListeners&&(removeListeners[mn.id]=Sn);for(var o=0;o<6;o++)K[o]=[],j[o]=[],J[o]=[],V[o]=[];for(o=0;o<18;o++)Bt[o]=[],It[o]=[];U=0,h=0,xe()}()}
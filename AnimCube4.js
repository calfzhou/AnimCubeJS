"use strict";function AnimCube4(e){var t,r,n,o,a,f,l,i,u,c,s,h,v,d,g,m,b,M,p,w,k,L,y,T,A,R,F,S,D,x,B,E,I,U,P,C,W,X,Y,q,O,Q,z,N,Z,H=[],G=[],K=[],j=[],J=[],V=[],$=[[0,-1,0],[0,1,0],[0,0,-1],[0,0,1],[-1,0,0],[1,0,0]],_=[[-1,-1,-1],[1,-1,-1],[1,-1,1],[-1,-1,1],[-1,1,-1],[1,1,-1],[1,1,1],[-1,1,1]],ee=[[0,1,2,3],[4,7,6,5],[0,4,5,1],[2,6,7,3],[0,3,7,4],[1,5,6,2]],te=[[0,3,2,1],[0,3,2,1],[3,2,1,0],[3,2,1,0],[0,3,2,1],[0,3,2,1]],re=[[2,5,3,4],[4,3,5,2],[4,1,5,0],[5,1,4,0],[0,3,1,2],[2,1,3,0]],ne=[1,1,-1,-1,-1,-1],oe=[0,0,-1],ae=[1,0,0],fe=[],le=[],ie=[],ue=[],ce=!0,se=[],he=[],ve=[],de=!0,ge=-1,me=6,be=12,Me=!0,pe=!1,we=!1,ke=!1,Le=!1,ye=0,Te=0,Ae=0,Re=0,Fe=[3,2,0,5,1,4],Se=[[12,8,4,0,13,9,5,1,14,10,6,2,15,11,7,3],[3,7,11,15,2,6,10,14,1,5,9,13,0,4,8,12],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],[12,8,4,0,13,9,5,1,14,10,6,2,15,11,7,3],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]];function De(){var e=Be("config");null!=e?function(e){var t=new XMLHttpRequest;function r(){4==t.readyState&&(200==t.status?function(e){for(var t=e.split("\n"),r=0;r<t.length;r++){var n=t[r].split("=");void 0!==n[1]&&(H[n[0]]=n[1].trim())}}(t.responseText):console.log("Error loading config file: "+e),xe())}t.onreadystatechange=r,t.open("GET",e,!0),t.send()}(e):xe()}function xe(){G[0]=Cr(255,128,64),G[1]=Cr(255,0,0),G[2]=Cr(0,255,0),G[3]=Cr(0,0,255),G[4]=Cr(153,153,153),G[5]=Cr(170,170,68),G[6]=Cr(187,119,68),G[7]=Cr(153,68,68),G[8]=Cr(68,119,68),G[9]=Cr(0,68,119),G[10]=Cr(255,255,255),G[11]=Cr(255,255,0),G[12]=Cr(255,96,32),G[13]=Cr(208,0,0),G[14]=Cr(0,144,0),G[15]=Cr(32,64,208),G[16]=Cr(176,176,176),G[17]=Cr(80,80,80),G[18]=Cr(255,0,255),G[19]=Cr(0,255,255),G[20]=Cr(255,160,192),G[21]=Cr(32,255,16),G[22]=Cr(0,0,0),G[23]=Cr(128,128,128);var e=Be("bgcolor");if(t=null!=e&&6==e.length&&Xr(e)?"#"+e:"gray",e=Be("butbgcolor"),o=null!=e&&6==e.length&&Xr(e)?"#"+e:t,null!=(e=Be("colors")))for(var u=0;u<10&&u<e.length/6;u++)Xr(e.substring(6*u,6*u+6))&&(G[u]="#"+e.substring(6*u,6*u+6));for(u=0;u<6;u++)for(var c=0;c<16;c++)K[u][c]=u+10;if(null!=(e=Be("supercube"))&&"1"==e){ke=!0,Ee(.06);for(u=0;u<16;u++)K[0][u]=22;null!=(e=Be("scw"))&&("1"==e?Ae=1:"2"==e&&(Ae=2)),1==Ae&&(G[10]="#000000")}if(null!=(e=Be("gabbacolors"))&&"1"==e&&(1==ke?(G[11]="#fdcf00",G[12]="#fd4e0a",G[13]="#93000d",G[14]="#00702d",G[15]="#00347a"):(Ee(.06),G[11]="#ffd90a",G[12]="#ff4f0b",G[13]="#9e0b19",G[14]="#0b7d39",G[15]="#0b4186")),null!=(e=Be("borderwidth"))){for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(Re=10*Re+parseInt(e[u]));Re>=0&&Re<=20&&Ee(Re/100)}if(ke)for(u=0;u<6;u++)for(c=0;c<16;c++)j[u][c]=0;var s="lluu";if(null!=(e=Be("colorscheme"))&&6==e.length)for(u=0;u<6;u++){var h=23;for(c=0;c<23;c++)if(e[u].toLowerCase()=="0123456789wyorgbldmcpnk".charAt(c)){h=c;break}for(c=0;c<16;c++)K[u][c]=h}if("1"==(e=Be("scramble"))?ye=1:"2"==e&&(ye=2),2==ye)for(u=0;u<6;u++)for(c=0;c<16;c++)J[u][c]=K[u][c],V[u][c]=j[u][c];if(0==ye){if(null!=(e=Be("pos"))&&96==e.length){s="uuuuff","gray"==t&&(t="white");for(u=0;u<6;u++){var g=Fe[u];for(c=0;c<16;c++){var m=Se[u][c];K[g][m]=23;for(var b=0;b<14;b++)if(e.charAt(16*u+c)=="DFECABdfecabgh".charAt(b)){K[g][m]=b+4;break}}}}if(null!=(e=Be("facelets"))&&96==e.length)for(u=0;u<6;u++)for(c=0;c<16;c++){K[u][c]=23;for(b=0;b<23;b++)if(e[16*u+c].toLowerCase()=="0123456789wyorgbldmcpnk".charAt(b)){K[u][c]=b;break}}if(null!=(e=Be("superfacelets"))&&96==e.length)for(u=0;u<6;u++)for(c=0;c<16;c++)for(b=0;b<4;b++)if(e[16*u+c].toLowerCase()=="0123".charAt(b)){j[u][c]=b;break}}if(null!=(e=Be("randmoves"))){var k=0;for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(k=10*k+parseInt(e[u]));k>0&&(Te=k)}if(("random"==(e=Be("move"))||ye>0)&&(e=Rn(4,Te)),se=null==e?[]:Pe(e,!0),P=0,q=-1,0==ye&&null!=(e=Be("initmove"))){"random"==e&&(e=Rn(4,Te));var L="#"==e?se:Pe(e,!1);L.length>0&&Ke(K,L[0],0,L[0].length,!1)}if(e=Be("initrevmove"),1==ye?e=null:2==ye&&(e="#"),null!=e){"random"==e&&(e=Rn(4,Te));var y="#"==e?se:Pe(e,!1);y.length>0&&Ke(K,y[0],0,y[0].length,!0)}0==ye&&null!=(e=Be("demo"))&&("random"==e&&(e=Rn(4,Te)),(he="#"==e?se:Pe(e,!0)).length>0&&he[0].length>0&&(A=!0)),e=Be("position"),Fr(Er(fe,oe,ae)),null==e&&(e=s);var T=Math.PI/12;for(u=0;u<e.length;u++){var U=T;switch(e[u].toLowerCase()){case"d":U=-U;case"u":Ur(oe,U),Ur(ae,U);break;case"f":U=-U;case"b":Pr(oe,U),Pr(ae,U);break;case"l":U=-U;case"r":Ir(oe,U),Ir(ae,U)}}if(Fr(Er(fe,oe,ae)),v=0,d=0,null!=(e=Be("speed")))for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(v=10*v+parseInt(e[u]));if(null!=(e=Be("doublespeed")))for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(d=10*d+parseInt(e[u]));if(0==v&&(v=10),0==d&&(d=3*v/2),R=0,null==(e=Be("perspective")))R=2;else for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(R=10*R+parseInt(e[u]));var C,W=0;if(null!=(e=Be("scale")))for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(W=10*W+parseInt(e[u]));if(F=1/(1+W/10),D=!1,null!=(e=Be("hint"))){D=!0,x=0;for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(x=10*x+parseInt(e[u]));x<1?D=!1:x/=10}(B=3.7,null!=(e=Be("hinthoriz")))&&((C=parseFloat(e))>0&&(B=C));(E=3.7,null!=(e=Be("hintvert")))&&((C=parseFloat(e))>0&&(E=C));(I=0,null!=(e=Be("hintborder"))&&"1"==e&&(I=1),Q=13,null!=(e=Be("buttonheight")))&&((C=parseInt(e))>=9&C<=25&&(Q=C));(me=0==se.length?0:6,O=1,"0"==(e=Be("buttonbar"))?(O=0,Q=0,me=0):"1"==e?O=1:"2"!=e&&0!=se.length||(O=2,me=0),e=Be("edit"),M="0"!=e,e=Be("repeat"),p="0"!=e,e=Be("clickprogress"),w="0"!=e,e=Be("movetext"),N="1"==e?1:0,Z=1,"0"==(e=Be("movetextspace"))&&(Z=0),null!=(e=Be("textsize")))&&((C=parseInt(e))>=5&C<=40&&(be=C));(e=Be("fonttype"),Me=null==e||"1"==e,Y=0,null!=(e=Be("metric"))&&("1"==e?Y=1:"2"==e?Y=2:"3"==e&&(Y=3)),S=1,null!=(e=Be("align")))&&((C=parseInt(e))>=0&C<=3&&(S=C),C>=3&C<=99&&(S=C/100));if(null!=(e=Be("ww"))&&"1"==e&&(pe=!0),null!=(e=Be("snap"))&&"1"==e&&(we=!0),2!=ye)for(u=0;u<6;u++)for(c=0;c<16;c++)J[u][c]=K[u][c],V[u][c]=j[u][c];for(u=0;u<3;u++)le[u]=oe[u],ie[u]=ae[u],ue[u]=fe[u];Vr(t)<128?(n="white",r=function(e){"#"!=e.substring(0,1)&&(e=Jr(e));var t=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16);return t=Math.floor(1.3*t),r=Math.floor(1.3*r),n=Math.floor(1.3*n),Cr(t>255?255:t,r>255?255:r,n>255?255:n)}(t)):(n="black",r=$r(t)),l=Vr(o)<128?"white":"black",a=n,null!=(e=Be("slidercolor"))&&6==e.length&&Xr(e)&&(a="#"+e),f=$r(t),null!=(e=Be("sliderbgcolor"))&&6==e.length&&Xr(e)&&(f="#"+e),null!=(e=Be("troughcolor"))&&6==e.length&&Xr(e)&&(f="#"+e),i="black",null!=(e=Be("cubecolor"))&&6==e.length&&Xr(e)&&(i="#"+e),q=-1,sn=cn.getContext("2d"),gn=Q,mn=me,bn=be,An(),Mn.appendChild(cn),ur(),A&&Ve(-1)}function Be(e){var t=Fn[e];return void 0===t?H[e]:t}function Ee(e){br[0][0]=br[0][1]=br[1][1]=br[3][0]=e,br[1][0]=br[2][0]=br[2][1]=br[3][1]=1-e}var Ie=[0,0,0,0,0,0,1,1,1,3,3,3,3,3,3,2,2,2,2,2,2],Ue=[0,1,2,3,4,5,1,2,4,5,2,0,5,2,0,0,1,2,3,4,5];function Pe(e,t){if(t){for(var r=e.indexOf("{");-1!=r;)r=e.indexOf("{",r+1);if(null==ve)q=0,ve=[];else{for(var n=[],o=0;o<ve.length;o++)n[o]=ve[o];q=ve.length,ve=n}}var a=1;for(r=e.indexOf(";");-1!=r;)a++,r=e.indexOf(";",r+1);var f=[],l=0;for(r=e.indexOf(";"),a=0;-1!=r;)f[a++]=We(e.substring(l,r),t),l=r+1,r=e.indexOf(";",l);return f[a]=We(e.substring(l),t),f}var Ce=["m","t","c","s","a","w"];function We(e,t){for(var r=0,n=[],o=0;o<e.length;o++)if("."==e.charAt(o))n[r]=-1,r++;else if("{"==e.charAt(o)){o++;for(var a="";o<e.length&&"}"!=e.charAt(o);)t&&(a+=e.charAt(o)),o++;t&&(ve[q]=a,n[r]=1e3+q,q++,r++)}else for(var f=0;f<21;f++)if(e.charAt(o)=="UDFBLRESMXYZxyzudfblr".charAt(f)){o++;var l=Ie[f];if(n[r]=28*Ue[f],o<e.length&&0==Ie[f])for(var i=0;i<Ce.length;i++)if(e.charAt(o)==Ce[i]){l=i+1,o++;break}n[r]+=4*l,o<e.length&&("1"==e.charAt(o)?o++:"'"==e.charAt(o)||"3"==e.charAt(o)?(n[r]+=2,o++):"2"==e.charAt(o)&&(++o<e.length&&"'"==e.charAt(o)?(n[r]+=3,o++):n[r]+=1)),r++,o--;break}var u=[];for(o=0;o<r;o++)u[o]=n[o];return u}function Xe(e,t,r){if(t>=e.length)return"";for(var n="",o=t;o<r;o++){var a=Oe(e,o);""!=a&&(n+=a+(Z?" ":""))}return n}var Ye=[[["U","D","F","B","L","R"],["Um","Dm","Fm","Bm","Lm","Rm"],["Ut","Dt","Ft","Bt","Lt","Rt"],["Uc","Dc","Fc","Bc","Lc","Rc"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"],["Uw","Dw","Fw","Bw","Lw","Rw"]],[["U","D","F","B","L","R"],["~E","E","S","~S","M","~M"],["u","d","f","b","l","r"],["Z","~Z","Y","~Y","~X","X"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"],["Uw","Dw","Fw","Bw","Lw","Rw"]],[["U","D","F","B","L","R"],["~E","E","S","~S","M","~M"],["u","d","f","b","l","r"],["Y","~Y","Z","~Z","~X","X"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"],["Uw","Dw","Fw","Bw","Lw","Rw"]],[["U","D","F","B","L","R"],["u","d","f","b","l","r"],["Uu","Dd","Ff","Bb","Ll","Rr"],["QU","QD","QF","QB","QL","QR"],["UD'","DU'","FB'","BF'","LR'","RL'"],["UD","DU","FB","BF","LR","RL"],["ud'","du'","fb'","bf'","lr'","rl'"]]],qe=["","2","'","2'"];function Oe(e,t){if(t>=e.length)return"";if(e[t]>=1e3)return"";if(-1==e[t])return".";var r=Ye[N-1][Math.floor(e[t]/4)%7][Math.floor(e[t]/28)];return"~"==r.charAt(0)?r.substring(1)+qe[(e[t]+2)%4]:r+qe[e[t]%4]}var Qe=["","q","h","s"];function ze(e){for(var t=0,r=0;r<e.length;r++)e[r]<1e3&&t++;return t}function Ne(e,t){for(var r=0,n=0;;){for(;r<e.length&&e[r]>=1e3;)r++;if(n==t)break;r<e.length&&(n++,r++)}return r}function Ze(e,t){for(var r=0,n=0;n<e.length&&(n<t||t<0);n++)r+=He(e[n]);return r}function He(e){if(e<0||e>=1e3)return 0;var t=e%4,r=Math.floor(e/4)%7,n=1;switch(Y){case 1:1!=t&&3!=t||(n*=2);case 2:(1==r||r>3)&&(n*=2);case 3:3==r&&(n=0),3!=Y||4!=r&&5!=r||(n*=2)}return n}function Ge(e){q=e.length>0&&e[0]>=1e3?e[0]-1e3:-1}function Ke(e,t,r,n,o){for(var a=o?r+n:r;;){if(o){if(a<=r)break;a--}if(t[a]>=1e3)q=o?-1:t[a]-1e3;else if(t[a]>=0){var f=t[a]%4+1,l=Math.floor(t[a]/4)%7;4==f&&(f=2),o&&(f=4-f),ht(e,Math.floor(t[a]/28),f,l)}if(!o&&++a>=r+n)break}}var je=0,Je=0;function Ve(e){if($e(),(A||0!=se.length&&0!=se[U].length)&&(!A||0!=he.length&&0!=he[0].length)){switch(C=1,W=!1,X=!0,e){case 0:break;case 1:C=-1;break;case 2:W=!0;break;case 3:C=-1,W=!0;break;case 4:X=!1}_r(je++,C)}}function $e(){1==y&&(m=!0)}function _e(){P=0,se.length>0&&Ge(se[U]),ce=!0,b=!1;for(var e=0;e<6;e++)for(var t=0;t<16;t++)K[e][t]=J[e][t],j[e][t]=V[e][t];ye>0&&(se=Pe(Rn(4,Te),!1)),2==ye&&Ke(K,se[0],0,se[0].length,!0);for(e=0;e<3;e++)oe[e]=le[e],ae[e]=ie[e],fe[e]=ue[e]}var et=[[[0,4],[0,4]],[[0,4],[0,4]],[[0,4],[0,4]],[[0,4],[0,4]],[[0,4],[0,4]],[[0,4],[0,4]]],tt=[],rt=[],nt=[],ot=[],at=[[[0,0],[0,0]],[[0,4],[0,4]],[[0,4],[0,1]],[[0,1],[0,4]],[[0,4],[3,4]],[[3,4],[0,4]]],ft=[[1,0,3,3,2,3],[0,1,5,5,4,5],[2,3,1,0,3,2],[4,5,0,1,5,4],[3,2,2,4,1,0],[5,4,4,2,0,1]],lt=[[0,1,5,5,4,5],[1,0,3,3,2,3],[4,5,0,1,5,4],[2,3,1,0,3,2],[5,4,4,2,0,1],[3,2,2,4,1,0]],it=[[[0,0],[0,0]],[[0,4],[2,3]],[[0,4],[1,2]],[[2,3],[0,4]],[[1,2],[0,4]]],ut=[[0,0,4,4,2,4],[0,0,3,3,1,3],[2,4,0,0,4,2],[1,3,0,0,3,1],[4,2,2,1,0,0],[3,1,1,2,0,0]],ct=[[0,0,3,3,1,3],[0,0,4,4,2,4],[1,3,0,0,3,1],[2,4,0,0,4,2],[3,1,1,2,0,0],[4,2,2,1,0,0]];function st(e){for(var t=0;t<6;t++)tt[t]=at[ft[e][t]],ot[t]=at[lt[e][t]],rt[t]=it[ut[e][t]],nt[t]=it[ct[e][t]];ce=!1}function ht(e,t,r,n){switch(n){case 3:wt(e,t,4-r,!1),wt(e,t,4-r,!0),wt(e,1^t,r,!0),wt(e,1^t,r,!1);break;case 2:wt(e,t,4-r,!1);case 1:wt(e,t,4-r,!0);break;case 6:wt(e,t,4-r,!0),wt(e,1^t,r,!0);break;case 5:wt(e,1^t,4-r,!1),wt(e,t,4-r,!1);break;case 4:wt(e,1^t,r,!1);default:wt(e,t,4-r,!1)}}var vt=[0,1,2,3,7,11,15,14,13,12,8,4],dt=[5,6,10,9],gt=[1,4,-1,-4,1,4,-1,-4],mt=[0,3,15,12,4,2,11,13],bt=[[3,3,3,0],[2,1,1,1],[3,3,0,0],[2,1,1,2],[3,2,0,0],[2,2,0,1]],Mt=[[7,7,7,4],[6,5,5,5],[7,7,4,4],[6,5,5,6],[7,6,4,4],[6,6,4,5]],pt=[];function wt(e,t,r,n){kt(e,t,r,n),1==ke&&r>0&&r<4&&(kt(j,t,r,n),function(e,t,r){if(0==r)for(var n=0;n<16;n++)j[e][n]=(j[e][n]+4-t)%4;4==e&&(0==r&&(xt(12,1,3),1==t?xt(0,1,1):2==t?xt(0,1,2):3==t&&xt(0,4,0)),1==r&&(xt(8,1,3),1==t?xt(4,1,1):2==t?xt(4,1,2):3==t&&xt(1,4,0)));5==e&&(0==r&&(xt(0,1,3),1==t?xt(3,4,0):2==t?xt(12,1,2):3==t&&xt(12,1,1)),1==r&&(xt(4,1,3),1==t?xt(2,4,0):2==t?xt(8,1,2):3==t&&xt(8,1,1)));0==r&&(2==e&&Bt(0,4-t),3==e&&Bt(1,t));1==r&&(2==e&&Bt(2,4-t),3==e&&Bt(3,t))}(t,r,n))}function kt(e,t,r,n){if(!n){for(var o=0;o<12;o++)pt[(o+3*r)%12]=e[t][vt[o]];for(o=0;o<12;o++)e[t][vt[o]]=pt[o];for(o=0;o<4;o++)pt[(o+r)%4]=e[t][dt[o]];for(o=0;o<4;o++)e[t][dt[o]]=pt[o]}var a=4*r;for(o=0;o<4;o++)for(var f=re[t][o],l=n?Mt[t][o]:bt[t][o],i=gt[l],u=mt[l],c=0;c<4;c++,a++)pt[a%16]=e[f][c*i+u];for(o=0,a=0;o<4;o++)for(f=re[t][o],l=n?Mt[t][o]:bt[t][o],i=gt[l],u=mt[l],c=0;c<4;c++,a++)e[f][c*i+u]=pt[a]}var Lt,yt,Tt,At,Rt,Ft,St,Dt=[[[0,1,0],[0,4,1],[0,4,4],[0,1,5]],[[12,1,0],[3,4,1],[3,4,4],[12,1,5]],[[4,1,0],[1,4,1],[1,4,4],[4,1,5]],[[8,1,0],[2,4,1],[2,4,4],[8,1,5]]];function xt(e,t,r){for(var n=e,o=0;o<4;n+=t,o++)j[r][n]=(j[r][n]+2)%4}function Bt(e,t){for(var r=0;r<4;r++)for(var n=Dt[e][r],o=n[0],a=0;a<4;o+=n[1],a++)j[n[2]][o]=(j[n[2]][o]+t)%4}var Et,It,Ut=[],Pt=[],Ct=[],Wt=[],Xt=[[[0,0],[4,0],[4,1],[0,1]],[[4,0],[4,4],[3,4],[3,0]],[[4,4],[0,4],[0,3],[4,3]],[[0,4],[0,0],[1,0],[1,4]],[[0,1],[4,1],[4,2],[0,2]],[[3,0],[3,4],[2,4],[2,0]],[[0,2],[4,2],[4,3],[0,3]],[[2,0],[2,4],[1,4],[1,0]]],Yt=[[1,0],[0,1],[-1,0],[0,-1],[1,0],[0,1],[-1,0],[0,-1]],qt=[[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,-1,1,-1,1,-1,1,-1],[1,-1,1,-1,1,-1,1,-1],[-1,1,-1,1,-1,1,-1,1],[1,-1,1,-1,1,-1,1,-1]],Ot=[],Qt=[],zt=[[[1,0,0],[0,0,0],[0,0,1]],[[1,0,0],[0,1,0],[0,0,0]],[[0,0,0],[0,1,0],[0,0,1]]],Nt=[[[0,0,1],[0,0,0],[-1,0,0]],[[0,1,0],[-1,0,0],[0,0,0]],[[0,0,0],[0,0,1],[0,-1,0]]],Zt=[[[0,0,0],[0,1,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,1]],[[1,0,0],[0,0,0],[0,0,0]]],Ht=[1,-1,1,-1,1,-1],Gt=[],Kt=[],jt=[],Jt=[],Vt=[],$t=[],_t=[],er=[],tr=[],rr=[],nr=[],or=[],ar=[[1,0,0,0],[0,1,0,0],[1,1,0,0],[1,1,1,1],[1,0,0,1],[1,0,0,2],[0,1,1,0]],fr=[],lr=[[0,2,2,2],[2,1,2,2],[2,2,2,2],[2,2,2,2],[0,2,2,0],[0,2,2,0],[0,2,2,0]],ir=[[0,1,2,3],[3,2,1,0],[0,3,2,1]];function ur(){if(sn.save(),sn.fillStyle=t,1!=O||0!=me&&!A?(Yr(sn,0,0,Lt,yt),sn.fillRect(0,0,Lt,yt)):(Yr(sn,0,0,Lt,yt-hn),sn.fillRect(0,0,Lt,yt-hn)),St=0,ce)wr(oe,ae,fe,et,3,9);else{for(var e=Math.cos(h+s),n=Math.sin(h+s)*Ht[u],i=0;i<3;i++){Gt[i]=0,Kt[i]=0;for(var v=0;v<3;v++){var d=Math.floor(u/2);Gt[i]+=oe[v]*(Zt[d][i][v]+zt[d][i][v]*e+Nt[d][i][v]*n),Kt[i]+=ae[v]*(Zt[d][i][v]+zt[d][i][v]*e+Nt[d][i][v]*n)}}Er(jt,Gt,Kt);var g=Math.cos(h-s),m=Math.sin(h-s)*Ht[u];for(i=0;i<3;i++){Jt[i]=0,Vt[i]=0;for(v=0;v<3;v++){d=Math.floor(u/2);Jt[i]+=oe[v]*(Zt[d][i][v]+zt[d][i][v]*g+Nt[d][i][v]*m),Vt[i]+=ae[v]*(Zt[d][i][v]+zt[d][i][v]*g+Nt[d][i][v]*m)}}Er($t,Jt,Vt),rr[0]=oe,nr[0]=ae,or[0]=fe,rr[1]=Gt,nr[1]=Kt,or[1]=jt,rr[2]=Jt,nr[2]=Vt,or[2]=$t,fr[0]=tt,fr[1]=rt,fr[2]=nt,fr[3]=ot,Br(Sr(Rr(_t,oe),5+R),Sr(Rr(tr,$[u]),.4)),Br(Sr(Rr(er,oe),5+R),Sr(Rr(tr,$[1^u]),1/6));var b,M=Dr(_t,$[u]),p=Dr(er,$[1^u]);wr(rr[ar[c][ir[b=M<0&&p>0?0:M>0&&p<0?1:2][0]]],nr[ar[c][ir[b][0]]],or[ar[c][ir[b][0]]],fr[ir[b][0]],lr[c][ir[b][0]],0),wr(rr[ar[c][ir[b][1]]],nr[ar[c][ir[b][1]]],or[ar[c][ir[b][1]]],fr[ir[b][1]],lr[c][ir[b][1]],1),wr(rr[ar[c][ir[b][2]]],nr[ar[c][ir[b][2]]],or[ar[c][ir[b][2]]],fr[ir[b][2]],lr[c][ir[b][2]],2),wr(rr[ar[c][ir[b][3]]],nr[ar[c][ir[b][3]]],or[ar[c][ir[b][3]]],fr[ir[b][3]],lr[c][ir[b][3]],3)}if(z||y||(ge=-1),!(ye>0&&2==O)){if(!A&&se.length>0){if(se[U].length>0){if(me>0){sn.lineWidth=dn,sn.strokeStyle=l;var w=(Lt-2)*function(e,t){for(var r=0,n=0;n<t;n++)e[n]<1e3&&r++;return r}(se[U],P)/ze(se[U]);sn.fillStyle=f,sn.fillRect(vn,yt-me-vn,Lt-hn,me),sn.fillStyle=a,sn.fillRect(vn,yt-me-vn,w,me),sn.beginPath(),sn.rect(vn,yt-me-vn,Lt-hn,me),sn.stroke()}var k=Ze(se[U],P)+"/"+Ze(se[U],-1)+Qe[Y];sn.font="bold "+be+"px helvetica";var L=sn.measureText(k).width,T=Lt-L-2,F=yt-me-Math.floor(4*hn);N>0?(Tr(sn,k,Me?T-hn:T,F-be),function(e,t){var n=0==P?Ne(se[U],P):P,o=Xe(se[U],0,n),a=Oe(se[U],n),f=Xe(se[U],n+1,se[U].length);Z&&(""==a&&(o=o.substr(0,o.length-1)),""!=f&&(f=" "+f.substr(0,f.length-1)));var l=e.measureText(o).width,i=e.measureText(a).width,u=e.measureText(f).width,c=1;c+l+i+u>Lt&&(c=Math.min(1,Lt/2-l-i/2),c=Math.max(c,Lt-l-i-u-2));i>0&&(e.fillStyle=r,e.lineWidth=2,e.strokeStyle="black",e.beginPath(),bn<=14?e.fillRect(c+l-1,yt-me-be-Math.floor(4*hn),i+2,be+Math.floor(3*hn)):e.fillRect(c+l-1,yt-me-be-Math.floor(2*hn),i+2,be+Math.floor(hn)));l>0&&Tr(e,o,c,t);i>0&&Tr(e,a,c+l,t);u>0&&Tr(e,f,c+l+i,t)}(sn,F)):Tr(sn,k,Me?T-hn:T,F)}if(se.length>1){k=U+1+"/"+se.length,L=sn.measureText(k).width,T=Lt-L-Q-Math.floor(5*hn);Tr(sn,k,T,cr()),Or(sn,7,Lt-Q/2,Q/2)}}q>=0&&(sn.font="bold "+be+"px helvetica",Tr(sn,ve[q],Me?hn:0,cr()))}sn.restore(),de&&0!=O&&function(e){var t=Q%2==0?1:0;if(t+=Math.floor(hn+.5)-1,2==O)return e.fillStyle=0==ge||ye>0&&6==ge?$r(o):o,e.fillRect(vn,yt-Q,Q,Q),e.lineWidth=dn,e.strokeStyle=l,e.beginPath(),e.rect(vn,yt-Q-vn,Q,Q),e.stroke(),void Or(e,0,Q/2,yt-(Q+1)/2-t);if(1==O){for(var r=0,n=0;n<7;n++){var a=Math.floor((Lt-r)/(7-n));e.fillStyle=ge==n?$r(o):o,e.fillRect(r,yt,a,Q),e.lineWidth=dn,e.strokeStyle=l,e.beginPath(),0==n?e.rect(r+vn,yt-vn,a-hn,Q):e.rect(r-vn,yt-vn,a,Q),e.stroke(),e.strokeStyle="black",Or(e,n,r+a/2,yt+Q/2-t),r+=a}de=!1}}(sn)}function cr(){return bn<10?Math.floor(10*hn):bn<12?Math.floor(12*hn):bn<14?Math.floor(14*hn):be}var sr=[],hr=[],vr=[],dr=[],gr=[[],[],[],[],[],[]],mr=[[],[],[],[],[],[]],br=[[.1,.1],[.9,.1],[.9,.9],[.1,.9]],Mr=[[0,0],[0,1],[1,1],[1,0]],pr=[];function wr(e,t,r,n,o,a){for(var f=0;f<8;f++){var l=(v=Lt<yt?Lt:yt-me)/3.7*Dr(_[f],t)*F,s=v/3.7*Dr(_[f],r)*F;l/=1-(d=v/(5+R)*Dr(_[f],e)*F)/v,s/=1-d/v,vr[f]=Lt/2+l,dr[f]=0==S?(yt-me)/2*F-s:1==S?(yt-me)/2-s:2==S?yt-me-(yt-me)/2*F-s:(yt-me)*(S*(1-F)+F/2)-s}for(f=0;f<6;f++)for(var h=0;h<4;h++)gr[f][h]=vr[ee[f][h]],mr[f][h]=dr[ee[f][h]];if(D)for(f=0;f<6;f++)if(Br(Sr(Rr(_t,e),5+R),$[f]),Dr(_t,$[f])<0){Sr(Rr(pr,$[f]),x);var v,d;l=(v=Lt<yt?Lt:yt-me)/B*Dr(pr,t),s=v/E*Dr(pr,r);l/=1-(d=v/(5+R)*Dr(pr,e))/v,s/=1-d/v;var g=n[f][0][1]-n[f][0][0],m=n[f][1][1]-n[f][1][0];if(g>0&&m>0)for(var p=0,w=n[f][1][0];p<m;p++,w++)for(var k=0,L=n[f][0][0];k<g;k++,L++){for(h=0;h<4;h++)kr(f,h,sr,hr,L+br[h][0],w+br[h][1],b),sr[h]=Math.floor(sr[h]+(b?-l:l)),hr[h]=Math.floor(hr[h]-s);1==ke?(Zr(sn,sr,hr,"#fdfdfd"),Nr(sn,sr,hr,I?$r("#fdfdfd"):"#fdfdfd"),jr(sn,sr,hr,f,j[f][4*w+L],G[K[f][4*w+L]])):(Zr(sn,sr,hr,G[K[f][4*w+L]]),Nr(sn,sr,hr,I?$r(G[K[f][4*w+L]]):G[K[f][4*w+L]]))}}for(f=0;f<6;f++){g=n[f][0][1]-n[f][0][0],m=n[f][1][1]-n[f][1][0];if(g<=0||m<=0){var T=0;if(0==o&&0==a?T=.75:1==o&&1==a?T=.5:1==o&&2==a&&u==f?T=.25:2==o&&0==a&&(T=0==c?.25:u==f?.5:.75),2==o&&c>3&&(T=.5),0!=T){for(h=0;h<4;h++){var A=te[f][h];sr[h]=Math.floor(gr[f][h]+(gr[1^f][A]-gr[f][h])*T),hr[h]=Math.floor(mr[f][h]+(mr[1^f][A]-mr[f][h])*T),b&&(sr[h]=Lt-sr[h])}Zr(sn,sr,hr,i)}}else{for(h=0;h<4;h++)kr(f,h,sr,hr,n[f][0][Mr[h][0]],n[f][1][Mr[h][1]],b);a<3?Zr(sn,sr,hr,i):(Br(Sr(Rr(_t,e),5+R),$[f]),Dr(_t,$[f])>0&&Zr(sn,sr,hr,i))}}for(f=0;f<6;f++)if(Br(Sr(Rr(_t,e),5+R),$[f]),Dr(_t,$[f])>0){g=n[f][0][1]-n[f][0][0],m=n[f][1][1]-n[f][1][0];if(g>0&&m>0)for(p=0,w=n[f][1][0];p<m;p++,w++)for(k=0,L=n[f][0][0];k<g;k++,L++){for(h=0;h<4;h++)kr(f,h,sr,hr,L+br[h][0],w+br[h][1],b);1==ke?(Nr(sn,sr,hr,"#fdfdfd"),Zr(sn,sr,hr,"#fdfdfd"),jr(sn,sr,hr,f,j[f][4*w+L],G[K[f][4*w+L]])):(Nr(sn,sr,hr,G[K[f][4*w+L]]),Zr(sn,sr,hr,G[K[f][4*w+L]]))}if(!M||y)continue;var U=(gr[f][1]-gr[f][0]+gr[f][2]-gr[f][3])/6,P=(gr[f][3]-gr[f][0]+gr[f][2]-gr[f][1])/6,C=(mr[f][1]-mr[f][0]+mr[f][2]-mr[f][3])/6,W=(mr[f][3]-mr[f][0]+mr[f][2]-mr[f][1])/6;if(3==o)for(h=0;h<8;h++){for(A=0;A<4;A++)kr(f,A,Ut[St],Pt[St],Xt[h][A][0],Xt[h][A][1],!1);if(Ct[St]=(U*Yt[h][0]+C*Yt[h][1])*qt[f][h],Wt[St]=(P*Yt[h][0]+W*Yt[h][1])*qt[f][h],Ot[St]=re[f][h%4],Qt[St]=Math.floor(h/4),24==++St)break}else if(0==o){if(f!=u&&g>0&&m>0){for(h=4==g?0==n[f][1][0]?0:2:0==n[f][0][0]?3:1,A=0;A<4;A++)kr(f,A,Ut[St],Pt[St],Xt[h][A][0],Xt[h][A][1],!1);Ct[St]=(U*Yt[h][0]+C*Yt[h][1])*qt[f][h],Wt[St]=(P*Yt[h][0]+W*Yt[h][1])*qt[f][h],Ot[St]=u,Qt[St]=0,St++}}else if(1==o&&f!=u&&g>0&&m>0){h=4==g?1==n[f][1][0]?0:2:1==n[f][0][0]?3:1;h+=4;for(A=0;A<4;A++)kr(f,A,Ut[St],Pt[St],Xt[h][A][0],Xt[h][A][1],!1);Ct[St]=(U*Yt[h][0]+C*Yt[h][1])*qt[f][h],Wt[St]=(P*Yt[h][0]+W*Yt[h][1])*qt[f][h],Ot[St]=u,Qt[St]=1,St++}}}function kr(e,t,r,n,o,a,f){o/=4,a/=4;var l=gr[e][0]+(gr[e][1]-gr[e][0])*o,i=mr[e][0]+(mr[e][1]-mr[e][0])*o,u=gr[e][3]+(gr[e][2]-gr[e][3])*o,c=mr[e][3]+(mr[e][2]-mr[e][3])*o;r[t]=Math.floor(.5+l+(u-l)*a),n[t]=Math.floor(.5+i+(c-i)*a),f&&(r[t]=Lt-r[t])}var Lr=[1,1,-1,-1,-1,1,1,-1,-1,0,1,0,0,1,0,-1],yr=[];function Tr(e,t,r,o){if(Me){e.fillStyle="black";for(var a=0;a<yr.length;a+=2)e.fillText(t,r+yr[a],o+yr[a+1]);e.fillStyle="white"}else e.fillStyle=n;e.fillText(t,r,o)}var Ar=[-1,3,1,-1,0,2,4,-1];function Rr(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Fr(e){var t=Math.sqrt(Dr(e,e));return e[0]/=t,e[1]/=t,e[2]/=t,e}function Sr(e,t){return e[0]*=t,e[1]*=t,e[2]*=t,e}function Dr(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function xr(e,t){return e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],e}function Br(e,t){return e[0]-=t[0],e[1]-=t[1],e[2]-=t[2],e}function Er(e,t,r){return e[0]=t[1]*r[2]-t[2]*r[1],e[1]=t[2]*r[0]-t[0]*r[2],e[2]=t[0]*r[1]-t[1]*r[0],e}function Ir(e,t){var r=Math.sin(t),n=Math.cos(t),o=e[1]*n-e[2]*r,a=e[1]*r+e[2]*n;return e[1]=o,e[2]=a,e}function Ur(e,t){var r=Math.sin(t),n=Math.cos(t),o=e[0]*n-e[2]*r,a=e[0]*r+e[2]*n;return e[0]=o,e[2]=a,e}function Pr(e,t){var r=Math.sin(t),n=Math.cos(t),o=e[0]*n-e[1]*r,a=e[0]*r+e[1]*n;return e[0]=o,e[1]=a,e}function Cr(e,t,r){return"#"+Wr(e.toString(16))+Wr(t.toString(16))+Wr(r.toString(16))}function Wr(e){return("00"+e).substring(e.length)}function Xr(e){for(var t=0,r=0;r<6;r++)for(var n=0;n<16;n++)if(e[r].toLowerCase()=="0123456789abcdef".charAt(n)){t++;break}return 6==t}function Yr(e,t,r,n,o){e.beginPath(),e.moveTo(t,r),e.lineTo(t+n,r),e.lineTo(t+n,r+o),e.lineTo(t,r+o),e.lineTo(t,r),e.closePath(),e.clip()}var qr=[];function Or(e,t,r,n){switch(r=Math.floor(r),n=Math.floor(n),t){case 0:zr(e,r-qr[4],n-qr[3],qr[3],qr[6]+1),Qr(e,r+qr[4],n,-1);break;case 1:zr(e,r+qr[1],n-qr[3],qr[3],qr[6]+1),Qr(e,r-qr[1],n,-1);break;case 2:Qr(e,r+qr[1],n,-1);break;case 3:y?zr(e,r-qr[4],n-qr[3],qr[7],qr[7]):(zr(e,r-qr[4],n-qr[2],qr[7],qr[5]),zr(e,r-qr[2],n-qr[4],qr[3],qr[9]));break;case 4:Qr(e,r-qr[2],n,1);break;case 5:zr(e,r-qr[4],n-qr[3],qr[3],qr[6]+1),Qr(e,r,n,1);break;case 6:zr(e,r+qr[1],n-qr[3],qr[3],qr[6]+1),Qr(e,r-qr[4],n,1);break;case 7:e.fillStyle=7==ge?$r(o):o,e.fillRect(Lt-Q-qr[1]-vn,qr[1]+vn,Q,Q),e.lineWidth=dn,e.strokeStyle=l,e.beginPath(),hn%2==0?e.rect(Lt-Q-qr[1],qr[1],Q,Q):e.rect(Lt-Q-qr[1]-vn,qr[1]+vn,Q,Q),e.stroke(),Qr(e,r-qr[3],n+qr[1],1)}}function Qr(e,t,r,n){var o=3*hn,a=[],f=[];a[0]=t,a[1]=t+n,a[2]=t+4*hn*n,a[3]=t+n,a[4]=t,f[0]=r-o,f[1]=r-o,f[2]=r,f[3]=r+o,f[4]=r+o,function(e,t,r){e.beginPath(),e.moveTo(t[0]+vn,r[0]+vn);for(var n=1;n<5;n++)e.lineTo(t[n]+vn,r[n]+vn);e.closePath(),e.fillStyle="white",e.strokeStyle="black",e.fill(),e.lineWidth=dn,e.stroke()}(e,a,f)}function zr(e,t,r,n,o){e.lineWidth=dn,e.beginPath(),e.rect(t+vn,r+vn,n-1,o-1),e.fillStyle="white",e.fill(),e.strokeStyle="black",e.stroke()}function Nr(e,t,r,n){e.beginPath(),e.moveTo(t[0],r[0]),e.lineTo(t[1],r[1]),e.lineTo(t[2],r[2]),e.lineTo(t[3],r[3]),e.closePath(),e.strokeStyle=n,e.lineWidth=.7*hn,e.stroke()}function Zr(e,t,r,n){e.beginPath(),e.moveTo(t[0],r[0]),e.lineTo(t[1],r[1]),e.lineTo(t[2],r[2]),e.lineTo(t[3],r[3]),e.closePath(),e.fillStyle=n,e.fill()}var Hr,Gr,Kr=[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]];function jr(e,t,r,n,o,a){var f=[],l=[];if(2!=Ae||"#ffffff"!=a){for(var i=0;i<4;i++)f[i]=Math.floor(t[i]+.05*(t[Kr[2][i]]-t[i])),l[i]=Math.floor(r[i]+.05*(r[Kr[2][i]]-r[i]));0==n&&(o=(o+1)%4),4==n&&(o=(o+3)%4);var u=Kr[o][0],c=Kr[o][1],s=Kr[o][2],h=Kr[o][3],v=.26*(f[s]-f[c]),d=.26*(l[s]-l[c]),g=(f[u]-f[c])/2,m=l[c]+(l[u]-l[c])/2,b=l[s]+(l[h]-l[s])/2,M=(f[h]-f[s])/2,p=1^o;e.fillStyle=a,e.beginPath(),e.moveTo(f[u]+(f[h]-f[u])/2,l[u]+(l[h]-l[u])/2),e.lineTo(f[p]+g,m),e.lineTo(f[p]+v+g,m+d),e.lineTo(f[p]+v,l[p]+d),p=(p+1)%4,e.lineTo(f[p]-v,l[p]-d),e.lineTo(f[p]-v+M,b-d),e.lineTo(f[p]+M,b),e.closePath(),e.fill(),e.lineWidth=.6*hn,e.strokeStyle="black",e.stroke()}}function Jr(e){return"white"==e?"#FFFFFF":"black"==e?"#000000":"#808080"}function Vr(e){return"#"!=e.substring(0,1)&&(e=Jr(e)),(299*parseInt(e.substring(1,3),16)+587*parseInt(e.substring(3,5),16)+114*parseInt(e.substring(5,7),16))/1e3}function $r(e){"#"!=e.substring(0,1)&&(e=Jr(e));var t=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16);return Cr(t=Math.floor(.7*t),r=Math.floor(.7*r),n=Math.floor(.7*n))}function _r(e,t){if(e>Je)setTimeout(_r,0,e,t);else{if(!X){for(var r=se[U];P<r.length;){if(r[P]>=1e3)q=r[P]-1e3;else if(-1!=r[P]){var n=r[P]%4+1,o=Math.floor(r[P]/4)%7,a=Math.floor(r[P]/28);ht(K,a,4==n?2:n,o)}P++}return y=!1,de=!0,ur(),void Je++}var f,l,i,g,b,M,w=t;!1,requestAnimationFrame((function e(){if(R){if(R=!1,M=!1,p)w>0?P>=r.length&&(P=0,Ge(r)):(q=-1,0==P&&(P=r.length));else if(w>0&&P>=r.length||w<0&&0==P)return m=!1,y=!1,Je++,de=!0,void ur();y=!0,de=!0}if(F&&(F=!1,w<0&&(x=!1,0==P?(x=!0,D=!0):P--),!x)){if(T=!1,-1==r[P]){if(ur(),!W)for(f=Date.now();Date.now()-f<1e3;);}else r[P]>=1e3?q=w>0?r[P]-1e3:-1:T=!0;if(T){n=r[P]%4+1,o=Math.floor(r[P]/4)%7;var t=n<3;if(4==n&&(n=2),w<0&&(t=!t,n=4-n),a=Math.floor(r[P]/28),k=!1,ce=!0,L=!0,h=0,ne[a]>0&&(t=!t),X){b=Math.PI/2,g=t?1:-1;var B=67*v;2==n&&(b=Math.PI,B=67*d),k=!0,u=a,c=o,st(a),f=Date.now(),l=f,i=g*b/B,s=0}}else S=!0}if(!x&&(T&&(X?s*g<b?(ur(),m&&(S=!0),l=Date.now(),s=i*(l-f)):(S=!0,pe&&!W&&(s-=g*b,ur(),P>0&&P<r.length-1&&(S=!1,P+=w,f=l,l=Date.now(),s=i*(l-f)))):S=!0),S)){if(S=!1,F=!0,T&&(s=0,k=!1,ce=!0,ht(K,a,n,o),L=!1,X&&ur(),W&&(M=!0)),w>0){if(++P<r.length&&r[P]>=1e3&&(q=r[P]-1e3,P++),P==r.length)if(A){P=0,Ge(r);for(var E=0;E<6;E++)for(var I=0;I<16;I++)K[E][I]=J[E][I],j[E][I]=V[E][I]}else D=!0}else q=-1;(m||M)&&(D=!0)}if(D)return D=!1,R=!0,je<=Je+1&&(y=!1),de=!0,0==ge&&_e(),ur(),A&&(_e(),A=!1),m=!1,Je++,void(1==P&&r[0]>=1e3&&P--);requestAnimationFrame(e)}));var T=!1,R=!0,F=!0,S=!1,D=!1,x=!1;r=A?he[0]:se[U]}}document.addEventListener("touchstart",fn),document.addEventListener("touchmove",wn),document.addEventListener("touchend",an),document.addEventListener("mousedown",fn),document.addEventListener("mousemove",wn),document.addEventListener("mouseup",an),document.addEventListener("contextmenu",yn);var en=!1,tn=!0,rn=document.getElementsByTagName("div"),nn=rn.length>0&&"wrap"==rn[0].className;function on(e){nn?rn[0].style.overflow=e:document.body.style.overflow=e}function an(e){if(en&&void 0!==e.touches&&(e.preventDefault(),on("auto")),en?setTimeout((function(){tn=!0}),100):tn=!0,en=!1,T=!1,z)z=!1,de=!0,ur();else if(k&&!L){k=!1,h+=s,s=0;for(var t=h;t<0;)t+=32*Math.PI;var r=Math.floor(8*t/Math.PI)%16;(we||r%4==0||r%4==3)&&(r=Math.floor((r+2)/4),ne[u]>0&&(r=(4-r)%4),h=0,ce=!0,ht(K,u,r,c)),ur()}}function fn(e){var t=cn.getBoundingClientRect(),r=Math.floor(t.left),n=Math.floor(t.top);if(void 0===e.touches)var o=e.clientX,a=e.clientY;else o=e.touches[0].clientX,a=e.touches[0].clientY;o<r||o>r+Lt/hn||a<n||a>n+(yt+Q)/hn||(e.preventDefault(),en=!0,tn=!1,void 0!==e.touches&&(e.preventDefault(),on("hidden")),Hr=r,Gr=n,Rt=Tt=kn(e),Ft=At=Ln(e),g=!1,ge=function(e,t){if(0==O)return-1;if(se.length>1&&e>=Lt-Q&&e<Lt&&t>=0&&t<Q)return 7;if(2==O)return e>=0&&e<Q&&t>=yt-Q&&t<yt?0:-1;if(t<yt)return-1;for(var r=0,n=0;n<7;n++){var o=(Lt-r)/(7-n);if(e>=r&&e<r+o&&t>=yt&&t<yt+Q)return n;r+=o}return-1}(Tt,At),ge>=0?(z=!0,3==ge?y?$e():b=!b:0==ge?ye>0&&2==O?1==Le?(Le=!1,$e(),_e()):(Le=!0,Ve(Ar[ge=6])):($e(),_e()):7==ge?($e(),setTimeout(_e,10),U=U<se.length-1?U+1:0):Ve(Ar[ge]),de=!0,ur()):me>0&&se.length>0&&se[U].length>0&&At>yt-me&&At<=yt?w&&($e(),ln(je++)):(b&&(Rt=Tt=Lt-Tt),void 0===e.touches?!M||y||0!=e.button||e.shiftKey||(g=!0):M&&!y&&(g=!0)))}function ln(e){if(e>Je)setTimeout(ln,0,e);else{var t=ze(se[U]),r=Math.floor(((Tt-1)*t*2/(Lt-2)+1)/2);(r=Math.max(0,Math.min(t,r)))>0&&(r=Ne(se[U],r)),r>P&&Ke(K,se[U],P,r-P,!1),r<P&&Ke(K,se[U],r,P-r,!0),P=r,T=!0,ur(),y=!1,Je++}}var un,cn,sn,hn,vn,dn,gn,mn,bn,Mn,pn=[];function wn(e){if(en&&!z){if(T){$e();var t=ze(se[U]),r=Math.floor(((kn(e)-1)*t*2/(Lt-2)+1)/2);return(r=Math.max(0,Math.min(t,r)))>0&&(r=Ne(se[U],r)),r>P&&Ke(K,se[U],P,r-P,!1),r<P&&Ke(K,se[U],r,P-r,!0),P=r,void ur()}var n=b?Lt-kn(e):kn(e),o=Ln(e),a=n-Tt,f=o-At;if(M&&g&&!k&&!y){Rt=n,Ft=o;for(var l=0;l<St;l++){var i=Ut[l][0],h=Ut[l][1]-i,v=Ut[l][3]-i,d=Pt[l][0],m=Pt[l][1]-d,p=Pt[l][3]-d,w=(p*(Tt-i)-v*(At-d))/(h*p-v*m),L=(-m*(Tt-i)+h*(At-d))/(h*p-v*m);if(w>0&&w<1&&L>0&&L<1){if(a*a+f*f<144)return;if(Et=Ct[l],It=Wt[l],Math.abs(Et*a+It*f)/Math.sqrt((Et*Et+It*It)*(a*a+f*f))>.75){k=!0,u=Ot[l],c=Qt[l];break}}}g=!1,Tt=Rt,At=Ft}a=(n-Tt)/hn,f=(o-At)/hn,!k||y?(Fr(xr(oe,Sr(Rr(pn,ae),-.016*a))),Fr(Er(ae,fe,oe)),Fr(xr(oe,Sr(Rr(pn,fe),.016*f))),Fr(Er(fe,oe,ae)),Tt=n,At=o):(ce&&st(u),s=.03*(Et*a+It*f)/Math.sqrt(Et*Et+It*It)),ur()}}function kn(e){return void 0===e.touches?(e.clientX-Hr)*hn:(e.touches[0].clientX-Hr)*hn}function Ln(e){return void 0===e.touches?(e.clientY-Gr)*hn:(e.touches[0].clientY-Gr)*hn}function yn(e){tn||e.preventDefault()}function Tn(){clearTimeout(un),un=setTimeout((function(){An(),de=!0,ur()}),20)}function An(){yt=Mn.clientHeight-1,Lt=Mn.clientWidth-1,cn.style.width=Lt+"px",cn.style.height=yt+"px",hn=devicePixelRatio,vn=hn/2,yt=Math.floor(yt*hn),Lt=Math.floor(Lt*hn),cn.width=Lt,cn.height=yt,dn=hn,Q=Math.floor(gn*hn),me=Math.floor(mn*hn),be=Math.floor(bn*hn);for(var e=1;e<10;e++)qr[e]=e*hn;for(e=0;e<Lr.length;e++)yr[e]=Lr[e]*hn;1==O&&(yt-=Q)}function Rn(e,t){var r,n,o=["R","L","F","B","U","D"],a=["","m","n"],f=["","2","'"],l=-1,i=-1,u=-1,c="";0==t&&(t=10*e);for(var s=0;s<t;s++){for(;l==i||Math.floor(l/2)==Math.floor(i/2)&&l==u;)l=Math.floor(6*Math.random());u=i,i=l,r=Math.floor(3*Math.random()),e<=3?c+=""+o[l]+f[r]+" ":(n=Math.floor(Math.random()*(e>4?3:2)),5==e&&1==n&&(n=0),c+=""+o[l]+a[n]+f[r]+" ")}return c}window.addEventListener("resize",Tn);var Fn=[];function Sn(){$e(),document.removeEventListener("mousedown",fn),document.removeEventListener("touchstart",fn),document.removeEventListener("touchmove",wn),document.removeEventListener("touchend",an),document.removeEventListener("mousedown",fn),document.removeEventListener("mousemove",wn),document.removeEventListener("mouseup",an),document.removeEventListener("contextmenu",yn),window.removeEventListener("resize",Tn)}!function(){cn=document.createElement("canvas"),void 0!==e&&function(){for(var t=e.split("&"),r=0;r<t.length;r++){var n=t[r].split("=");void 0!==n[1]&&(Fn[n[0]]=decodeURIComponent(n[1].trim()))}}();var t=Be("id");if(null!=t)(Mn=document.getElementById(t)).innerHTML="";else if(null!=document.currentScript)Mn=document.currentScript.parentNode;else{var r=document.getElementsByTagName("script"),n=r[r.length-1];Mn=n.parentNode}null!=Mn.id&&"undefined"!=typeof removeListeners&&(removeListeners[Mn.id]=Sn);for(var o=0;o<6;o++)K[o]=[],j[o]=[],J[o]=[],V[o]=[];for(o=0;o<24;o++)Ut[o]=[],Pt[o]=[];U=0,h=0,De()}()}